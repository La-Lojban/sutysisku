!function r(i,a,u){function o(h,p){if(!a[h]){if(!i[h]){var d="function"==typeof require&&require;if(!p&&d)return d(h,!0);if(l)return l(h,!0);var y=new Error("Cannot find module '"+h+"'");throw y.code="MODULE_NOT_FOUND",y}var v=a[h]={exports:{}};i[h][0].call(v.exports,(function(a){return o(i[h][1][a]||a)}),v,v.exports,r,i,a,u)}return a[h].exports}for(var l="function"==typeof require&&require,h=0;h<u.length;h++)o(u[h]);return o}({1:[function(i,a,u){"use strict";var l=i("@babel/runtime/helpers/interopRequireDefault"),h=l(i("@babel/runtime/regenerator")),p=l(i("@babel/runtime/helpers/toConsumableArray")),d=l(i("@babel/runtime/helpers/defineProperty")),y=l(i("@babel/runtime/helpers/asyncToGenerator"));function _createForOfIteratorHelper(i,a){var u="undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(!u){if(Array.isArray(i)||(u=function _unsupportedIterableToArray(i,a){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,a);var u=Object.prototype.toString.call(i).slice(8,-1);"Object"===u&&i.constructor&&(u=i.constructor.name);if("Map"===u||"Set"===u)return Array.from(i);if("Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return _arrayLikeToArray(i,a)}(i))||a&&i&&"number"==typeof i.length){u&&(i=u);var l=0,h=function F(){};return{s:h,n:function n(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function e(i){throw i},f:h}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,d=!0,y=!1;return{s:function s(){u=u.call(i)},n:function n(){var i=u.next();return d=i.done,i},e:function e(i){y=!0,p=i},f:function f(){try{d||null==u.return||u.return()}finally{if(y)throw p}}}}function _arrayLikeToArray(i,a){(null==a||a>i.length)&&(a=i.length);for(var u=0,l=new Array(a);u<a;u++)l[u]=i[u];return l}function ownKeys(i,a){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable}))),u.push.apply(u,l)}return u}function _objectSpread(i){for(var a=1;a<arguments.length;a++){var u=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(u),!0).forEach((function(a){(0,d.default)(i,a,u[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):ownKeys(Object(u)).forEach((function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(u,a))}))}return i}i("dexie-export-import"),importScripts("https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.1/polyfill.min.js","https://cdnjs.cloudflare.com/ajax/libs/dexie/2.0.4/dexie.min.js");var v=new Dexie("sorcu1"),m={en:{n:"English",p:"selsku_lanci_eng"},muplis:{n:"la muplis"},"en-cll":{n:'<img src="../pixra/cukta.svg" class="cukta"/>The Book',p:"cukta"},jbo:{n:"lojbo",p:"lanci_jbo"},ru:{n:"русский",p:"selsku_lanci_rus"},eo:{n:"esperanto",p:"lanci_epo"},es:{n:"español",p:"selsku_lanci_spa"},"fr-facile":{n:"français",p:"selsku_lanci_fra"},ja:{n:"日本語",p:"selsku_lanci_jpn"},zh:{n:"中文",p:"selsku_lanci_zho"}},g=null;function initDb(){try{v.version(1).stores({valsi:"++id, bangu, w, d, n, t, *s, g, *r, *cache",langs_ready:"++id, bangu",tejufra:"++id, &bangu, jufra"})}catch(i){}}initDb();var b,w,_,fancu={tejufra:(_=(0,y.default)(h.default.mark((function _callee(i,a){var u,l,p;return h.default.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:return u=i.bangu,h.next=3,v.tejufra.where({bangu:u.toString()}).toArray();case 3:if(h.t0=h.sent[0],h.t0){h.next=6;break}h.t0={};case 6:return l=h.t0,h.next=9,v.tejufra.where({bangu:"en"}).toArray();case 9:if(h.t1=h.sent[0],h.t1){h.next=12;break}h.t1={};case 12:p=h.t1,a(_objectSpread(_objectSpread({},l),{},{jufra:_objectSpread(_objectSpread({},p.jufra),l.jufra)}));case 14:case"end":return h.stop()}}),_callee)}))),function tejufra(i,a){return _.apply(this,arguments)}),cnino_bangu:function cnino_bangu(i){var a=i.bangu;g=a},ningau_lerosorcu:(w=(0,y.default)(h.default.mark((function _callee2(i,a){return h.default.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:fancu.ningau_lesorcu(i,a,!0);case 1:case"end":return u.stop()}}),_callee2)}))),function ningau_lerosorcu(i,a){return w.apply(this,arguments)}),ningau_lesorcu:(b=(0,y.default)(h.default.mark((function _callee3(i,a,u){var l,p,d,y;return h.default.wrap((function _callee3$(h){for(;;)switch(h.prev=h.next){case 0:initDb(),l=[],p=0,d=Object.keys(m);case 3:if(!(p<d.length)){h.next=17;break}if(y=d[p],!u){h.next=9;break}h.t0=0,h.next=12;break;case 9:return h.next=11,v.langs_ready.where("bangu").equals(y).count();case 11:h.t0=h.sent;case 12:0===h.t0&&l.push(y);case 14:p++,h.next=3;break;case 17:if(!(l.length>0)){h.next=21;break}return h.next=20,cnino_sorcu(a,l,i);case 20:console.log("Database checked. ".concat(l.length," languages have been updated"));case 21:postMessage({kind:"loader",cmene:"loaded"}),jufra({});case 23:case"end":return h.stop()}}),_callee3)}))),function ningau_lesorcu(i,a,u){return b.apply(this,arguments)})};function jufra(i){return _jufra.apply(this,arguments)}function _jufra(){return(_jufra=(0,y.default)(h.default.mark((function _callee4(i){var a,u,l,p,d;return h.default.wrap((function _callee4$(h){for(;;)switch(h.prev=h.next){case 0:if(!(a=i.bapli)){h.next=9;break}return h.prev=2,h.next=5,v.tejufra.clear();case 5:h.next=9;break;case 7:h.prev=7,h.t0=h.catch(2);case 9:return h.next=11,v.tejufra.count();case 11:if(0!==h.sent&&!a){h.next=34;break}return u={},h.next=16,fetch("/sutysisku/lojban/tejufra.json?sisku=".concat((new Date).getTime()));case 16:if(!(l=h.sent).ok){h.next=23;break}return h.next=20,l.json();case 20:u=h.sent,h.next=24;break;case 23:console.log("HTTP-Error: "+l.status);case 24:return p=Object.keys(u),d=p.map((function(i){return{bangu:i,jufra:u[i]}})),h.prev=26,h.next=29,v.tejufra.bulkPut(d);case 29:h.next=33;break;case 31:h.prev=31,h.t1=h.catch(26);case 33:console.log("locales updated");case 34:case"end":return h.stop()}}),_callee4,null,[[2,7],[26,31]])})))).apply(this,arguments)}function chunkArray(i,a){var u=0,l=i.length,h=[];for(u=0;u<l;u+=a){var p=i.slice(u,u+a);h.push(p)}return h}function cnino_sorcu(i,a,u,l){return _cnino_sorcu.apply(this,arguments)}function _cnino_sorcu(){return(_cnino_sorcu=(0,y.default)(h.default.mark((function _callee5(i,a,u,l){var d,y,b,w,_,x,T,E,O,P,A,k;return h.default.wrap((function _callee5$(l){for(;;)switch(l.prev=l.next){case 0:return initDb(),l.next=3,jufra({bapli:!0});case 3:fancu.tejufra(u,(function(i){postMessage({kind:"fancu",cmene:"tejufra",bangu:u.bangu,results:i})})),d=(d=a||Object.keys(m)).filter((function(i){return i==u.bangu})).concat(d.filter((function(i){return i!=u.bangu})));case 6:if(!(d.length>0)){l.next=64;break}if(!g){l.next=13;break}return l.next=10,v.langs_ready.where("bangu").equals(g).toArray();case 10:l.sent[0]||(d=(0,p.default)(new Set([g].concat(d)))),g=null;case 13:return y=d[0],d=d.slice(1),l.next=17,v.langs_ready.where("bangu").equals(y).toArray();case 17:return b=l.sent[0],i("downloading ".concat(y,".blob.json dump")),postMessage({kind:"loader",cmene:"loading",completedRows:12+3*(Math.random()-.5),totalRows:100,bangu:m[y].n}),l.next=22,fetch("/sutysisku/data/parsed-".concat(y,".blob.json?sisku=").concat((new Date).getTime()));case 22:if(w=l.sent,_=void 0,!w.ok){l.next=61;break}return l.next=27,w.json();case 27:return _=l.sent,l.next=30,v.valsi.where({bangu:y}).delete();case 30:return l.next=32,v.langs_ready.where({bangu:y}).delete();case 32:x=_.data.data[0].rows,T=_.data.tables[0].rowCount,E=0,x=chunkArray(x,O=150),P=_createForOfIteratorHelper(x),l.prev=38,P.s();case 40:if((A=P.n()).done){l.next=48;break}return k=A.value,l.next=44,v.valsi.bulkAdd(k);case 44:E+=O,postMessage({kind:"loader",cmene:"loading",completedRows:E,totalRows:T,bangu:m[y].n,banguRaw:y});case 46:l.next=40;break;case 48:l.next=53;break;case 50:l.prev=50,l.t0=l.catch(38),P.e(l.t0);case 53:return l.prev=53,P.f(),l.finish(53);case 56:b||v.langs_ready.put({bangu:y}),i("imported ".concat(y,".blob.json at ").concat((new Date).toISOString())),postMessage({kind:"loader",cmene:"loading",completedRows:E,totalRows:T,bangu:m[y].n,banguRaw:y}),l.next=62;break;case 61:console.log("HTTP-Error: "+w.status);case 62:l.next=6;break;case 64:case"end":return l.stop()}}),_callee5,null,[[38,50,53,56]])})))).apply(this,arguments)}postMessage({kind:"ready"}),self.onmessage=function(i){"loader"==i.data.kind?postMessage(i.data):"fancu"==i.data.kind&&i.data.cmene&&fancu[i.data.cmene](i.data,(function(a){postMessage({kind:"fancu",cmene:i.data.cmene,datni:i.data,results:a})}))}},{"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/defineProperty":5,"@babel/runtime/helpers/interopRequireDefault":6,"@babel/runtime/helpers/toConsumableArray":9,"@babel/runtime/regenerator":11,"dexie-export-import":14}],2:[function(i,a,u){a.exports=function _arrayLikeToArray(i,a){(null==a||a>i.length)&&(a=i.length);for(var u=0,l=new Array(a);u<a;u++)l[u]=i[u];return l},a.exports.default=a.exports,a.exports.__esModule=!0},{}],3:[function(i,a,u){var l=i("./arrayLikeToArray.js");a.exports=function _arrayWithoutHoles(i){if(Array.isArray(i))return l(i)},a.exports.default=a.exports,a.exports.__esModule=!0},{"./arrayLikeToArray.js":2}],4:[function(i,a,u){function asyncGeneratorStep(i,a,u,l,h,p,d){try{var y=i[p](d),v=y.value}catch(i){return void u(i)}y.done?a(v):Promise.resolve(v).then(l,h)}a.exports=function _asyncToGenerator(i){return function(){var a=this,u=arguments;return new Promise((function(l,h){var p=i.apply(a,u);function _next(i){asyncGeneratorStep(p,l,h,_next,_throw,"next",i)}function _throw(i){asyncGeneratorStep(p,l,h,_next,_throw,"throw",i)}_next(void 0)}))}},a.exports.default=a.exports,a.exports.__esModule=!0},{}],5:[function(i,a,u){a.exports=function _defineProperty(i,a,u){return a in i?Object.defineProperty(i,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[a]=u,i},a.exports.default=a.exports,a.exports.__esModule=!0},{}],6:[function(i,a,u){a.exports=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}},a.exports.default=a.exports,a.exports.__esModule=!0},{}],7:[function(i,a,u){a.exports=function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)},a.exports.default=a.exports,a.exports.__esModule=!0},{}],8:[function(i,a,u){a.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a.exports.default=a.exports,a.exports.__esModule=!0},{}],9:[function(i,a,u){var l=i("./arrayWithoutHoles.js"),h=i("./iterableToArray.js"),p=i("./unsupportedIterableToArray.js"),d=i("./nonIterableSpread.js");a.exports=function _toConsumableArray(i){return l(i)||h(i)||p(i)||d()},a.exports.default=a.exports,a.exports.__esModule=!0},{"./arrayWithoutHoles.js":3,"./iterableToArray.js":7,"./nonIterableSpread.js":8,"./unsupportedIterableToArray.js":10}],10:[function(i,a,u){var l=i("./arrayLikeToArray.js");a.exports=function _unsupportedIterableToArray(i,a){if(i){if("string"==typeof i)return l(i,a);var u=Object.prototype.toString.call(i).slice(8,-1);return"Object"===u&&i.constructor&&(u=i.constructor.name),"Map"===u||"Set"===u?Array.from(i):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?l(i,a):void 0}},a.exports.default=a.exports,a.exports.__esModule=!0},{"./arrayLikeToArray.js":2}],11:[function(i,a,u){a.exports=i("regenerator-runtime")},{"regenerator-runtime":18}],12:[function(i,a,u){"use strict";u.byteLength=function byteLength(i){var a=getLens(i),u=a[0],l=a[1];return 3*(u+l)/4-l},u.toByteArray=function toByteArray(i){var a,u,l=getLens(i),d=l[0],y=l[1],v=new p(function _byteLength(i,a,u){return 3*(a+u)/4-u}(0,d,y)),m=0,g=y>0?d-4:d;for(u=0;u<g;u+=4)a=h[i.charCodeAt(u)]<<18|h[i.charCodeAt(u+1)]<<12|h[i.charCodeAt(u+2)]<<6|h[i.charCodeAt(u+3)],v[m++]=a>>16&255,v[m++]=a>>8&255,v[m++]=255&a;2===y&&(a=h[i.charCodeAt(u)]<<2|h[i.charCodeAt(u+1)]>>4,v[m++]=255&a);1===y&&(a=h[i.charCodeAt(u)]<<10|h[i.charCodeAt(u+1)]<<4|h[i.charCodeAt(u+2)]>>2,v[m++]=a>>8&255,v[m++]=255&a);return v},u.fromByteArray=function fromByteArray(i){for(var a,u=i.length,h=u%3,p=[],d=16383,y=0,v=u-h;y<v;y+=d)p.push(encodeChunk(i,y,y+d>v?v:y+d));1===h?(a=i[u-1],p.push(l[a>>2]+l[a<<4&63]+"==")):2===h&&(a=(i[u-2]<<8)+i[u-1],p.push(l[a>>10]+l[a>>4&63]+l[a<<2&63]+"="));return p.join("")};for(var l=[],h=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,v=d.length;y<v;++y)l[y]=d[y],h[d.charCodeAt(y)]=y;function getLens(i){var a=i.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=i.indexOf("=");return-1===u&&(u=a),[u,u===a?0:4-u%4]}function encodeChunk(i,a,u){for(var h,p,d=[],y=a;y<u;y+=3)h=(i[y]<<16&16711680)+(i[y+1]<<8&65280)+(255&i[y+2]),d.push(l[(p=h)>>18&63]+l[p>>12&63]+l[p>>6&63]+l[63&p]);return d.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],13:[function(i,a,u){(function(a){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var a=i("base64-js"),l=i("ieee754");u.Buffer=Buffer,u.SlowBuffer=function SlowBuffer(i){+i!=i&&(i=0);return Buffer.alloc(+i)},u.INSPECT_MAX_BYTES=50;var h=2147483647;function createBuffer(i){if(i>h)throw new RangeError('The value "'+i+'" is invalid for option "size"');var a=new Uint8Array(i);return a.__proto__=Buffer.prototype,a}function Buffer(i,a,u){if("number"==typeof i){if("string"==typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(i)}return from(i,a,u)}function from(i,a,u){if("string"==typeof i)return function fromString(i,a){"string"==typeof a&&""!==a||(a="utf8");if(!Buffer.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var u=0|byteLength(i,a),l=createBuffer(u),h=l.write(i,a);h!==u&&(l=l.slice(0,h));return l}(i,a);if(ArrayBuffer.isView(i))return fromArrayLike(i);if(null==i)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(isInstance(i,ArrayBuffer)||i&&isInstance(i.buffer,ArrayBuffer))return function fromArrayBuffer(i,a,u){if(a<0||i.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');var l;l=void 0===a&&void 0===u?new Uint8Array(i):void 0===u?new Uint8Array(i,a):new Uint8Array(i,a,u);return l.__proto__=Buffer.prototype,l}(i,a,u);if("number"==typeof i)throw new TypeError('The "value" argument must not be of type number. Received type number');var l=i.valueOf&&i.valueOf();if(null!=l&&l!==i)return Buffer.from(l,a,u);var h=function fromObject(i){if(Buffer.isBuffer(i)){var a=0|checked(i.length),u=createBuffer(a);return 0===u.length||i.copy(u,0,0,a),u}if(void 0!==i.length)return"number"!=typeof i.length||numberIsNaN(i.length)?createBuffer(0):fromArrayLike(i);if("Buffer"===i.type&&Array.isArray(i.data))return fromArrayLike(i.data)}(i);if(h)return h;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof i[Symbol.toPrimitive])return Buffer.from(i[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}function assertSize(i){if("number"!=typeof i)throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function allocUnsafe(i){return assertSize(i),createBuffer(i<0?0:0|checked(i))}function fromArrayLike(i){for(var a=i.length<0?0:0|checked(i.length),u=createBuffer(a),l=0;l<a;l+=1)u[l]=255&i[l];return u}function checked(i){if(i>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|i}function byteLength(i,a){if(Buffer.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||isInstance(i,ArrayBuffer))return i.byteLength;if("string"!=typeof i)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);var u=i.length,l=arguments.length>2&&!0===arguments[2];if(!l&&0===u)return 0;for(var h=!1;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return utf8ToBytes(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*u;case"hex":return u>>>1;case"base64":return base64ToBytes(i).length;default:if(h)return l?-1:utf8ToBytes(i).length;a=(""+a).toLowerCase(),h=!0}}function slowToString(i,a,u){var l=!1;if((void 0===a||a<0)&&(a=0),a>this.length)return"";if((void 0===u||u>this.length)&&(u=this.length),u<=0)return"";if((u>>>=0)<=(a>>>=0))return"";for(i||(i="utf8");;)switch(i){case"hex":return hexSlice(this,a,u);case"utf8":case"utf-8":return utf8Slice(this,a,u);case"ascii":return asciiSlice(this,a,u);case"latin1":case"binary":return latin1Slice(this,a,u);case"base64":return base64Slice(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,a,u);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),l=!0}}function swap(i,a,u){var l=i[a];i[a]=i[u],i[u]=l}function bidirectionalIndexOf(i,a,u,l,h){if(0===i.length)return-1;if("string"==typeof u?(l=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),numberIsNaN(u=+u)&&(u=h?0:i.length-1),u<0&&(u=i.length+u),u>=i.length){if(h)return-1;u=i.length-1}else if(u<0){if(!h)return-1;u=0}if("string"==typeof a&&(a=Buffer.from(a,l)),Buffer.isBuffer(a))return 0===a.length?-1:arrayIndexOf(i,a,u,l,h);if("number"==typeof a)return a&=255,"function"==typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(i,a,u):Uint8Array.prototype.lastIndexOf.call(i,a,u):arrayIndexOf(i,[a],u,l,h);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(i,a,u,l,h){var p,d=1,y=i.length,v=a.length;if(void 0!==l&&("ucs2"===(l=String(l).toLowerCase())||"ucs-2"===l||"utf16le"===l||"utf-16le"===l)){if(i.length<2||a.length<2)return-1;d=2,y/=2,v/=2,u/=2}function read(i,a){return 1===d?i[a]:i.readUInt16BE(a*d)}if(h){var m=-1;for(p=u;p<y;p++)if(read(i,p)===read(a,-1===m?0:p-m)){if(-1===m&&(m=p),p-m+1===v)return m*d}else-1!==m&&(p-=p-m),m=-1}else for(u+v>y&&(u=y-v),p=u;p>=0;p--){for(var g=!0,b=0;b<v;b++)if(read(i,p+b)!==read(a,b)){g=!1;break}if(g)return p}return-1}function hexWrite(i,a,u,l){u=Number(u)||0;var h=i.length-u;l?(l=Number(l))>h&&(l=h):l=h;var p=a.length;l>p/2&&(l=p/2);for(var d=0;d<l;++d){var y=parseInt(a.substr(2*d,2),16);if(numberIsNaN(y))return d;i[u+d]=y}return d}function utf8Write(i,a,u,l){return blitBuffer(utf8ToBytes(a,i.length-u),i,u,l)}function asciiWrite(i,a,u,l){return blitBuffer(function asciiToBytes(i){for(var a=[],u=0;u<i.length;++u)a.push(255&i.charCodeAt(u));return a}(a),i,u,l)}function latin1Write(i,a,u,l){return asciiWrite(i,a,u,l)}function base64Write(i,a,u,l){return blitBuffer(base64ToBytes(a),i,u,l)}function ucs2Write(i,a,u,l){return blitBuffer(function utf16leToBytes(i,a){for(var u,l,h,p=[],d=0;d<i.length&&!((a-=2)<0);++d)l=(u=i.charCodeAt(d))>>8,h=u%256,p.push(h),p.push(l);return p}(a,i.length-u),i,u,l)}function base64Slice(i,u,l){return 0===u&&l===i.length?a.fromByteArray(i):a.fromByteArray(i.slice(u,l))}function utf8Slice(i,a,u){u=Math.min(i.length,u);for(var l=[],h=a;h<u;){var d,y,v,m,g=i[h],b=null,w=g>239?4:g>223?3:g>191?2:1;if(h+w<=u)switch(w){case 1:g<128&&(b=g);break;case 2:128==(192&(d=i[h+1]))&&(m=(31&g)<<6|63&d)>127&&(b=m);break;case 3:d=i[h+1],y=i[h+2],128==(192&d)&&128==(192&y)&&(m=(15&g)<<12|(63&d)<<6|63&y)>2047&&(m<55296||m>57343)&&(b=m);break;case 4:d=i[h+1],y=i[h+2],v=i[h+3],128==(192&d)&&128==(192&y)&&128==(192&v)&&(m=(15&g)<<18|(63&d)<<12|(63&y)<<6|63&v)>65535&&m<1114112&&(b=m)}null===b?(b=65533,w=1):b>65535&&(b-=65536,l.push(b>>>10&1023|55296),b=56320|1023&b),l.push(b),h+=w}return function decodeCodePointsArray(i){var a=i.length;if(a<=p)return String.fromCharCode.apply(String,i);var u="",l=0;for(;l<a;)u+=String.fromCharCode.apply(String,i.slice(l,l+=p));return u}(l)}u.kMaxLength=h,Buffer.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{var i=new Uint8Array(1);return i.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===i.foo()}catch(i){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(i,a,u){return from(i,a,u)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(i,a,u){return function alloc(i,a,u){return assertSize(i),i<=0?createBuffer(i):void 0!==a?"string"==typeof u?createBuffer(i).fill(a,u):createBuffer(i).fill(a):createBuffer(i)}(i,a,u)},Buffer.allocUnsafe=function(i){return allocUnsafe(i)},Buffer.allocUnsafeSlow=function(i){return allocUnsafe(i)},Buffer.isBuffer=function isBuffer(i){return null!=i&&!0===i._isBuffer&&i!==Buffer.prototype},Buffer.compare=function compare(i,a){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),isInstance(a,Uint8Array)&&(a=Buffer.from(a,a.offset,a.byteLength)),!Buffer.isBuffer(i)||!Buffer.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===a)return 0;for(var u=i.length,l=a.length,h=0,p=Math.min(u,l);h<p;++h)if(i[h]!==a[h]){u=i[h],l=a[h];break}return u<l?-1:l<u?1:0},Buffer.isEncoding=function isEncoding(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(i,a){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return Buffer.alloc(0);var u;if(void 0===a)for(a=0,u=0;u<i.length;++u)a+=i[u].length;var l=Buffer.allocUnsafe(a),h=0;for(u=0;u<i.length;++u){var p=i[u];if(isInstance(p,Uint8Array)&&(p=Buffer.from(p)),!Buffer.isBuffer(p))throw new TypeError('"list" argument must be an Array of Buffers');p.copy(l,h),h+=p.length}return l},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var i=this.length;if(i%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<i;a+=2)swap(this,a,a+1);return this},Buffer.prototype.swap32=function swap32(){var i=this.length;if(i%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<i;a+=4)swap(this,a,a+3),swap(this,a+1,a+2);return this},Buffer.prototype.swap64=function swap64(){var i=this.length;if(i%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<i;a+=8)swap(this,a,a+7),swap(this,a+1,a+6),swap(this,a+2,a+5),swap(this,a+3,a+4);return this},Buffer.prototype.toString=function toString(){var i=this.length;return 0===i?"":0===arguments.length?utf8Slice(this,0,i):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function equals(i){if(!Buffer.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i||0===Buffer.compare(this,i)},Buffer.prototype.inspect=function inspect(){var i="",a=u.INSPECT_MAX_BYTES;return i=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(i+=" ... "),"<Buffer "+i+">"},Buffer.prototype.compare=function compare(i,a,u,l,h){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),!Buffer.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(void 0===a&&(a=0),void 0===u&&(u=i?i.length:0),void 0===l&&(l=0),void 0===h&&(h=this.length),a<0||u>i.length||l<0||h>this.length)throw new RangeError("out of range index");if(l>=h&&a>=u)return 0;if(l>=h)return-1;if(a>=u)return 1;if(this===i)return 0;for(var p=(h>>>=0)-(l>>>=0),d=(u>>>=0)-(a>>>=0),y=Math.min(p,d),v=this.slice(l,h),m=i.slice(a,u),g=0;g<y;++g)if(v[g]!==m[g]){p=v[g],d=m[g];break}return p<d?-1:d<p?1:0},Buffer.prototype.includes=function includes(i,a,u){return-1!==this.indexOf(i,a,u)},Buffer.prototype.indexOf=function indexOf(i,a,u){return bidirectionalIndexOf(this,i,a,u,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(i,a,u){return bidirectionalIndexOf(this,i,a,u,!1)},Buffer.prototype.write=function write(i,a,u,l){if(void 0===a)l="utf8",u=this.length,a=0;else if(void 0===u&&"string"==typeof a)l=a,u=this.length,a=0;else{if(!isFinite(a))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");a>>>=0,isFinite(u)?(u>>>=0,void 0===l&&(l="utf8")):(l=u,u=void 0)}var h=this.length-a;if((void 0===u||u>h)&&(u=h),i.length>0&&(u<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");l||(l="utf8");for(var p=!1;;)switch(l){case"hex":return hexWrite(this,i,a,u);case"utf8":case"utf-8":return utf8Write(this,i,a,u);case"ascii":return asciiWrite(this,i,a,u);case"latin1":case"binary":return latin1Write(this,i,a,u);case"base64":return base64Write(this,i,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,i,a,u);default:if(p)throw new TypeError("Unknown encoding: "+l);l=(""+l).toLowerCase(),p=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var p=4096;function asciiSlice(i,a,u){var l="";u=Math.min(i.length,u);for(var h=a;h<u;++h)l+=String.fromCharCode(127&i[h]);return l}function latin1Slice(i,a,u){var l="";u=Math.min(i.length,u);for(var h=a;h<u;++h)l+=String.fromCharCode(i[h]);return l}function hexSlice(i,a,u){var l=i.length;(!a||a<0)&&(a=0),(!u||u<0||u>l)&&(u=l);for(var h="",p=a;p<u;++p)h+=toHex(i[p]);return h}function utf16leSlice(i,a,u){for(var l=i.slice(a,u),h="",p=0;p<l.length;p+=2)h+=String.fromCharCode(l[p]+256*l[p+1]);return h}function checkOffset(i,a,u){if(i%1!=0||i<0)throw new RangeError("offset is not uint");if(i+a>u)throw new RangeError("Trying to access beyond buffer length")}function checkInt(i,a,u,l,h,p){if(!Buffer.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>h||a<p)throw new RangeError('"value" argument is out of bounds');if(u+l>i.length)throw new RangeError("Index out of range")}function checkIEEE754(i,a,u,l,h,p){if(u+l>i.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function writeFloat(i,a,u,h,p){return a=+a,u>>>=0,p||checkIEEE754(i,0,u,4),l.write(i,a,u,h,23,4),u+4}function writeDouble(i,a,u,h,p){return a=+a,u>>>=0,p||checkIEEE754(i,0,u,8),l.write(i,a,u,h,52,8),u+8}Buffer.prototype.slice=function slice(i,a){var u=this.length;(i=~~i)<0?(i+=u)<0&&(i=0):i>u&&(i=u),(a=void 0===a?u:~~a)<0?(a+=u)<0&&(a=0):a>u&&(a=u),a<i&&(a=i);var l=this.subarray(i,a);return l.__proto__=Buffer.prototype,l},Buffer.prototype.readUIntLE=function readUIntLE(i,a,u){i>>>=0,a>>>=0,u||checkOffset(i,a,this.length);for(var l=this[i],h=1,p=0;++p<a&&(h*=256);)l+=this[i+p]*h;return l},Buffer.prototype.readUIntBE=function readUIntBE(i,a,u){i>>>=0,a>>>=0,u||checkOffset(i,a,this.length);for(var l=this[i+--a],h=1;a>0&&(h*=256);)l+=this[i+--a]*h;return l},Buffer.prototype.readUInt8=function readUInt8(i,a){return i>>>=0,a||checkOffset(i,1,this.length),this[i]},Buffer.prototype.readUInt16LE=function readUInt16LE(i,a){return i>>>=0,a||checkOffset(i,2,this.length),this[i]|this[i+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(i,a){return i>>>=0,a||checkOffset(i,2,this.length),this[i]<<8|this[i+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(i,a){return i>>>=0,a||checkOffset(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(i,a){return i>>>=0,a||checkOffset(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},Buffer.prototype.readIntLE=function readIntLE(i,a,u){i>>>=0,a>>>=0,u||checkOffset(i,a,this.length);for(var l=this[i],h=1,p=0;++p<a&&(h*=256);)l+=this[i+p]*h;return l>=(h*=128)&&(l-=Math.pow(2,8*a)),l},Buffer.prototype.readIntBE=function readIntBE(i,a,u){i>>>=0,a>>>=0,u||checkOffset(i,a,this.length);for(var l=a,h=1,p=this[i+--l];l>0&&(h*=256);)p+=this[i+--l]*h;return p>=(h*=128)&&(p-=Math.pow(2,8*a)),p},Buffer.prototype.readInt8=function readInt8(i,a){return i>>>=0,a||checkOffset(i,1,this.length),128&this[i]?-1*(255-this[i]+1):this[i]},Buffer.prototype.readInt16LE=function readInt16LE(i,a){i>>>=0,a||checkOffset(i,2,this.length);var u=this[i]|this[i+1]<<8;return 32768&u?4294901760|u:u},Buffer.prototype.readInt16BE=function readInt16BE(i,a){i>>>=0,a||checkOffset(i,2,this.length);var u=this[i+1]|this[i]<<8;return 32768&u?4294901760|u:u},Buffer.prototype.readInt32LE=function readInt32LE(i,a){return i>>>=0,a||checkOffset(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(i,a){return i>>>=0,a||checkOffset(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},Buffer.prototype.readFloatLE=function readFloatLE(i,a){return i>>>=0,a||checkOffset(i,4,this.length),l.read(this,i,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(i,a){return i>>>=0,a||checkOffset(i,4,this.length),l.read(this,i,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(i,a){return i>>>=0,a||checkOffset(i,8,this.length),l.read(this,i,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(i,a){return i>>>=0,a||checkOffset(i,8,this.length),l.read(this,i,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(i,a,u,l){(i=+i,a>>>=0,u>>>=0,l)||checkInt(this,i,a,u,Math.pow(2,8*u)-1,0);var h=1,p=0;for(this[a]=255&i;++p<u&&(h*=256);)this[a+p]=i/h&255;return a+u},Buffer.prototype.writeUIntBE=function writeUIntBE(i,a,u,l){(i=+i,a>>>=0,u>>>=0,l)||checkInt(this,i,a,u,Math.pow(2,8*u)-1,0);var h=u-1,p=1;for(this[a+h]=255&i;--h>=0&&(p*=256);)this[a+h]=i/p&255;return a+u},Buffer.prototype.writeUInt8=function writeUInt8(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,1,255,0),this[a]=255&i,a+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,2,65535,0),this[a]=255&i,this[a+1]=i>>>8,a+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,2,65535,0),this[a]=i>>>8,this[a+1]=255&i,a+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,4,4294967295,0),this[a+3]=i>>>24,this[a+2]=i>>>16,this[a+1]=i>>>8,this[a]=255&i,a+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,4,4294967295,0),this[a]=i>>>24,this[a+1]=i>>>16,this[a+2]=i>>>8,this[a+3]=255&i,a+4},Buffer.prototype.writeIntLE=function writeIntLE(i,a,u,l){if(i=+i,a>>>=0,!l){var h=Math.pow(2,8*u-1);checkInt(this,i,a,u,h-1,-h)}var p=0,d=1,y=0;for(this[a]=255&i;++p<u&&(d*=256);)i<0&&0===y&&0!==this[a+p-1]&&(y=1),this[a+p]=(i/d>>0)-y&255;return a+u},Buffer.prototype.writeIntBE=function writeIntBE(i,a,u,l){if(i=+i,a>>>=0,!l){var h=Math.pow(2,8*u-1);checkInt(this,i,a,u,h-1,-h)}var p=u-1,d=1,y=0;for(this[a+p]=255&i;--p>=0&&(d*=256);)i<0&&0===y&&0!==this[a+p+1]&&(y=1),this[a+p]=(i/d>>0)-y&255;return a+u},Buffer.prototype.writeInt8=function writeInt8(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,1,127,-128),i<0&&(i=255+i+1),this[a]=255&i,a+1},Buffer.prototype.writeInt16LE=function writeInt16LE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,2,32767,-32768),this[a]=255&i,this[a+1]=i>>>8,a+2},Buffer.prototype.writeInt16BE=function writeInt16BE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,2,32767,-32768),this[a]=i>>>8,this[a+1]=255&i,a+2},Buffer.prototype.writeInt32LE=function writeInt32LE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,4,2147483647,-2147483648),this[a]=255&i,this[a+1]=i>>>8,this[a+2]=i>>>16,this[a+3]=i>>>24,a+4},Buffer.prototype.writeInt32BE=function writeInt32BE(i,a,u){return i=+i,a>>>=0,u||checkInt(this,i,a,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[a]=i>>>24,this[a+1]=i>>>16,this[a+2]=i>>>8,this[a+3]=255&i,a+4},Buffer.prototype.writeFloatLE=function writeFloatLE(i,a,u){return writeFloat(this,i,a,!0,u)},Buffer.prototype.writeFloatBE=function writeFloatBE(i,a,u){return writeFloat(this,i,a,!1,u)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(i,a,u){return writeDouble(this,i,a,!0,u)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(i,a,u){return writeDouble(this,i,a,!1,u)},Buffer.prototype.copy=function copy(i,a,u,l){if(!Buffer.isBuffer(i))throw new TypeError("argument should be a Buffer");if(u||(u=0),l||0===l||(l=this.length),a>=i.length&&(a=i.length),a||(a=0),l>0&&l<u&&(l=u),l===u)return 0;if(0===i.length||0===this.length)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("sourceEnd out of bounds");l>this.length&&(l=this.length),i.length-a<l-u&&(l=i.length-a+u);var h=l-u;if(this===i&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(a,u,l);else if(this===i&&u<a&&a<l)for(var p=h-1;p>=0;--p)i[p+a]=this[p+u];else Uint8Array.prototype.set.call(i,this.subarray(u,l),a);return h},Buffer.prototype.fill=function fill(i,a,u,l){if("string"==typeof i){if("string"==typeof a?(l=a,a=0,u=this.length):"string"==typeof u&&(l=u,u=this.length),void 0!==l&&"string"!=typeof l)throw new TypeError("encoding must be a string");if("string"==typeof l&&!Buffer.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(1===i.length){var h=i.charCodeAt(0);("utf8"===l&&h<128||"latin1"===l)&&(i=h)}}else"number"==typeof i&&(i&=255);if(a<0||this.length<a||this.length<u)throw new RangeError("Out of range index");if(u<=a)return this;var p;if(a>>>=0,u=void 0===u?this.length:u>>>0,i||(i=0),"number"==typeof i)for(p=a;p<u;++p)this[p]=i;else{var d=Buffer.isBuffer(i)?i:Buffer.from(i,l),y=d.length;if(0===y)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(p=0;p<u-a;++p)this[p+a]=d[p%y]}return this};var d=/[^+/0-9A-Za-z-_]/g;function toHex(i){return i<16?"0"+i.toString(16):i.toString(16)}function utf8ToBytes(i,a){var u;a=a||1/0;for(var l=i.length,h=null,p=[],d=0;d<l;++d){if((u=i.charCodeAt(d))>55295&&u<57344){if(!h){if(u>56319){(a-=3)>-1&&p.push(239,191,189);continue}if(d+1===l){(a-=3)>-1&&p.push(239,191,189);continue}h=u;continue}if(u<56320){(a-=3)>-1&&p.push(239,191,189),h=u;continue}u=65536+(h-55296<<10|u-56320)}else h&&(a-=3)>-1&&p.push(239,191,189);if(h=null,u<128){if((a-=1)<0)break;p.push(u)}else if(u<2048){if((a-=2)<0)break;p.push(u>>6|192,63&u|128)}else if(u<65536){if((a-=3)<0)break;p.push(u>>12|224,u>>6&63|128,63&u|128)}else{if(!(u<1114112))throw new Error("Invalid code point");if((a-=4)<0)break;p.push(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}}return p}function base64ToBytes(i){return a.toByteArray(function base64clean(i){if((i=(i=i.split("=")[0]).trim().replace(d,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}(i))}function blitBuffer(i,a,u,l){for(var h=0;h<l&&!(h+u>=a.length||h>=i.length);++h)a[h+u]=i[h];return h}function isInstance(i,a){return i instanceof a||null!=i&&null!=i.constructor&&null!=i.constructor.name&&i.constructor.name===a.name}function numberIsNaN(i){return i!=i}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":12,buffer:13,ieee754:16}],14:[function(i,a,u){(function(l,h,p){(function(){!function(l,h){"object"==typeof u&&void 0!==a?h(u,i("dexie")):"function"==typeof define&&define.amd?define(["exports","dexie"],h):h(l.DexieExportImport={},l.Dexie)}(this,(function(i,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function __awaiter(i,a,u,l){return new(u||(u=Promise))((function(h,p){function fulfilled(i){try{step(l.next(i))}catch(i){p(i)}}function rejected(i){try{step(l.throw(i))}catch(i){p(i)}}function step(i){i.done?h(i.value):new u((function(a){a(i.value)})).then(fulfilled,rejected)}step((l=l.apply(i,a||[])).next())}))}function __generator(i,a){var u,l,h,p,d={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return p={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function verb(p){return function(y){return function step(p){if(u)throw new TypeError("Generator is already executing.");for(;d;)try{if(u=1,l&&(h=2&p[0]?l.return:p[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,p[1])).done)return h;switch(l=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return d.label++,{value:p[1],done:!1};case 5:d.label++,l=p[1],p=[0];continue;case 7:p=d.ops.pop(),d.trys.pop();continue;default:if(!(h=d.trys,(h=h.length>0&&h[h.length-1])||6!==p[0]&&2!==p[0])){d=0;continue}if(3===p[0]&&(!h||p[1]>h[0]&&p[1]<h[3])){d.label=p[1];break}if(6===p[0]&&d.label<h[1]){d.label=h[1],h=p;break}if(h&&d.label<h[2]){d.label=h[2],d.ops.push(p);break}h[2]&&d.ops.pop(),d.trys.pop();continue}p=a.call(i,d)}catch(i){p=[6,i],l=0}finally{u=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,y])}}}function getSchemaString(i){return[i.schema.primKey].concat(i.schema.indexes).map((function(i){return i.src})).join(",")}function readBlobAsync(i,a){return new Promise((function(u,l){var h=new FileReader;h.onabort=function(i){return l(new Error("file read aborted"))},h.onerror=function(i){return l(i.target.error)},h.onload=function(i){return u(i.target.result)},"binary"===a?h.readAsArrayBuffer(i):h.readAsText(i)}))}function readBlobSync(i,a){if("undefined"==typeof FileReaderSync)throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var u=new FileReaderSync;return"binary"===a?u.readAsArrayBuffer(i):u.readAsText(i)}a=a&&a.hasOwnProperty("default")?a.default:a;var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==h?h:"undefined"!=typeof self?self:{};function createCommonjsModule(i,a){return i(a={exports:{}},a.exports),a.exports}for(var d=createCommonjsModule((function(i,a){i.exports=function(){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n=function(i,a){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return function sliceIterator(i,a){var u=[],l=!0,h=!1,p=void 0;try{for(var d,y=i[Symbol.iterator]();!(l=(d=y.next()).done)&&(u.push(d.value),!a||u.length!==a);l=!0);}catch(i){h=!0,p=i}finally{try{!l&&y.return&&y.return()}finally{if(h)throw p}}return u}(i,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")},t=function(i){if(Array.isArray(i)){for(var a=0,u=Array(i.length);a<i.length;a++)u[a]=i[a];return u}return Array.from(i)},a=Object.keys,u=Array.isArray,l={}.toString,h=Object.getPrototypeOf,p={}.hasOwnProperty,d=p.toString,y=["type","replaced","iterateIn","iterateUnsetNumeric"];function isThenable(i,a){return Typeson.isObject(i)&&"function"==typeof i.then&&(!a||"function"==typeof i.catch)}function toStringTag(i){return l.call(i).slice(8,-1)}function hasConstructorOf(a,u){if(!a||"object"!==(void 0===a?"undefined":i(a)))return!1;var l=h(a);if(!l)return!1;var y=p.call(l,"constructor")&&l.constructor;return"function"!=typeof y?null===u:"function"==typeof y&&null!==u&&d.call(y)===d.call(u)}function isPlainObject(i){return!(!i||"Object"!==toStringTag(i))&&(!h(i)||hasConstructorOf(i,Object))}function isObject(a){return a&&"object"===(void 0===a?"undefined":i(a))}function Typeson(l){var h=[],p=[],d={},v=this.types={},m=this.stringify=function(i,a,h,p){p=Object.assign({},l,p,{stringification:!0});var d=b(i,null,p);return u(d)?JSON.stringify(d[0],a,h):d.then((function(i){return JSON.stringify(i,a,h)}))};this.stringifySync=function(i,a,u,l){return m(i,a,u,Object.assign({},{throwOnBadSyncType:!0},l,{sync:!0}))},this.stringifyAsync=function(i,a,u,l){return m(i,a,u,Object.assign({},{throwOnBadSyncType:!0},l,{sync:!1}))};var g=this.parse=function(i,a,u){return u=Object.assign({},l,u,{parse:!0}),w(JSON.parse(i,a),u)};this.parseSync=function(i,a,u){return g(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!0}))},this.parseAsync=function(i,a,u){return g(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!1}))},this.specialTypeNames=function(i,a){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.returnTypeNames=!0,this.encapsulate(i,a,u)},this.rootTypeName=function(i,a){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.iterateNone=!0,this.encapsulate(i,a,u)};var b=this.encapsulate=function(v,m,g){var b=(g=Object.assign({sync:!0},l,g)).sync,w={},_=[],x=[],T=[],E=!(g&&"cyclic"in g)||g.cyclic,O=g.encapsulateObserver,P=_encapsulate("",v,E,m||{},T);function finish(i){var a=Object.values(w);if(g.iterateNone)return a.length?a[0]:Typeson.getJSONType(i);if(a.length){if(g.returnTypeNames)return[].concat(t(new Set(a)));i&&isPlainObject(i)&&!i.hasOwnProperty("$types")?i.$types=w:i={$:i,$types:{$:w}}}else isObject(i)&&i.hasOwnProperty("$types")&&(i={$:i,$types:!0});return!g.returnTypeNames&&i}return T.length?b&&g.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function checkPromises(i,a){return Promise.all(a.map((function(i){return i[1].p}))).then((function(u){return Promise.all(u.map((function(u){var l=[],h=a.splice(0,1)[0],p=n(h,7),d=p[0],y=p[2],v=p[3],m=p[4],g=p[5],b=p[6],w=_encapsulate(d,u,y,v,l,!0,b),_=hasConstructorOf(w,TypesonPromise);return d&&_?w.p.then((function(a){return m[g]=a,checkPromises(i,l)})):(d?m[g]=w:i=_?w.p:w,checkPromises(i,l))})))})).then((function(){return i}))}(P,T)).then(finish):!b&&g.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():g.stringification&&b?[finish(P)]:b?finish(P):Promise.resolve(finish(P));function _adaptBuiltinStateObjectProperties(i,a,u){Object.assign(i,a);var l=y.map((function(a){var u=i[a];return delete i[a],u}));u(),y.forEach((function(a,u){i[a]=l[u]}))}function _encapsulate(l,p,d,y,v,m,b){var T=void 0,E={},P=void 0===p?"undefined":i(p),A=O?function(i){var a=b||y.type||Typeson.getJSONType(p);O(Object.assign(i||E,{keypath:l,value:p,cyclic:d,stateObj:y,promisesData:v,resolvingTypesonPromise:m,awaitingTypesonPromise:hasConstructorOf(p,TypesonPromise)},void 0!==a?{type:a}:{}))}:null;if(P in{string:1,boolean:1,number:1,undefined:1})return void 0===p||"number"===P&&(isNaN(p)||p===-1/0||p===1/0)?(T=replace(l,p,y,v,!1,m,A))!==p&&(E={replaced:T}):T=p,A&&A(),T;if(null===p)return A&&A(),p;if(d&&!y.iterateIn&&!y.iterateUnsetNumeric){var k=_.indexOf(p);if(!(k<0))return w[l]="#",A&&A({cyclicKeypath:x[k]}),"#"+x[k];!0===d&&(_.push(p),x.push(l))}var S=isPlainObject(p),B=u(p),C=(S||B)&&(!h.length||y.replaced)||y.iterateIn?p:replace(l,p,y,v,S||B,null,A),j=void 0;if(C!==p?(T=C,E={replaced:C}):B||"array"===y.iterateIn?(j=new Array(p.length),E={clone:j}):S||"object"===y.iterateIn?E={clone:j={}}:""===l&&hasConstructorOf(p,TypesonPromise)?(v.push([l,p,d,y,void 0,void 0,y.type]),T=p):T=p,A&&A(),g.iterateNone)return j||T;if(!j)return T;if(y.iterateIn){var I=function _loop(i){var a={ownKeys:p.hasOwnProperty(i)};_adaptBuiltinStateObjectProperties(y,a,(function(){var a=l+(l?".":"")+escapeKeyPathComponent(i),u=_encapsulate(a,p[i],!!d,y,v,m);hasConstructorOf(u,TypesonPromise)?v.push([a,u,!!d,y,j,i,y.type]):void 0!==u&&(j[i]=u)}))};for(var D in p)I(D);A&&A({endIterateIn:!0,end:!0})}else a(p).forEach((function(i){var a=l+(l?".":"")+escapeKeyPathComponent(i);_adaptBuiltinStateObjectProperties(y,{ownKeys:!0},(function(){var u=_encapsulate(a,p[i],!!d,y,v,m);hasConstructorOf(u,TypesonPromise)?v.push([a,u,!!d,y,j,i,y.type]):void 0!==u&&(j[i]=u)}))})),A&&A({endIterateOwn:!0,end:!0});if(y.iterateUnsetNumeric){for(var N=p.length,K=function _loop2(i){if(!(i in p)){var a=l+(l?".":"")+i;_adaptBuiltinStateObjectProperties(y,{ownKeys:!1},(function(){var u=_encapsulate(a,void 0,!!d,y,v,m);hasConstructorOf(u,TypesonPromise)?v.push([a,u,!!d,y,j,i,y.type]):void 0!==u&&(j[i]=u)}))}},L=0;L<N;L++)K(L);A&&A({endIterateUnsetNumeric:!0,end:!0})}return j}function replace(i,a,u,l,y,v,m){for(var g=y?h:p,_=g.length;_--;){var x=g[_];if(x.test(a,u)){var T=x.type;if(d[T]){var O=w[i];w[i]=O?[T].concat(O):T}return Object.assign(u,{type:T,replaced:!0}),!b&&x.replaceAsync||x.replace?(m&&m({replacing:!0}),_encapsulate(i,x[b||!x.replaceAsync?"replace":"replaceAsync"](a,u),E&&"readonly",u,l,v,T)):(m&&m({typeDetected:!0}),_encapsulate(i,a,E&&"readonly",u,l,v,T))}}return a}};this.encapsulateSync=function(i,a,u){return b(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!0}))},this.encapsulateAsync=function(i,a,u){return b(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!1}))};var w=this.revive=function(i,h){var p=(h=Object.assign({sync:!0},l,h)).sync,y=i&&i.$types,v=!0;if(!y)return i;if(!0===y)return i.$;y.$&&isPlainObject(y.$)&&(i=i.$,y=y.$,v=!1);var m=[],g={},b=function _revive(i,l,h,p,b,w){if(!v||"$types"!==i){var _=y[i];if(u(l)||isPlainObject(l)){var x=u(l)?new Array(l.length):{};for(a(l).forEach((function(a){var u=_revive(i+(i?".":"")+escapeKeyPathComponent(a),l[a],h||x,p,x,a);hasConstructorOf(u,Undefined)?x[a]=void 0:void 0!==u&&(x[a]=u)})),l=x;m.length;){var T=n(m[0],4),E=T[0],O=T[1],P=T[2],A=T[3],k=getByKeyPath(E,O);if(hasConstructorOf(k,Undefined))P[A]=void 0;else{if(void 0===k)break;P[A]=k}m.splice(0,1)}}if(!_)return l;if("#"===_){var S=getByKeyPath(h,l.substr(1));return void 0===S&&m.push([h,l.substr(1),b,w]),S}var B=p.sync;return[].concat(_).reduce((function(i,a){var u=d[a];if(!u)throw new Error("Unregistered type: "+a);return u[B&&u.revive?"revive":!B&&u.reviveAsync?"reviveAsync":"revive"](i,g)}),l)}}("",i,null,h);return isThenable(b=hasConstructorOf(b,Undefined)?void 0:b)?p&&h.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():b:!p&&h.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():p?b:Promise.resolve(b)};this.reviveSync=function(i,a){return w(i,Object.assign({},{throwOnBadSyncType:!0},a,{sync:!0}))},this.reviveAsync=function(i,a){return w(i,Object.assign({},{throwOnBadSyncType:!0},a,{sync:!1}))},this.register=function(i,l){return l=l||{},[].concat(i).forEach((function R(i){if(u(i))return i.map(R);i&&a(i).forEach((function(a){if("#"===a)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(Typeson.JSON_TYPES.includes(a))throw new TypeError("Plain JSON object types are reserved as type names");var y=i[a],m=y.testPlainObjects?h:p,g=m.filter((function(i){return i.type===a}));if(g.length&&(m.splice(m.indexOf(g[0]),1),delete d[a],delete v[a]),y){if("function"==typeof y){var b=y;y={test:function test(i){return i&&i.constructor===b},replace:function replace(i){return assign({},i)},revive:function revive(i){return assign(Object.create(b.prototype),i)}}}else u(y)&&(y={test:y[0],replace:y[1],revive:y[2]});var w={type:a,test:y.test.bind(y)};y.replace&&(w.replace=y.replace.bind(y)),y.replaceAsync&&(w.replaceAsync=y.replaceAsync.bind(y));var _="number"==typeof l.fallback?l.fallback:l.fallback?0:1/0;if(y.testPlainObjects?h.splice(_,0,w):p.splice(_,0,w),y.revive||y.reviveAsync){var x={};y.revive&&(x.revive=y.revive.bind(y)),y.reviveAsync&&(x.reviveAsync=y.reviveAsync.bind(y)),d[a]=x}v[a]=y}}))})),this}}function assign(i,u){return a(u).map((function(a){i[a]=u[a]})),i}function escapeKeyPathComponent(i){return i.replace(/~/g,"~0").replace(/\./g,"~1")}function unescapeKeyPathComponent(i){return i.replace(/~1/g,".").replace(/~0/g,"~")}function getByKeyPath(i,a){if(""===a)return i;var u=a.indexOf(".");if(u>-1){var l=i[unescapeKeyPathComponent(a.substr(0,u))];return void 0===l?void 0:getByKeyPath(l,a.substr(u+1))}return i[unescapeKeyPathComponent(a)]}function Undefined(){}function TypesonPromise(i){this.p=new Promise(i)}return TypesonPromise.prototype.then=function(i,a){var u=this;return new TypesonPromise((function(l,h){u.p.then((function(a){l(i?i(a):a)}),(function(i){u.p.catch((function(i){return a?a(i):Promise.reject(i)})).then(l,h)}))}))},TypesonPromise.prototype.catch=function(i){return this.then(null,i)},TypesonPromise.resolve=function(i){return new TypesonPromise((function(a){a(i)}))},TypesonPromise.reject=function(i){return new TypesonPromise((function(a,u){u(i)}))},["all","race"].map((function(i){TypesonPromise[i]=function(a){return new TypesonPromise((function(u,l){Promise[i](a.map((function(i){return i.p}))).then(u,l)}))}})),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(i){if(!i||"Object"!==toStringTag(i))return!1;var a=h(i);return!a||hasConstructorOf(i,Object)||isUserObject(a)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(a){return null===a?"null":u(a)?"array":void 0===a?"undefined":i(a)},Typeson.JSON_TYPES=["null","boolean","number","string","array","object"],Typeson}()})),y=createCommonjsModule((function(i,a){i.exports=function(){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t=function(i,a){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return function sliceIterator(i,a){var u=[],l=!0,h=!1,p=void 0;try{for(var d,y=i[Symbol.iterator]();!(l=(d=y.next()).done)&&(u.push(d.value),!a||u.length!==a);l=!0);}catch(i){h=!0,p=i}finally{try{!l&&y.return&&y.return()}finally{if(h)throw p}}return u}(i,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(i){if(Array.isArray(i)){for(var a=0,u=Array(i.length);a<i.length;a++)u[a]=i[a];return u}return Array.from(i)},a=Object.keys,l=Array.isArray,h={}.toString,p=Object.getPrototypeOf,d={}.hasOwnProperty,y=d.toString,v=["type","replaced","iterateIn","iterateUnsetNumeric"];function isThenable(i,a){return Typeson.isObject(i)&&"function"==typeof i.then&&(!a||"function"==typeof i.catch)}function toStringTag(i){return h.call(i).slice(8,-1)}function hasConstructorOf(a,u){if(!a||"object"!==(void 0===a?"undefined":i(a)))return!1;var l=p(a);if(!l)return!1;var h=d.call(l,"constructor")&&l.constructor;return"function"!=typeof h?null===u:"function"==typeof h&&null!==u&&y.call(h)===y.call(u)}function isPlainObject(i){return!(!i||"Object"!==toStringTag(i))&&(!p(i)||hasConstructorOf(i,Object))}function isObject(a){return a&&"object"===(void 0===a?"undefined":i(a))}function Typeson(u){var h=[],p=[],d={},y=this.types={},m=this.stringify=function(i,a,h,p){p=Object.assign({},u,p,{stringification:!0});var d=b(i,null,p);return l(d)?JSON.stringify(d[0],a,h):d.then((function(i){return JSON.stringify(i,a,h)}))};this.stringifySync=function(i,a,u,l){return m(i,a,u,Object.assign({},{throwOnBadSyncType:!0},l,{sync:!0}))},this.stringifyAsync=function(i,a,u,l){return m(i,a,u,Object.assign({},{throwOnBadSyncType:!0},l,{sync:!1}))};var g=this.parse=function(i,a,l){return l=Object.assign({},u,l,{parse:!0}),w(JSON.parse(i,a),l)};this.parseSync=function(i,a,u){return g(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!0}))},this.parseAsync=function(i,a,u){return g(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!1}))},this.specialTypeNames=function(i,a){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.returnTypeNames=!0,this.encapsulate(i,a,u)},this.rootTypeName=function(i,a){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.iterateNone=!0,this.encapsulate(i,a,u)};var b=this.encapsulate=function(y,m,g){var b=(g=Object.assign({sync:!0},u,g)).sync,w={},_=[],x=[],T=[],E=!(g&&"cyclic"in g)||g.cyclic,O=g.encapsulateObserver,P=_encapsulate("",y,E,m||{},T);function finish(i){var a=Object.values(w);if(g.iterateNone)return a.length?a[0]:Typeson.getJSONType(i);if(a.length){if(g.returnTypeNames)return[].concat(n(new Set(a)));i&&isPlainObject(i)&&!i.hasOwnProperty("$types")?i.$types=w:i={$:i,$types:{$:w}}}else isObject(i)&&i.hasOwnProperty("$types")&&(i={$:i,$types:!0});return!g.returnTypeNames&&i}return T.length?b&&g.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function checkPromises(i,a){return Promise.all(a.map((function(i){return i[1].p}))).then((function(u){return Promise.all(u.map((function(u){var l=[],h=a.splice(0,1)[0],p=t(h,7),d=p[0],y=p[2],v=p[3],m=p[4],g=p[5],b=p[6],w=_encapsulate(d,u,y,v,l,!0,b),_=hasConstructorOf(w,TypesonPromise);return d&&_?w.p.then((function(a){return m[g]=a,checkPromises(i,l)})):(d?m[g]=w:i=_?w.p:w,checkPromises(i,l))})))})).then((function(){return i}))}(P,T)).then(finish):!b&&g.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():g.stringification&&b?[finish(P)]:b?finish(P):Promise.resolve(finish(P));function _adaptBuiltinStateObjectProperties(i,a,u){Object.assign(i,a);var l=v.map((function(a){var u=i[a];return delete i[a],u}));u(),v.forEach((function(a,u){i[a]=l[u]}))}function _encapsulate(u,p,d,y,v,m,b){var T=void 0,E={},P=void 0===p?"undefined":i(p),A=O?function(i){var a=b||y.type||Typeson.getJSONType(p);O(Object.assign(i||E,{keypath:u,value:p,cyclic:d,stateObj:y,promisesData:v,resolvingTypesonPromise:m,awaitingTypesonPromise:hasConstructorOf(p,TypesonPromise)},void 0!==a?{type:a}:{}))}:null;if(P in{string:1,boolean:1,number:1,undefined:1})return void 0===p||"number"===P&&(isNaN(p)||p===-1/0||p===1/0)?(T=replace(u,p,y,v,!1,m,A))!==p&&(E={replaced:T}):T=p,A&&A(),T;if(null===p)return A&&A(),p;if(d&&!y.iterateIn&&!y.iterateUnsetNumeric){var k=_.indexOf(p);if(!(k<0))return w[u]="#",A&&A({cyclicKeypath:x[k]}),"#"+x[k];!0===d&&(_.push(p),x.push(u))}var S=isPlainObject(p),B=l(p),C=(S||B)&&(!h.length||y.replaced)||y.iterateIn?p:replace(u,p,y,v,S||B,null,A),j=void 0;if(C!==p?(T=C,E={replaced:C}):B||"array"===y.iterateIn?(j=new Array(p.length),E={clone:j}):S||"object"===y.iterateIn?E={clone:j={}}:""===u&&hasConstructorOf(p,TypesonPromise)?(v.push([u,p,d,y,void 0,void 0,y.type]),T=p):T=p,A&&A(),g.iterateNone)return j||T;if(!j)return T;if(y.iterateIn){var I=function _loop(i){var a={ownKeys:p.hasOwnProperty(i)};_adaptBuiltinStateObjectProperties(y,a,(function(){var a=u+(u?".":"")+escapeKeyPathComponent(i),l=_encapsulate(a,p[i],!!d,y,v,m);hasConstructorOf(l,TypesonPromise)?v.push([a,l,!!d,y,j,i,y.type]):void 0!==l&&(j[i]=l)}))};for(var D in p)I(D);A&&A({endIterateIn:!0,end:!0})}else a(p).forEach((function(i){var a=u+(u?".":"")+escapeKeyPathComponent(i);_adaptBuiltinStateObjectProperties(y,{ownKeys:!0},(function(){var u=_encapsulate(a,p[i],!!d,y,v,m);hasConstructorOf(u,TypesonPromise)?v.push([a,u,!!d,y,j,i,y.type]):void 0!==u&&(j[i]=u)}))})),A&&A({endIterateOwn:!0,end:!0});if(y.iterateUnsetNumeric){for(var N=p.length,K=function _loop2(i){if(!(i in p)){var a=u+(u?".":"")+i;_adaptBuiltinStateObjectProperties(y,{ownKeys:!1},(function(){var u=_encapsulate(a,void 0,!!d,y,v,m);hasConstructorOf(u,TypesonPromise)?v.push([a,u,!!d,y,j,i,y.type]):void 0!==u&&(j[i]=u)}))}},L=0;L<N;L++)K(L);A&&A({endIterateUnsetNumeric:!0,end:!0})}return j}function replace(i,a,u,l,y,v,m){for(var g=y?h:p,_=g.length;_--;){var x=g[_];if(x.test(a,u)){var T=x.type;if(d[T]){var O=w[i];w[i]=O?[T].concat(O):T}return Object.assign(u,{type:T,replaced:!0}),!b&&x.replaceAsync||x.replace?(m&&m({replacing:!0}),_encapsulate(i,x[b||!x.replaceAsync?"replace":"replaceAsync"](a,u),E&&"readonly",u,l,v,T)):(m&&m({typeDetected:!0}),_encapsulate(i,a,E&&"readonly",u,l,v,T))}}return a}};this.encapsulateSync=function(i,a,u){return b(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!0}))},this.encapsulateAsync=function(i,a,u){return b(i,a,Object.assign({},{throwOnBadSyncType:!0},u,{sync:!1}))};var w=this.revive=function(i,h){var p=(h=Object.assign({sync:!0},u,h)).sync,y=i&&i.$types,v=!0;if(!y)return i;if(!0===y)return i.$;y.$&&isPlainObject(y.$)&&(i=i.$,y=y.$,v=!1);var m=[],g={},b=function _revive(i,u,h,p,b,w){if(!v||"$types"!==i){var _=y[i];if(l(u)||isPlainObject(u)){var x=l(u)?new Array(u.length):{};for(a(u).forEach((function(a){var l=_revive(i+(i?".":"")+escapeKeyPathComponent(a),u[a],h||x,p,x,a);hasConstructorOf(l,Undefined)?x[a]=void 0:void 0!==l&&(x[a]=l)})),u=x;m.length;){var T=t(m[0],4),E=T[0],O=T[1],P=T[2],A=T[3],k=getByKeyPath(E,O);if(hasConstructorOf(k,Undefined))P[A]=void 0;else{if(void 0===k)break;P[A]=k}m.splice(0,1)}}if(!_)return u;if("#"===_){var S=getByKeyPath(h,u.substr(1));return void 0===S&&m.push([h,u.substr(1),b,w]),S}var B=p.sync;return[].concat(_).reduce((function(i,a){var u=d[a];if(!u)throw new Error("Unregistered type: "+a);return u[B&&u.revive?"revive":!B&&u.reviveAsync?"reviveAsync":"revive"](i,g)}),u)}}("",i,null,h);return isThenable(b=hasConstructorOf(b,Undefined)?void 0:b)?p&&h.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():b:!p&&h.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():p?b:Promise.resolve(b)};this.reviveSync=function(i,a){return w(i,Object.assign({},{throwOnBadSyncType:!0},a,{sync:!0}))},this.reviveAsync=function(i,a){return w(i,Object.assign({},{throwOnBadSyncType:!0},a,{sync:!1}))},this.register=function(i,u){return u=u||{},[].concat(i).forEach((function R(i){if(l(i))return i.map(R);i&&a(i).forEach((function(a){if("#"===a)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(Typeson.JSON_TYPES.includes(a))throw new TypeError("Plain JSON object types are reserved as type names");var v=i[a],m=v.testPlainObjects?h:p,g=m.filter((function(i){return i.type===a}));if(g.length&&(m.splice(m.indexOf(g[0]),1),delete d[a],delete y[a]),v){if("function"==typeof v){var b=v;v={test:function test(i){return i&&i.constructor===b},replace:function replace(i){return assign({},i)},revive:function revive(i){return assign(Object.create(b.prototype),i)}}}else l(v)&&(v={test:v[0],replace:v[1],revive:v[2]});var w={type:a,test:v.test.bind(v)};v.replace&&(w.replace=v.replace.bind(v)),v.replaceAsync&&(w.replaceAsync=v.replaceAsync.bind(v));var _="number"==typeof u.fallback?u.fallback:u.fallback?0:1/0;if(v.testPlainObjects?h.splice(_,0,w):p.splice(_,0,w),v.revive||v.reviveAsync){var x={};v.revive&&(x.revive=v.revive.bind(v)),v.reviveAsync&&(x.reviveAsync=v.reviveAsync.bind(v)),d[a]=x}y[a]=v}}))})),this}}function assign(i,u){return a(u).map((function(a){i[a]=u[a]})),i}function escapeKeyPathComponent(i){return i.replace(/~/g,"~0").replace(/\./g,"~1")}function unescapeKeyPathComponent(i){return i.replace(/~1/g,".").replace(/~0/g,"~")}function getByKeyPath(i,a){if(""===a)return i;var u=a.indexOf(".");if(u>-1){var l=i[unescapeKeyPathComponent(a.substr(0,u))];return void 0===l?void 0:getByKeyPath(l,a.substr(u+1))}return i[unescapeKeyPathComponent(a)]}function Undefined(){}function TypesonPromise(i){this.p=new Promise(i)}TypesonPromise.prototype.then=function(i,a){var u=this;return new TypesonPromise((function(l,h){u.p.then((function(a){l(i?i(a):a)}),(function(i){u.p.catch((function(i){return a?a(i):Promise.reject(i)})).then(l,h)}))}))},TypesonPromise.prototype.catch=function(i){return this.then(null,i)},TypesonPromise.resolve=function(i){return new TypesonPromise((function(a){a(i)}))},TypesonPromise.reject=function(i){return new TypesonPromise((function(a,u){u(i)}))},["all","race"].map((function(i){TypesonPromise[i]=function(a){return new TypesonPromise((function(u,l){Promise[i](a.map((function(i){return i.p}))).then(u,l)}))}})),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(i){if(!i||"Object"!==toStringTag(i))return!1;var a=p(i);return!a||hasConstructorOf(i,Object)||isUserObject(a)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(a){return null===a?"null":l(a)?"array":void 0===a?"undefined":i(a)},Typeson.JSON_TYPES=["null","boolean","number","string","array","object"];for(var m={userObject:{test:function test(i,a){return Typeson.isUserObject(i)},replace:function replace(i){return Object.assign({},i)},revive:function revive(i){return i}}},g=[[{sparseArrays:{testPlainObjects:!0,test:function test(i){return Array.isArray(i)},replace:function replace(i,a){return a.iterateUnsetNumeric=!0,i}}},{sparseUndefined:{test:function test(i,a){return void 0===i&&!1===a.ownKeys},replace:function replace(i){return null},revive:function revive(i){}}}],{undef:{test:function test(i,a){return void 0===i&&(a.ownKeys||!("ownKeys"in a))},replace:function replace(i){return null},revive:function revive(i){return new Typeson.Undefined}}}],b={StringObject:{test:function test(a){return"String"===Typeson.toStringTag(a)&&"object"===(void 0===a?"undefined":i(a))},replace:function replace(i){return String(i)},revive:function revive(i){return new String(i)}},BooleanObject:{test:function test(a){return"Boolean"===Typeson.toStringTag(a)&&"object"===(void 0===a?"undefined":i(a))},replace:function replace(i){return Boolean(i)},revive:function revive(i){return new Boolean(i)}},NumberObject:{test:function test(a){return"Number"===Typeson.toStringTag(a)&&"object"===(void 0===a?"undefined":i(a))},replace:function replace(i){return Number(i)},revive:function revive(i){return new Number(i)}}},w=[{nan:{test:function test(i){return"number"==typeof i&&isNaN(i)},replace:function replace(i){return"NaN"},revive:function revive(i){return NaN}}},{infinity:{test:function test(i){return i===1/0},replace:function replace(i){return"Infinity"},revive:function revive(i){return 1/0}}},{negativeInfinity:{test:function test(i){return i===-1/0},replace:function replace(i){return"-Infinity"},revive:function revive(i){return-1/0}}}],_={date:{test:function test(i){return"Date"===Typeson.toStringTag(i)},replace:function replace(i){var a=i.getTime();return isNaN(a)?"NaN":a},revive:function revive(i){return"NaN"===i?new Date(NaN):new Date(i)}}},x={regexp:{test:function test(i){return"RegExp"===Typeson.toStringTag(i)},replace:function replace(i){return{source:i.source,flags:(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.sticky?"y":"")+(i.unicode?"u":"")}},revive:function revive(i){var a=i.source,u=i.flags;return new RegExp(a,u)}}},T={map:{test:function test(i){return"Map"===Typeson.toStringTag(i)},replace:function replace(i){return Array.from(i.entries())},revive:function revive(i){return new Map(i)}}},E={set:{test:function test(i){return"Set"===Typeson.toStringTag(i)},replace:function replace(i){return Array.from(i.values())},revive:function revive(i){return new Set(i)}}},O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=new Uint8Array(256),A=0;A<O.length;A++)P[O.charCodeAt(A)]=A;var k=function encode(i,a,u){for(var l=new Uint8Array(i,a,u),h=l.length,p="",d=0;d<h;d+=3)p+=O[l[d]>>2],p+=O[(3&l[d])<<4|l[d+1]>>4],p+=O[(15&l[d+1])<<2|l[d+2]>>6],p+=O[63&l[d+2]];return h%3==2?p=p.substring(0,p.length-1)+"=":h%3==1&&(p=p.substring(0,p.length-2)+"=="),p},S=function decode(i){var a=i.length,u=.75*i.length,l=0,h=void 0,p=void 0,d=void 0,y=void 0;"="===i[i.length-1]&&(u--,"="===i[i.length-2]&&u--);for(var v=new ArrayBuffer(u),m=new Uint8Array(v),g=0;g<a;g+=4)h=P[i.charCodeAt(g)],p=P[i.charCodeAt(g+1)],d=P[i.charCodeAt(g+2)],y=P[i.charCodeAt(g+3)],m[l++]=h<<2|p>>4,m[l++]=(15&p)<<4|d>>2,m[l++]=(3&d)<<6|63&y;return v},B={arraybuffer:{test:function test(i){return"ArrayBuffer"===Typeson.toStringTag(i)},replace:function replace(i,a){a.buffers||(a.buffers=[]);var u=a.buffers.indexOf(i);return u>-1?{index:u}:(a.buffers.push(i),k(i))},revive:function revive(a,u){if(u.buffers||(u.buffers=[]),"object"===(void 0===a?"undefined":i(a)))return u.buffers[a.index];var l=S(a);return u.buffers.push(l),l}}},C="undefined"==typeof self?u:self,j={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(i){var a=i,u=C[a];u&&(j[i.toLowerCase()]={test:function test(i){return Typeson.toStringTag(i)===a},replace:function replace(i,a){var u=i.buffer,l=i.byteOffset,h=i.length;a.buffers||(a.buffers=[]);var p=a.buffers.indexOf(u);return p>-1?{index:p,byteOffset:l,length:h}:(a.buffers.push(u),{encoded:k(u),byteOffset:l,length:h})},revive:function revive(i,a){a.buffers||(a.buffers=[]);var l=i.byteOffset,h=i.length,p=i.encoded,d=i.index,y=void 0;return"index"in i?y=a.buffers[d]:(y=S(p),a.buffers.push(y)),new u(y,l,h)}})}));var I={dataview:{test:function test(i){return"DataView"===Typeson.toStringTag(i)},replace:function replace(i,a){var u=i.buffer,l=i.byteOffset,h=i.byteLength;a.buffers||(a.buffers=[]);var p=a.buffers.indexOf(u);return p>-1?{index:p,byteOffset:l,byteLength:h}:(a.buffers.push(u),{encoded:k(u),byteOffset:l,byteLength:h})},revive:function revive(i,a){a.buffers||(a.buffers=[]);var u=i.byteOffset,l=i.byteLength,h=i.encoded,p=i.index,d=void 0;return"index"in i?d=a.buffers[p]:(d=S(h),a.buffers.push(d)),new DataView(d,u,l)}}},D={IntlCollator:{test:function test(i){return Typeson.hasConstructorOf(i,Intl.Collator)},replace:function replace(i){return i.resolvedOptions()},revive:function revive(i){return new Intl.Collator(i.locale,i)}},IntlDateTimeFormat:{test:function test(i){return Typeson.hasConstructorOf(i,Intl.DateTimeFormat)},replace:function replace(i){return i.resolvedOptions()},revive:function revive(i){return new Intl.DateTimeFormat(i.locale,i)}},IntlNumberFormat:{test:function test(i){return Typeson.hasConstructorOf(i,Intl.NumberFormat)},replace:function replace(i){return i.resolvedOptions()},revive:function revive(i){return new Intl.NumberFormat(i.locale,i)}}};function string2arraybuffer(i){for(var a=new Uint16Array(i.length),u=0;u<i.length;u++)a[u]=i.charCodeAt(u);return a.buffer}var N={file:{test:function test(i){return"File"===Typeson.toStringTag(i)},replace:function replace(i){var a=new XMLHttpRequest;if(a.open("GET",URL.createObjectURL(i),!1),"undefined"!=typeof TextEncoder&&a.overrideMimeType("text/plain; charset=utf-16le"),200!==a.status&&0!==a.status)throw new Error("Bad Blob access: "+a.status);return a.send(),{type:i.type,stringContents:a.responseText,name:i.name,lastModified:i.lastModified}},revive:function revive(i){var a=i.name,u=i.type,l=i.stringContents,h=i.lastModified,p=string2arraybuffer(l);return new File([p],a,{type:u,lastModified:h})},replaceAsync:function replaceAsync(i){return new Typeson.Promise((function(a,u){if(i.isClosed)u(new Error("The File is closed"));else{var l=new FileReader;l.addEventListener("load",(function(){a({type:i.type,stringContents:l.result,name:i.name,lastModified:i.lastModified})})),l.addEventListener("error",(function(){u(l.error)})),l.readAsText(i,"UTF-16")}}))}}};return[m,g,b,w,_,x,{imagedata:{test:function test(i){return"ImageData"===Typeson.toStringTag(i)},replace:function replace(i){return{array:Array.from(i.data),width:i.width,height:i.height}},revive:function revive(i){return new ImageData(new Uint8ClampedArray(i.array),i.width,i.height)}}},{imagebitmap:{test:function test(i){return"ImageBitmap"===Typeson.toStringTag(i)||i&&i.dataset&&"ImageBitmap"===i.dataset.toStringTag},replace:function replace(i){var a=document.createElement("canvas");return a.getContext("2d").drawImage(i,0,0),a.toDataURL()},revive:function revive(i){var a=document.createElement("canvas"),u=a.getContext("2d"),l=document.createElement("img");return l.onload=function(){u.drawImage(l,0,0)},l.src=i,a},reviveAsync:function reviveAsync(i){var a=document.createElement("canvas"),u=a.getContext("2d"),l=document.createElement("img");return l.onload=function(){u.drawImage(l,0,0)},l.src=i,createImageBitmap(a)}}},N,{file:N.file,filelist:{test:function test(i){return"FileList"===Typeson.toStringTag(i)},replace:function replace(i){for(var a=[],u=0;u<i.length;u++)a[u]=i.item(u);return a},revive:function revive(i){function FileList(){this._files=arguments[0],this.length=this._files.length}return FileList.prototype.item=function(i){return this._files[i]},FileList.prototype[Symbol.toStringTag]="FileList",new FileList(i)}}},{blob:{test:function test(i){return"Blob"===Typeson.toStringTag(i)},replace:function replace(i){var a=new XMLHttpRequest;if(a.open("GET",URL.createObjectURL(i),!1),"undefined"!=typeof TextEncoder&&a.overrideMimeType("text/plain; charset=utf-16le"),200!==a.status&&0!==a.status)throw new Error("Bad Blob access: "+a.status);return a.send(),{type:i.type,stringContents:a.responseText}},revive:function revive(i){var a=i.type,u=i.stringContents;return new Blob([string2arraybuffer(u)],{type:a})},replaceAsync:function replaceAsync(i){return new Typeson.Promise((function(a,u){if(i.isClosed)u(new Error("The Blob is closed"));else{var l=new FileReader;l.addEventListener("load",(function(){a({type:i.type,stringContents:l.result})})),l.addEventListener("error",(function(){u(l.error)})),l.readAsText(i,"UTF-16")}}))}}}].concat("function"==typeof Map?T:[],"function"==typeof Set?E:[],"function"==typeof ArrayBuffer?B:[],"function"==typeof Uint8Array?j:[],"function"==typeof DataView?I:[],"undefined"!=typeof Intl?D:[])}()})),v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=new Uint8Array(256),g=0;g<v.length;g++)m[v.charCodeAt(g)]=g;var b=function encode(i,a,u){null==u&&(u=i.byteLength);for(var l=new Uint8Array(i,a||0,u),h=l.length,p="",d=0;d<h;d+=3)p+=v[l[d]>>2],p+=v[(3&l[d])<<4|l[d+1]>>4],p+=v[(15&l[d+1])<<2|l[d+2]>>6],p+=v[63&l[d+2]];return h%3==2?p=p.substring(0,p.length-1)+"=":h%3==1&&(p=p.substring(0,p.length-2)+"=="),p},w=function decode(i){var a,u,l,h,p=i.length,d=.75*i.length,y=0;"="===i[i.length-1]&&(d--,"="===i[i.length-2]&&d--);for(var v=new ArrayBuffer(d),g=new Uint8Array(v),b=0;b<p;b+=4)a=m[i.charCodeAt(b)],u=m[i.charCodeAt(b+1)],l=m[i.charCodeAt(b+2)],h=m[i.charCodeAt(b+3)],g[y++]=a<<2|u>>4,g[y++]=(15&u)<<4|l>>2,g[y++]=(3&l)<<6|63&h;return v},_="undefined"==typeof self?h:self,x={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(i){var a=i,u=_[a];u&&(x[i.toLowerCase()+"2"]={test:function(i){return d.toStringTag(i)===a},replace:function(i){return{buffer:i.buffer,byteOffset:i.byteOffset,length:i.length}},revive:function(i){var a=i.buffer,l=i.byteOffset,h=i.length;return new u(a,l,h)}})}));var T={arraybuffer:{test:function(i){return"ArrayBuffer"===d.toStringTag(i)},replace:function(i){return b(i,0,i.byteLength)},revive:function(i){return w(i)}}},E=(new d).register(y),O="FileReaderSync"in self,P=[],A=0;E.register([T,x,{blob2:{test:function(i){return"Blob"===d.toStringTag(i)},replace:function(i){if(i.isClosed)throw new Error("The Blob is closed");if(O){var a=readBlobSync(i,"binary"),u=b(a,0,a.byteLength);return{type:i.type,data:u}}P.push(i);var l={type:i.type,data:{start:A,end:A+i.size}};return console.log("b.size: "+i.size),A+=i.size,l},finalize:function(i,a){i.data=b(a,0,a.byteLength)},revive:function(i){var a=i.type,u=i.data;return new Blob([w(u)],{type:a})}}}]),E.mustFinalize=function(){return P.length>0},E.finalize=function(i){return __awaiter(void 0,void 0,void 0,(function(){var u,l,h,p,d,y,v,m,g,b;return __generator(this,(function(w){switch(w.label){case 0:return[4,readBlobAsync(new Blob(P),"binary")];case 1:if(u=w.sent(),i)for(l=0,h=i;l<h.length;l++)if((p=h[l]).$types)for(v in d=p.$types,(y=d.$)&&(d=d.$),d)m=d[v],(g=E.types[m])&&g.finalize&&(b=a.getByKeyPath(p,y?"$."+v:v),g.finalize(b,u.slice(b.start,b.end)));return P=[],[2]}}))}))};function exportDB(i,u){return __awaiter(this,void 0,void 0,(function(){function exportAll(){return __awaiter(this,void 0,void 0,(function(){var m,g,b,w,_,x,T,O,P;return __generator(this,(function(A){switch(A.label){case 0:return[4,Promise.all(i.tables.map((function(i){return i.count()})))];case 1:(m=A.sent()).forEach((function(i,a){return h[a].rowCount=i})),v.totalRows=m.reduce((function(i,a){return i+a})),g=JSON.stringify(d,void 0,p?2:void 0),b=g.lastIndexOf("]"),w=g.substring(0,b),l.push(w),_=u.filter,x=function(h){var d,m,g,b,w,x,T,O,P,A,k;return __generator(this,(function(S){switch(S.label){case 0:d=i.table(h),m=d.schema.primKey,g=!!m.keyPath,b=u.numRowsPerChunk||2e3,w=g?{tableName:d.name,inbound:!0,rows:[]}:{tableName:d.name,inbound:!1,rows:[]},x=JSON.stringify(w,void 0,p?2:void 0),p&&(x=x.split("\n").join("\n    ")),T=x.lastIndexOf("]"),l.push(x.substring(0,T)),O=null,P=0,A=!0,k=function(){var i,u,w,x,T,k,S,B;return __generator(this,(function(C){switch(C.label){case 0:return y&&a.ignoreTransaction((function(){return y(v)})),[4,(i=null==O?d.limit(b):d.where(":id").above(O).limit(b)).toArray()];case 1:return 0===(u=C.sent()).length?[2,"break"]:(null!=O&&P>0&&(l.push(","),p&&l.push("\n      ")),A=u.length===b,g?(w=_?u.filter((function(i){return _(h,i)})):u,x=w.map((function(i){return E.encapsulate(i)})),E.mustFinalize()?[4,a.waitFor(E.finalize(x))]:[3,3]):[3,4]);case 2:C.sent(),C.label=3;case 3:return B=JSON.stringify(x,void 0,p?2:void 0),p&&(B=B.split("\n").join("\n      ")),l.push(new Blob([B.substring(1,B.length-1)])),P=w.length,O=u.length>0?a.getByKeyPath(u[u.length-1],m.keyPath):null,[3,8];case 4:return[4,i.primaryKeys()];case 5:return T=C.sent(),k=T.map((function(i,a){return[i,u[a]]})),_&&(k=k.filter((function(i){var a=i[0],u=i[1];return _(h,u,a)}))),S=k.map((function(i){return E.encapsulate(i)})),E.mustFinalize()?[4,a.waitFor(E.finalize(S))]:[3,7];case 6:C.sent(),C.label=7;case 7:B=JSON.stringify(S,void 0,p?2:void 0),p&&(B=B.split("\n").join("\n      ")),l.push(new Blob([B.substring(1,B.length-1)])),P=k.length,O=T.length>0?T[T.length-1]:null,C.label=8;case 8:return v.completedRows+=u.length,[2]}}))},S.label=1;case 1:return A?[5,k()]:[3,3];case 2:return"break"===S.sent()?[3,3]:[3,1];case 3:return l.push(x.substr(T)),v.completedTables+=1,v.completedTables<v.totalTables&&l.push(","),[2]}}))},T=0,O=h,A.label=2;case 2:return T<O.length?(P=O[T].name,[5,x(P)]):[3,5];case 3:A.sent(),A.label=4;case 4:return T++,[3,2];case 5:return l.push(g.substr(b)),v.done=!0,y&&a.ignoreTransaction((function(){return y(v)})),[2]}}))}))}var l,h,p,d,y,v;return __generator(this,(function(m){switch(m.label){case 0:u=u||{},l=[],h=i.tables.map((function(i){return{name:i.name,schema:getSchemaString(i),rowCount:0}})),p=u.prettyJson,d={formatName:"dexie",formatVersion:1,data:{databaseName:i.name,databaseVersion:i.verno,tables:h,data:[]}},y=u.progressCallback,v={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:i.tables.length},m.label=1;case 1:return m.trys.push([1,,6,7]),u.noTransaction?[4,exportAll()]:[3,3];case 2:return m.sent(),[3,5];case 3:return[4,i.transaction("r",i.tables,exportAll)];case 4:m.sent(),m.label=5;case 5:return[3,7];case 6:return E.finalize(),[7];case 7:return y&&a.ignoreTransaction((function(){return y(v)})),[2,new Blob(l,{type:"text/json"})]}}))}))}var fakeStream_Stream=function(){},k=createCommonjsModule((function(i,a){!function(i){var a="object"==typeof l&&l.env?l.env:self;i.parser=function(i){return new CParser(i)},i.CParser=CParser,i.CStream=CStream,i.createStream=function createStream(i){return new CStream(i)},i.MAX_BUFFER_LENGTH=10485760,i.DEBUG="debug"===a.CDEBUG,i.INFO="debug"===a.CDEBUG||"info"===a.CDEBUG,i.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var u,h={textNode:void 0,numberNode:""},d=i.EVENTS.filter((function(i){return"error"!==i&&"end"!==i})),y=0;for(var v in i.STATE={BEGIN:y++,VALUE:y++,OPEN_OBJECT:y++,CLOSE_OBJECT:y++,OPEN_ARRAY:y++,CLOSE_ARRAY:y++,TEXT_ESCAPE:y++,STRING:y++,BACKSLASH:y++,END:y++,OPEN_KEY:y++,CLOSE_KEY:y++,TRUE:y++,TRUE2:y++,TRUE3:y++,FALSE:y++,FALSE2:y++,FALSE3:y++,FALSE4:y++,NULL:y++,NULL2:y++,NULL3:y++,NUMBER_DECIMAL_POINT:y++,NUMBER_DIGIT:y++},i.STATE)i.STATE[i.STATE[v]]=v;y=i.STATE;const m=9,g=10,b=13,w=32,_=34,x=43,T=44,E=45,O=46,P=48,A=57,k=58,S=69,B=91,C=92,j=93,I=97,D=98,N=101,K=102,L=108,U=110,M=114,q=115,W=116,V=117,G=123,z=125;function clearBuffers(i){for(var a in h)i[a]=h[a]}Object.create||(Object.create=function(i){function f(){this.__proto__=i}return f.prototype=i,new f}),Object.getPrototypeOf||(Object.getPrototypeOf=function(i){return i.__proto__}),Object.keys||(Object.keys=function(i){var a=[];for(var u in i)i.hasOwnProperty(u)&&a.push(u);return a});var $=/[\\"\n]/g;function CParser(a){if(!(this instanceof CParser))return new CParser(a);var u=this;clearBuffers(u),u.bufferCheckPosition=i.MAX_BUFFER_LENGTH,u.q=u.c=u.p="",u.opt=a||{},u.closed=u.closedRoot=u.sawRoot=!1,u.tag=u.error=null,u.state=y.BEGIN,u.stack=new Array,u.position=u.column=0,u.line=1,u.slashed=!1,u.unicodeI=0,u.unicodeS=null,u.depth=0,emit(u,"onready")}CParser.prototype={end:function(){end(this)},write:function write(a){var u=this;if(this.error)throw this.error;if(u.closed)return error(u,"Cannot write after close. Assign an onready handler.");if(null===a)return end(u);var l=0,p=a.charCodeAt(0),d=u.p;i.DEBUG&&console.log("write -> ["+a+"]");for(;p&&(d=p,u.c=p=a.charCodeAt(l++),d!==p?u.p=d:d=u.p,p);)switch(i.DEBUG&&console.log(l,p,i.STATE[u.state]),u.position++,p===g?(u.line++,u.column=0):u.column++,u.state){case y.BEGIN:p===G?u.state=y.OPEN_OBJECT:p===B?u.state=y.OPEN_ARRAY:isWhitespace(p)||error(u,"Non-whitespace before {[.");continue;case y.OPEN_KEY:case y.OPEN_OBJECT:if(isWhitespace(p))continue;if(u.state===y.OPEN_KEY)u.stack.push(y.CLOSE_KEY);else{if(p===z){emit(u,"onopenobject"),this.depth++,emit(u,"oncloseobject"),this.depth--,u.state=u.stack.pop()||y.VALUE;continue}u.stack.push(y.CLOSE_OBJECT)}p===_?u.state=y.STRING:error(u,'Malformed object key should start with "');continue;case y.CLOSE_KEY:case y.CLOSE_OBJECT:if(isWhitespace(p))continue;u.state,y.CLOSE_KEY;p===k?(u.state===y.CLOSE_OBJECT?(u.stack.push(y.CLOSE_OBJECT),closeValue(u,"onopenobject"),this.depth++):closeValue(u,"onkey"),u.state=y.VALUE):p===z?(emitNode(u,"oncloseobject"),this.depth--,u.state=u.stack.pop()||y.VALUE):p===T?(u.state===y.CLOSE_OBJECT&&u.stack.push(y.CLOSE_OBJECT),closeValue(u),u.state=y.OPEN_KEY):error(u,"Bad object");continue;case y.OPEN_ARRAY:case y.VALUE:if(isWhitespace(p))continue;if(u.state===y.OPEN_ARRAY){if(emit(u,"onopenarray"),this.depth++,u.state=y.VALUE,p===j){emit(u,"onclosearray"),this.depth--,u.state=u.stack.pop()||y.VALUE;continue}u.stack.push(y.CLOSE_ARRAY)}p===_?u.state=y.STRING:p===G?u.state=y.OPEN_OBJECT:p===B?u.state=y.OPEN_ARRAY:p===W?u.state=y.TRUE:p===K?u.state=y.FALSE:p===U?u.state=y.NULL:p===E?u.numberNode+="-":P<=p&&p<=A?(u.numberNode+=String.fromCharCode(p),u.state=y.NUMBER_DIGIT):error(u,"Bad value");continue;case y.CLOSE_ARRAY:if(p===T)u.stack.push(y.CLOSE_ARRAY),closeValue(u,"onvalue"),u.state=y.VALUE;else if(p===j)emitNode(u,"onclosearray"),this.depth--,u.state=u.stack.pop()||y.VALUE;else{if(isWhitespace(p))continue;error(u,"Bad array")}continue;case y.STRING:void 0===u.textNode&&(u.textNode="");var v=l-1,m=u.slashed,b=u.unicodeI;e:for(;;){for(i.DEBUG&&console.log(l,p,i.STATE[u.state],m);b>0;)if(u.unicodeS+=String.fromCharCode(p),p=a.charCodeAt(l++),u.position++,4===b?(u.textNode+=String.fromCharCode(parseInt(u.unicodeS,16)),b=0,v=l-1):b++,!p)break e;if(p===_&&!m){u.state=u.stack.pop()||y.VALUE,u.textNode+=a.substring(v,l-1),u.position+=l-1-v;break}if(p===C&&!m&&(m=!0,u.textNode+=a.substring(v,l-1),u.position+=l-1-v,p=a.charCodeAt(l++),u.position++,!p))break;if(m){if(m=!1,p===U?u.textNode+="\n":p===M?u.textNode+="\r":p===W?u.textNode+="\t":p===K?u.textNode+="\f":p===D?u.textNode+="\b":p===V?(b=1,u.unicodeS=""):u.textNode+=String.fromCharCode(p),p=a.charCodeAt(l++),u.position++,v=l-1,p)continue;break}$.lastIndex=l;var w=$.exec(a);if(null===w){l=a.length+1,u.textNode+=a.substring(v,l-1),u.position+=l-1-v;break}if(l=w.index+1,!(p=a.charCodeAt(w.index))){u.textNode+=a.substring(v,l-1),u.position+=l-1-v;break}}u.slashed=m,u.unicodeI=b;continue;case y.TRUE:p===M?u.state=y.TRUE2:error(u,"Invalid true started with t"+p);continue;case y.TRUE2:p===V?u.state=y.TRUE3:error(u,"Invalid true started with tr"+p);continue;case y.TRUE3:p===N?(emit(u,"onvalue",!0),u.state=u.stack.pop()||y.VALUE):error(u,"Invalid true started with tru"+p);continue;case y.FALSE:p===I?u.state=y.FALSE2:error(u,"Invalid false started with f"+p);continue;case y.FALSE2:p===L?u.state=y.FALSE3:error(u,"Invalid false started with fa"+p);continue;case y.FALSE3:p===q?u.state=y.FALSE4:error(u,"Invalid false started with fal"+p);continue;case y.FALSE4:p===N?(emit(u,"onvalue",!1),u.state=u.stack.pop()||y.VALUE):error(u,"Invalid false started with fals"+p);continue;case y.NULL:p===V?u.state=y.NULL2:error(u,"Invalid null started with n"+p);continue;case y.NULL2:p===L?u.state=y.NULL3:error(u,"Invalid null started with nu"+p);continue;case y.NULL3:p===L?(emit(u,"onvalue",null),u.state=u.stack.pop()||y.VALUE):error(u,"Invalid null started with nul"+p);continue;case y.NUMBER_DECIMAL_POINT:p===O?(u.numberNode+=".",u.state=y.NUMBER_DIGIT):error(u,"Leading zero not followed by .");continue;case y.NUMBER_DIGIT:P<=p&&p<=A?u.numberNode+=String.fromCharCode(p):p===O?(-1!==u.numberNode.indexOf(".")&&error(u,"Invalid number has two dots"),u.numberNode+="."):p===N||p===S?(-1===u.numberNode.indexOf("e")&&-1===u.numberNode.indexOf("E")||error(u,"Invalid number has two exponential"),u.numberNode+="e"):p===x||p===E?(d!==N&&d!==S&&error(u,"Invalid symbol in number"),u.numberNode+=String.fromCharCode(p)):(closeNumber(u),l--,u.state=u.stack.pop()||y.VALUE);continue;default:error(u,"Unknown state: "+u.state)}u.position>=u.bufferCheckPosition&&function checkBufferLength(a){var u=Math.max(i.MAX_BUFFER_LENGTH,10),l=0;for(var p in h){var d=void 0===a[p]?0:a[p].length;if(d>u)switch(p){case"text":closeText(a);break;default:error(a,"Max buffer length exceeded: "+p)}l=Math.max(l,d)}a.bufferCheckPosition=i.MAX_BUFFER_LENGTH-l+a.position}(u);return u},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{u=fakeStream_Stream}catch(i){u=function(){}}function CStream(i){if(!(this instanceof CStream))return new CStream(i);this._parser=new CParser(i),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new p(2),3:new p(3),4:new p(4)},this.string="";var a=this;u.apply(a),this._parser.onend=function(){a.emit("end")},this._parser.onerror=function(i){a.emit("error",i),a._parser.error=null},d.forEach((function(i){Object.defineProperty(a,"on"+i,{get:function(){return a._parser["on"+i]},set:function(u){if(!u)return a.removeAllListeners(i),a._parser["on"+i]=u,u;a.on(i,u)},enumerable:!0,configurable:!1})}))}function emit(a,u,l){i.INFO&&console.log("-- emit",u,l),a[u]&&a[u](l)}function emitNode(i,a,u){closeValue(i),emit(i,a,u)}function closeValue(i,a){i.textNode=function textopts(i,a){if(void 0===a)return a;i.trim&&(a=a.trim());i.normalize&&(a=a.replace(/\s+/g," "));return a}(i.opt,i.textNode),void 0!==i.textNode&&emit(i,a||"onvalue",i.textNode),i.textNode=void 0}function closeNumber(i){i.numberNode&&emit(i,"onvalue",parseFloat(i.numberNode)),i.numberNode=""}function error(i,a){return closeValue(i),a+="\nLine: "+i.line+"\nColumn: "+i.column+"\nChar: "+i.c,a=new Error(a),i.error=a,emit(i,"onerror",a),i}function end(i){return i.state===y.VALUE&&0===i.depth||error(i,"Unexpected end"),closeValue(i),i.c="",i.closed=!0,emit(i,"onend"),CParser.call(i,i.opt),i}function isWhitespace(i){return i===b||i===g||i===w||i===m}CStream.prototype=Object.create(u.prototype,{constructor:{value:CStream}}),CStream.prototype.write=function(i){i=new p(i);for(var a=0;a<i.length;a++){var u=i[a];if(this.bytes_remaining>0){for(var l=0;l<this.bytes_remaining;l++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+l]=i[l];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,a=a+l-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&u>=128){if(u>=194&&u<=223&&(this.bytes_in_sequence=2),u>=224&&u<=239&&(this.bytes_in_sequence=3),u>=240&&u<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+a>i.length){for(var h=0;h<=i.length-1-a;h++)this.temp_buffs[this.bytes_in_sequence][h]=i[a+h];return this.bytes_remaining=a+this.bytes_in_sequence-i.length,!0}this.string=i.slice(a,a+this.bytes_in_sequence).toString(),a=a+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var d=a;d<i.length&&!(i[d]>=128);d++);this.string=i.slice(a,d).toString(),this._parser.write(this.string),this.emit("data",this.string),a=d-1}}},CStream.prototype.end=function(i){return i&&i.length&&this._parser.write(i.toString()),this._parser.end(),!0},CStream.prototype.on=function(i,a){var l=this;return l._parser["on"+i]||-1===d.indexOf(i)||(l._parser["on"+i]=function(){var a=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);a.splice(0,0,i),l.emit.apply(l,a)}),u.prototype.on.call(l,i,a)},CStream.prototype.destroy=function(){clearBuffers(this._parser),this.emit("close")}}(a)}));function JsonStream(i){var a=0,u=function JsonParser(i){var a,u,l,h=k.parser(),p=0,d=[],y=!1,v=!1;return h.onopenobject=function(h){var y={incomplete:!0};a||(a=y),u&&(d.push([l,u,v]),i&&(v?u.push(y):u[l]=y)),u=y,l=h,v=!1,++p},h.onkey=function(i){return l=i},h.onvalue=function(i){return v?u.push(i):u[l]=i},h.oncloseobject=function(){var a;if(delete u.incomplete,l=null,0==--p)y=!0;else{var h=u;a=d.pop(),l=a[0],u=a[1],v=a[2],i||(v?u.push(h):u[l]=h)}},h.onopenarray=function(){var h=[];h.incomplete=!0,a||(a=h),u&&(d.push([l,u,v]),i&&(v?u.push(h):u[l]=h)),u=h,v=!0,l=null,++p},h.onclosearray=function(){var a;if(delete u.incomplete,l=null,0==--p)y=!0;else{var h=u;a=d.pop(),l=a[0],u=a[1],v=a[2],i||(v?u.push(h):u[l]=h)}},{write:function(i){return h.write(i),a},done:function(){return y}}}(!0),l={pullAsync:function(h){return __awaiter(this,void 0,void 0,(function(){var p,d,y;return __generator(this,(function(v){switch(v.label){case 0:return p=i.slice(a,a+h),a+=h,[4,readBlobAsync(p,"text")];case 1:return d=v.sent(),y=u.write(d),l.result=y||{},[2,y]}}))}))},pullSync:function(h){var p=i.slice(a,a+h);a+=h;var d=readBlobSync(p,"text"),y=u.write(d);return l.result=y||{},y},done:function(){return u.done()},eof:function(){return a>=i.size},result:{}};return l}function importDB(i,u){return __awaiter(this,void 0,void 0,(function(){var l,h,p,d;return __generator(this,(function(y){switch(y.label){case 0:return l=(u=u||{}).chunkSizeBytes||1048576,[4,loadUntilWeGotEnoughData(i,l)];case 1:return h=y.sent(),p=h.result.data,(d=new a(p.databaseName)).version(p.databaseVersion).stores(function extractDbSchema(i){for(var a={},u=0,l=i.tables;u<l.length;u++){var h=l[u];a[h.name]=h.schema}return a}(p)),[4,importInto(d,h,u)];case 2:return y.sent(),[2,d]}}))}))}function importInto(i,u,l){return __awaiter(this,void 0,void 0,(function(){function importAll(){return __awaiter(this,void 0,void 0,(function(){var u,d,b,w;return __generator(this,(function(_){switch(_.label){case 0:u=function(u){var h,p,d,y,b,w,_,x,T,O,P,A;return __generator(this,(function(k){switch(k.label){case 0:if(!u.rows)return[2,"break"];if(!u.rows.incomplete&&0===u.rows.length)return[2,"continue"];if(m&&a.ignoreTransaction((function(){return m(g)})),h=u.tableName,p=i.table(h),d=v.tables.filter((function(i){return i.name===h}))[0].schema,!p){if(l.acceptMissingTables)return[2,"continue"];throw new Error("Exported table "+u.tableName+" is missing in installed database")}if(!l.acceptChangedPrimaryKey&&d.split(",")[0]!=p.schema.primKey.src)throw new Error("Primary key differs for table "+u.tableName+". ");for(y=u.rows,b=[],w=0;w<y.length&&!(_=y[w]).incomplete;w++)b.push(E.revive(_));return x=l.filter,T=x?u.inbound?b.filter((function(i){return x(h,i)})):b.filter((function(i){var a=i[0],u=i[1];return x(h,u,a)})):b,O=u.inbound?[void 0,T]:[T.map((function(i){return i[0]})),b.map((function(i){return i[1]}))],P=O[0],A=O[1],l.clearTablesBeforeImport?[4,p.clear()]:[3,2];case 1:k.sent(),k.label=2;case 2:return l.overwriteValues?[4,p.bulkPut(A,P)]:[3,4];case 3:return k.sent(),[3,6];case 4:return[4,p.bulkAdd(A,P)];case 5:k.sent(),k.label=6;case 6:return g.completedRows+=b.length,b.incomplete||(g.completedTables+=1),y.splice(0,b.length),[2]}}))},d=0,b=v.data,_.label=1;case 1:return d<b.length?(w=b[d],[5,u(w)]):[3,4];case 2:if("break"===_.sent())return[3,4];_.label=3;case 3:return d++,[3,1];case 4:for(;v.data.length>0&&v.data[0].rows&&!v.data[0].rows.incomplete;)v.data.splice(0,1);return p.done()||p.eof()?[3,8]:y?(p.pullSync(h),[3,7]):[3,5];case 5:return[4,a.waitFor(p.pullAsync(h))];case 6:_.sent(),_.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}}))}))}var h,p,d,y,v,m,g;return __generator(this,(function(b){switch(b.label){case 0:return h=(l=l||{}).chunkSizeBytes||1048576,[4,loadUntilWeGotEnoughData(u,h)];case 1:if(p=b.sent(),d=p.result,y="FileReaderSync"in self,v=d.data,!l.acceptNameDiff&&i.name!==v.databaseName)throw new Error("Name differs. Current database name is "+i.name+" but export is "+v.databaseName);if(!l.acceptVersionDiff&&i.verno!==v.databaseVersion)throw new Error("Database version differs. Current database is in version "+i.verno+" but export is "+v.databaseVersion);return m=l.progressCallback,g={done:!1,completedRows:0,completedTables:0,totalRows:v.tables.reduce((function(i,a){return i+a.rowCount}),0),totalTables:v.tables.length},m&&a.ignoreTransaction((function(){return m(g)})),l.noTransaction?[4,importAll()]:[3,3];case 2:return b.sent(),[3,5];case 3:return[4,i.transaction("rw",i.tables,importAll)];case 4:b.sent(),b.label=5;case 5:return g.done=!0,m&&a.ignoreTransaction((function(){return m(g)})),[2]}}))}))}function loadUntilWeGotEnoughData(i,a){return __awaiter(this,void 0,void 0,(function(){var u,l;return __generator(this,(function(h){switch(h.label){case 0:u="slice"in i?JsonStream(i):i,h.label=1;case 1:return u.eof()?[3,3]:[4,u.pullAsync(a)];case 2:return h.sent(),u.result.data&&u.result.data.data?[3,3]:[3,1];case 3:if(!(l=u.result)||"dexie"!=l.formatName)throw new Error("Given file is not a dexie export");if(l.formatVersion>1)throw new Error("Format version "+l.formatVersion+" not supported");if(!l.data)throw new Error("No data in export file");if(!l.data.databaseName)throw new Error("Missing databaseName in export file");if(!l.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!l.data.tables)throw new Error("Missing tables in export file");return[2,u]}}))}))}a.prototype.export=function(i){return exportDB(this,i)},a.prototype.import=function(i,a){return importInto(this,i,a)},a.import=function(i,a){return importDB(i,a)};i.exportDB=exportDB,i.importDB=importDB,i.importInto=importInto,i.peakImportFile=function peakImportFile(i){return __awaiter(this,void 0,void 0,(function(){var a;return __generator(this,(function(u){switch(u.label){case 0:a=JsonStream(i),u.label=1;case 1:return a.eof()?[3,3]:[4,a.pullAsync(5120)];case 2:return u.sent(),a.result.data&&a.result.data.data?(delete a.result.data.data,[3,3]):[3,1];case 3:return[2,a.result]}}))}))},i.default=function(){throw new Error("This addon extends Dexie.prototype globally and does not have be included in Dexie constructor's addons options.")},Object.defineProperty(i,"__esModule",{value:!0})}))}).call(this)}).call(this,i("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i("buffer").Buffer)},{_process:17,buffer:13,dexie:15}],15:[function(i,a,u){(function(i,l){(function(){!function(i,l){"object"==typeof u&&void 0!==a?a.exports=l():"function"==typeof define&&define.amd?define(l):i.Dexie=l()}(this,(function(){"use strict";var __assign=function(){return(__assign=Object.assign||function __assign(i){for(var a,u=1,l=arguments.length;u<l;u++)for(var h in a=arguments[u])Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h]);return i}).apply(this,arguments)};function __spreadArrays(){for(var i=0,a=0,u=arguments.length;a<u;a++)i+=arguments[a].length;var l=Array(i),h=0;for(a=0;a<u;a++)for(var p=arguments[a],d=0,y=p.length;d<y;d++,h++)l[h]=p[d];return l}var a=Object.keys,u=Array.isArray,h="undefined"!=typeof self?self:"undefined"!=typeof window?window:i;function extend(i,u){return"object"!=typeof u||a(u).forEach((function(a){i[a]=u[a]})),i}"undefined"==typeof Promise||h.Promise||(h.Promise=Promise);var p=Object.getPrototypeOf,d={}.hasOwnProperty;function hasOwn(i,a){return d.call(i,a)}function props(i,u){"function"==typeof u&&(u=u(p(i))),a(u).forEach((function(a){setProp(i,a,u[a])}))}var y=Object.defineProperty;function setProp(i,a,u,l){y(i,a,extend(u&&hasOwn(u,"get")&&"function"==typeof u.get?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},l))}function derive(i){return{from:function(a){return i.prototype=Object.create(a.prototype),setProp(i.prototype,"constructor",i),{extend:props.bind(null,i.prototype)}}}}var v=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(i,a){var u;return v(i,a)||(u=p(i))&&getPropertyDescriptor(u,a)}var m=[].slice;function slice(i,a,u){return m.call(i,a,u)}function override(i,a){return a(i)}function assert(i){if(!i)throw new Error("Assertion Failed")}function asap(i){h.setImmediate?l(i):setTimeout(i,0)}function arrayToObject(i,a){return i.reduce((function(i,u,l){var h=a(u,l);return h&&(i[h[0]]=h[1]),i}),{})}function getByKeyPath(i,a){if(hasOwn(i,a))return i[a];if(!a)return i;if("string"!=typeof a){for(var u=[],l=0,h=a.length;l<h;++l){var p=getByKeyPath(i,a[l]);u.push(p)}return u}var d=a.indexOf(".");if(-1!==d){var y=i[a.substr(0,d)];return void 0===y?void 0:getByKeyPath(y,a.substr(d+1))}}function setByKeyPath(i,a,l){if(i&&void 0!==a&&(!("isFrozen"in Object)||!Object.isFrozen(i)))if("string"!=typeof a&&"length"in a){assert("string"!=typeof l&&"length"in l);for(var h=0,p=a.length;h<p;++h)setByKeyPath(i,a[h],l[h])}else{var d=a.indexOf(".");if(-1!==d){var y=a.substr(0,d),v=a.substr(d+1);if(""===v)void 0===l?u(i)&&!isNaN(parseInt(y))?i.splice(y,1):delete i[y]:i[y]=l;else{var m=i[y];m||(m=i[y]={}),setByKeyPath(m,v,l)}}else void 0===l?u(i)&&!isNaN(parseInt(a))?i.splice(a,1):delete i[a]:i[a]=l}}function delByKeyPath(i,a){"string"==typeof a?setByKeyPath(i,a,void 0):"length"in a&&[].map.call(a,(function(a){setByKeyPath(i,a,void 0)}))}function shallowClone(i){var a={};for(var u in i)hasOwn(i,u)&&(a[u]=i[u]);return a}var g=[].concat;function flatten(i){return g.apply([],i)}var b="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(flatten([8,16,32,64].map((function(i){return["Int","Uint","Float"].map((function(a){return a+i+"Array"}))})))).filter((function(i){return h[i]})),w=b.map((function(i){return h[i]})),_=arrayToObject(b,(function(i){return[i,!0]}));function deepClone(i){if(!i||"object"!=typeof i)return i;var a;if(u(i)){a=[];for(var l=0,h=i.length;l<h;++l)a.push(deepClone(i[l]))}else if(w.indexOf(i.constructor)>=0)a=i;else for(var p in a=i.constructor?Object.create(i.constructor.prototype):{},i)hasOwn(i,p)&&(a[p]=deepClone(i[p]));return a}var x={}.toString;function toStringTag(i){return x.call(i).slice(8,-1)}var getValueOf=function(i,a){return"Array"===a?""+i.map((function(i){return getValueOf(i,toStringTag(i))})):"ArrayBuffer"===a?""+new Uint8Array(i):"Date"===a?i.getTime():ArrayBuffer.isView(i)?""+new Uint8Array(i.buffer):i};function getObjectDiff(i,u,l,h){return l=l||{},h=h||"",a(i).forEach((function(a){if(hasOwn(u,a)){var p=i[a],d=u[a];if("object"==typeof p&&"object"==typeof d&&p&&d){var y=toStringTag(p),v=toStringTag(d);y===v?_[y]?getValueOf(p,y)!==getValueOf(d,v)&&(l[h+a]=u[a]):getObjectDiff(p,d,l,h+a+"."):l[h+a]=u[a]}else p!==d&&(l[h+a]=u[a])}else l[h+a]=void 0})),a(u).forEach((function(a){hasOwn(i,a)||(l[h+a]=u[a])})),l}var T="undefined"!=typeof Symbol&&Symbol.iterator,E=T?function(i){var a;return null!=i&&(a=i[T])&&a.apply(i)}:function(){return null},O={};function getArrayOf(i){var a,l,h,p;if(1===arguments.length){if(u(i))return i.slice();if(this===O&&"string"==typeof i)return[i];if(p=E(i)){for(l=[];!(h=p.next()).done;)l.push(h.value);return l}if(null==i)return[i];if("number"==typeof(a=i.length)){for(l=new Array(a);a--;)l[a]=i[a];return l}return[i]}for(a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return l}var P="undefined"!=typeof Symbol?function(i){return"AsyncFunction"===i[Symbol.toStringTag]}:function(){return!1},A="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(i,a){A=i,libraryFilter=a}var libraryFilter=function(){return!0},k=!new Error("").stack;function getErrorWithStack(){if(k)try{throw new Error}catch(i){return i}return new Error}function prettyStack(i,a){var u=i.stack;return u?(a=a||0,0===u.indexOf(i.name)&&(a+=(i.name+i.message).split("\n").length),u.split("\n").slice(a).filter(libraryFilter).map((function(i){return"\n"+i})).join("")):""}var S=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],B=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(S),C={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function DexieError(i,a){this._e=getErrorWithStack(),this.name=i,this.message=a}function getMultiErrorMessage(i,a){return i+". Errors: "+Object.keys(a).map((function(i){return a[i].toString()})).filter((function(i,a,u){return u.indexOf(i)===a})).join("\n")}function ModifyError(i,a,u,l){this._e=getErrorWithStack(),this.failures=a,this.failedKeys=l,this.successCount=u,this.message=getMultiErrorMessage(i,a)}function BulkError(i,a){this._e=getErrorWithStack(),this.name="BulkError",this.failures=a,this.message=getMultiErrorMessage(i,a)}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}}),derive(ModifyError).from(DexieError),derive(BulkError).from(DexieError);var j=B.reduce((function(i,a){return i[a]=a+"Error",i}),{}),I=DexieError,D=B.reduce((function(i,a){var u=a+"Error";function DexieError(i,l){this._e=getErrorWithStack(),this.name=u,i?"string"==typeof i?(this.message=i+(l?"\n "+l:""),this.inner=l||null):"object"==typeof i&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=C[a]||u,this.inner=null)}return derive(DexieError).from(I),i[a]=DexieError,i}),{});D.Syntax=SyntaxError,D.Type=TypeError,D.Range=RangeError;var N=S.reduce((function(i,a){return i[a+"Error"]=D[a],i}),{});var K=B.reduce((function(i,a){return-1===["Syntax","Type","Range"].indexOf(a)&&(i[a+"Error"]=D[a]),i}),{});function nop(){}function mirror(i){return i}function pureFunctionChain(i,a){return null==i||i===mirror?a:function(u){return a(i(u))}}function callBoth(i,a){return function(){i.apply(this,arguments),a.apply(this,arguments)}}function hookCreatingChain(i,a){return i===nop?a:function(){var u=i.apply(this,arguments);void 0!==u&&(arguments[0]=u);var l=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var p=a.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?callBoth(l,this.onsuccess):l),h&&(this.onerror=this.onerror?callBoth(h,this.onerror):h),void 0!==p?p:u}}function hookDeletingChain(i,a){return i===nop?a:function(){i.apply(this,arguments);var u=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?callBoth(u,this.onsuccess):u),l&&(this.onerror=this.onerror?callBoth(l,this.onerror):l)}}function hookUpdatingChain(i,a){return i===nop?a:function(u){var l=i.apply(this,arguments);extend(u,l);var h=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var d=a.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?callBoth(h,this.onsuccess):h),p&&(this.onerror=this.onerror?callBoth(p,this.onerror):p),void 0===l?void 0===d?void 0:d:extend(l,d)}}function reverseStoppableEventChain(i,a){return i===nop?a:function(){return!1!==a.apply(this,arguments)&&i.apply(this,arguments)}}function promisableChain(i,a){return i===nop?a:function(){var u=i.apply(this,arguments);if(u&&"function"==typeof u.then){for(var l=this,h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];return u.then((function(){return a.apply(l,p)}))}return a.apply(this,arguments)}}K.ModifyError=ModifyError,K.DexieError=DexieError,K.BulkError=BulkError;var L={},U="undefined"==typeof Promise?[]:function(){var i=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[i,i.__proto__,i];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,a.__proto__,i]}(),M=U[0],q=U[1],W=U[2],V=q&&q.then,G=M&&M.constructor,z=!!W,$=!1,J=W?function(){W.then(physicalTick)}:h.setImmediate?l.bind(null,physicalTick):h.MutationObserver?function(){var i=document.createElement("div");new MutationObserver((function(){physicalTick(),i=null})).observe(i,{attributes:!0}),i.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)},asap$1=function(i,a){re.push([i,a]),H&&(J(),H=!1)},Y=!0,H=!0,X=[],Q=[],Z=null,ee=mirror,te={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:globalError,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(i){try{globalError(i[0],i[1])}catch(i){}}))}},ne=te,re=[],oe=0,ie=[];function DexiePromise(i){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=nop,this._lib=!1;var a=this._PSD=ne;if(A&&(this._stackHolder=getErrorWithStack(),this._prev=null,this._numPrev=0),"function"!=typeof i){if(i!==L)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&handleRejection(this,this._value))}this._state=null,this._value=null,++a.ref,executePromiseTask(this,i)}var ae={get:function(){var i=ne,a=fe;function then(u,l){var h=this,p=!i.global&&(i!==ne||a!==fe),d=p&&!decrementExpectedAwaits(),y=new DexiePromise((function(a,y){propagateToListener(h,new Listener(nativeAwaitCompatibleWrap(u,i,p,d),nativeAwaitCompatibleWrap(l,i,p,d),a,y,i))}));return A&&linkToPreviousPromise(y,this),y}return then.prototype=L,then},set:function(i){setProp(this,"then",i&&i.prototype===L?ae:{get:function(){return i},set:ae.set})}};function Listener(i,a,u,l,h){this.onFulfilled="function"==typeof i?i:null,this.onRejected="function"==typeof a?a:null,this.resolve=u,this.reject=l,this.psd=h}function executePromiseTask(i,a){try{a((function(a){if(null===i._state){if(a===i)throw new TypeError("A promise cannot be resolved with itself.");var u=i._lib&&beginMicroTickScope();a&&"function"==typeof a.then?executePromiseTask(i,(function(i,u){a instanceof DexiePromise?a._then(i,u):a.then(i,u)})):(i._state=!0,i._value=a,propagateAllListeners(i)),u&&endMicroTickScope()}}),handleRejection.bind(null,i))}catch(a){handleRejection(i,a)}}function handleRejection(i,a){if(Q.push(a),null===i._state){var u=i._lib&&beginMicroTickScope();a=ee(a),i._state=!1,i._value=a,A&&null!==a&&"object"==typeof a&&!a._promise&&function tryCatch(i,a,u){try{i.apply(null,u)}catch(i){a&&a(i)}}((function(){var u=getPropertyDescriptor(a,"stack");a._promise=i,setProp(a,"stack",{get:function(){return $?u&&(u.get?u.get.apply(a):u.value):i.stack}})})),function addPossiblyUnhandledError(i){X.some((function(a){return a._value===i._value}))||X.push(i)}(i),propagateAllListeners(i),u&&endMicroTickScope()}}function propagateAllListeners(i){var a=i._listeners;i._listeners=[];for(var u=0,l=a.length;u<l;++u)propagateToListener(i,a[u]);var h=i._PSD;--h.ref||h.finalize(),0===oe&&(++oe,asap$1((function(){0==--oe&&finalizePhysicalTick()}),[]))}function propagateToListener(i,a){if(null!==i._state){var u=i._state?a.onFulfilled:a.onRejected;if(null===u)return(i._state?a.resolve:a.reject)(i._value);++a.psd.ref,++oe,asap$1(callListener,[u,i,a])}else i._listeners.push(a)}function callListener(i,a,u){try{Z=a;var l,h=a._value;a._state?l=i(h):(Q.length&&(Q=[]),l=i(h),-1===Q.indexOf(h)&&function markErrorAsHandled(i){var a=X.length;for(;a;)if(X[--a]._value===i._value)return void X.splice(a,1)}(a)),u.resolve(l)}catch(i){u.reject(i)}finally{Z=null,0==--oe&&finalizePhysicalTick(),--u.psd.ref||u.psd.finalize()}}function getStack(i,a,u){if(a.length===u)return a;var l="";if(!1===i._state){var h,p,d=i._value;null!=d?(h=d.name||"Error",p=d.message||d,l=prettyStack(d,0)):(h=d,p=""),a.push(h+(p?": "+p:"")+l)}return A&&((l=prettyStack(i._stackHolder,2))&&-1===a.indexOf(l)&&a.push(l),i._prev&&getStack(i._prev,a,u)),a}function linkToPreviousPromise(i,a){var u=a?a._numPrev+1:0;u<100&&(i._prev=a,i._numPrev=u)}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var i=Y;return Y=!1,H=!1,i}function endMicroTickScope(){var i,a,u;do{for(;re.length>0;)for(i=re,re=[],u=i.length,a=0;a<u;++a){var l=i[a];l[0].apply(null,l[1])}}while(re.length>0);Y=!0,H=!0}function finalizePhysicalTick(){var i=X;X=[],i.forEach((function(i){i._PSD.onunhandled.call(null,i._value,i)}));for(var a=ie.slice(0),u=a.length;u;)a[--u]()}function PromiseReject(i){return new DexiePromise(L,!1,i)}function wrap(i,a){var u=ne;return function(){var l=beginMicroTickScope(),h=ne;try{return switchToZone(u,!0),i.apply(this,arguments)}catch(i){a&&a(i)}finally{switchToZone(h,!1),l&&endMicroTickScope()}}}props(DexiePromise.prototype,{then:ae,_then:function(i,a){propagateToListener(this,new Listener(null,null,i,a,ne))},catch:function(i){if(1===arguments.length)return this.then(null,i);var a=arguments[0],u=arguments[1];return"function"==typeof a?this.then(null,(function(i){return i instanceof a?u(i):PromiseReject(i)})):this.then(null,(function(i){return i&&i.name===a?u(i):PromiseReject(i)}))},finally:function(i){return this.then((function(a){return i(),a}),(function(a){return i(),PromiseReject(a)}))},stack:{get:function(){if(this._stack)return this._stack;try{$=!0;var i=getStack(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=i),i}finally{$=!1}}},timeout:function(i,a){var u=this;return i<1/0?new DexiePromise((function(l,h){var p=setTimeout((function(){return h(new D.Timeout(a))}),i);u.then(l,h).finally(clearTimeout.bind(null,p))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&setProp(DexiePromise.prototype,Symbol.toStringTag,"Dexie.Promise"),te.env=snapShot(),props(DexiePromise,{all:function(){var i=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(a,u){0===i.length&&a([]);var l=i.length;i.forEach((function(h,p){return DexiePromise.resolve(h).then((function(u){i[p]=u,--l||a(i)}),u)}))}))},resolve:function(i){if(i instanceof DexiePromise)return i;if(i&&"function"==typeof i.then)return new DexiePromise((function(a,u){i.then(a,u)}));var a=new DexiePromise(L,!0,i);return linkToPreviousPromise(a,Z),a},reject:PromiseReject,race:function(){var i=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(a,u){i.map((function(i){return DexiePromise.resolve(i).then(a,u)}))}))},PSD:{get:function(){return ne},set:function(i){return ne=i}},totalEchoes:{get:function(){return fe}},newPSD:newScope,usePSD:usePSD,scheduler:{get:function(){return asap$1},set:function(i){asap$1=i}},rejectionMapper:{get:function(){return ee},set:function(i){ee=i}},follow:function(i,a){return new DexiePromise((function(u,l){return newScope((function(a,u){var l=ne;l.unhandleds=[],l.onunhandled=u,l.finalize=callBoth((function(){var i=this;!function run_at_end_of_this_or_next_physical_tick(i){function finalizer(){i(),ie.splice(ie.indexOf(finalizer),1)}ie.push(finalizer),++oe,asap$1((function(){0==--oe&&finalizePhysicalTick()}),[])}((function(){0===i.unhandleds.length?a():u(i.unhandleds[0])}))}),l.finalize),i()}),a,u,l)}))}}),G&&(G.allSettled&&setProp(DexiePromise,"allSettled",(function(){var i=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(a){0===i.length&&a([]);var u=i.length,l=new Array(u);i.forEach((function(i,h){return DexiePromise.resolve(i).then((function(i){return l[h]={status:"fulfilled",value:i}}),(function(i){return l[h]={status:"rejected",reason:i}})).then((function(){return--u||a(l)}))}))}))})),G.any&&"undefined"!=typeof AggregateError&&setProp(DexiePromise,"any",(function(){var i=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(a,u){0===i.length&&u(new AggregateError([]));var l=i.length,h=new Array(l);i.forEach((function(i,p){return DexiePromise.resolve(i).then((function(i){return a(i)}),(function(i){h[p]=i,--l||u(new AggregateError(h))}))}))}))})));var se={awaits:0,echoes:0,id:0},ue=0,ce=[],le=0,fe=0,he=0;function newScope(i,a,u,l){var h=ne,p=Object.create(h);p.parent=h,p.ref=0,p.global=!1,p.id=++he;var d=te.env;p.env=z?{Promise:DexiePromise,PromiseProp:{value:DexiePromise,configurable:!0,writable:!0},all:DexiePromise.all,race:DexiePromise.race,allSettled:DexiePromise.allSettled,any:DexiePromise.any,resolve:DexiePromise.resolve,reject:DexiePromise.reject,nthen:getPatchedPromiseThen(d.nthen,p),gthen:getPatchedPromiseThen(d.gthen,p)}:{},a&&extend(p,a),++h.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var y=usePSD(p,i,u,l);return 0===p.ref&&p.finalize(),y}function incrementExpectedAwaits(){return se.id||(se.id=++ue),++se.awaits,se.echoes+=100,se.id}function decrementExpectedAwaits(){return!!se.awaits&&(0==--se.awaits&&(se.id=0),se.echoes=100*se.awaits,!0)}function onPossibleParallellAsync(i){return se.echoes&&i&&i.constructor===G?(incrementExpectedAwaits(),i.then((function(i){return decrementExpectedAwaits(),i}),(function(i){return decrementExpectedAwaits(),de(i)}))):i}function zoneEnterEcho(i){++fe,se.echoes&&0!=--se.echoes||(se.echoes=se.id=0),ce.push(ne),switchToZone(i,!0)}function zoneLeaveEcho(){var i=ce[ce.length-1];ce.pop(),switchToZone(i,!1)}function switchToZone(i,a){var u=ne;if((a?!se.echoes||le++&&i===ne:!le||--le&&i===ne)||enqueueNativeMicroTask(a?zoneEnterEcho.bind(null,i):zoneLeaveEcho),i!==ne&&(ne=i,u===te&&(te.env=snapShot()),z)){var l=te.env.Promise,p=i.env;q.then=p.nthen,l.prototype.then=p.gthen,(u.global||i.global)&&(Object.defineProperty(h,"Promise",p.PromiseProp),l.all=p.all,l.race=p.race,l.resolve=p.resolve,l.reject=p.reject,p.allSettled&&(l.allSettled=p.allSettled),p.any&&(l.any=p.any))}}function snapShot(){var i=h.Promise;return z?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject,nthen:q.then,gthen:i.prototype.then}:{}}function usePSD(i,a,u,l,h){var p=ne;try{return switchToZone(i,!0),a(u,l,h)}finally{switchToZone(p,!1)}}function enqueueNativeMicroTask(i){V.call(M,i)}function nativeAwaitCompatibleWrap(i,a,u,l){return"function"!=typeof i?i:function(){var h=ne;u&&incrementExpectedAwaits(),switchToZone(a,!0);try{return i.apply(this,arguments)}finally{switchToZone(h,!1),l&&enqueueNativeMicroTask(decrementExpectedAwaits)}}}function getPatchedPromiseThen(i,a){return function(u,l){return i.call(this,nativeAwaitCompatibleWrap(u,a),nativeAwaitCompatibleWrap(l,a))}}-1===(""+V).indexOf("[native code]")&&(incrementExpectedAwaits=decrementExpectedAwaits=nop);var pe="unhandledrejection";function globalError(i,a){var u;try{u=a.onuncatched(i)}catch(i){}if(!1!==u)try{var l,p={promise:a,reason:i};if(h.document&&document.createEvent?((l=document.createEvent("Event")).initEvent(pe,!0,!0),extend(l,p)):h.CustomEvent&&extend(l=new CustomEvent(pe,{detail:p}),p),l&&h.dispatchEvent&&(dispatchEvent(l),!h.PromiseRejectionEvent&&h.onunhandledrejection))try{h.onunhandledrejection(l)}catch(i){}A&&l&&!l.defaultPrevented&&console.warn("Unhandled rejection: "+(i.stack||i))}catch(i){}}var de=DexiePromise.reject;function tempTransaction(i,a,u,l){if(i._state.openComplete||ne.letThrough){var h=i._createTransaction(a,u,i._dbSchema);try{h.create()}catch(i){return de(i)}return h._promise(a,(function(i,a){return newScope((function(){return ne.trans=h,l(i,a,h)}))})).then((function(i){return h._completion.then((function(){return i}))}))}if(!i._state.isBeingOpened){if(!i._options.autoOpen)return de(new D.DatabaseClosed);i.open().catch(nop)}return i._state.dbReadyPromise.then((function(){return tempTransaction(i,a,u,l)}))}var ye="3.0.3",ve=String.fromCharCode(65535),me=-1/0,ge="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",be="String expected.",we=[],_e="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xe=_e,Te=_e,dexieStackFrameFilter=function(i){return!/(dexie\.js|dexie\.min\.js)/.test(i)},Ee="__dbnames",Oe="readonly",Pe="readwrite";function combine(i,a){return i?a?function(){return i.apply(this,arguments)&&a.apply(this,arguments)}:i:a}var Ae={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function workaroundForUndefinedPrimKey(i){return function(a){return void 0===getByKeyPath(a,i)&&delByKeyPath(a=deepClone(a),i),a}}var ke=function(){function Table(){}return Table.prototype._trans=function(i,a,u){var l=this._tx||ne.trans,h=this.name;function checkTableInTransaction(i,u,l){if(!l.schema[h])throw new D.NotFound("Table "+h+" not part of transaction");return a(l.idbtrans,l)}var p=beginMicroTickScope();try{return l&&l.db===this.db?l===ne.trans?l._promise(i,checkTableInTransaction,u):newScope((function(){return l._promise(i,checkTableInTransaction,u)}),{trans:l,transless:ne.transless||ne}):tempTransaction(this.db,i,[this.name],checkTableInTransaction)}finally{p&&endMicroTickScope()}},Table.prototype.get=function(i,a){var u=this;return i&&i.constructor===Object?this.where(i).first(a):this._trans("readonly",(function(a){return u.core.get({trans:a,key:i}).then((function(i){return u.hook.reading.fire(i)}))})).then(a)},Table.prototype.where=function(i){if("string"==typeof i)return new this.db.WhereClause(this,i);if(u(i))return new this.db.WhereClause(this,"["+i.join("+")+"]");var l=a(i);if(1===l.length)return this.where(l[0]).equals(i[l[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter((function(i){return i.compound&&l.every((function(a){return i.keyPath.indexOf(a)>=0}))&&i.keyPath.every((function(i){return l.indexOf(i)>=0}))}))[0];if(h&&this.db._maxKey!==ve)return this.where(h.name).equals(h.keyPath.map((function(a){return i[a]})));!h&&A&&console.warn("The query "+JSON.stringify(i)+" on "+this.name+" would benefit of a compound index ["+l.join("+")+"]");var p=this.schema.idxByName,d=this.db._deps.indexedDB;function equals(i,a){try{return 0===d.cmp(i,a)}catch(i){return!1}}var y=l.reduce((function(a,l){var h=a[0],d=a[1],y=p[l],v=i[l];return[h||y,h||!y?combine(d,y&&y.multi?function(i){var a=getByKeyPath(i,l);return u(a)&&a.some((function(i){return equals(v,i)}))}:function(i){return equals(v,getByKeyPath(i,l))}):d]}),[null,null]),v=y[0],m=y[1];return v?this.where(v.name).equals(i[v.keyPath]).filter(m):h?this.filter(m):this.where(l).equals("")},Table.prototype.filter=function(i){return this.toCollection().and(i)},Table.prototype.count=function(i){return this.toCollection().count(i)},Table.prototype.offset=function(i){return this.toCollection().offset(i)},Table.prototype.limit=function(i){return this.toCollection().limit(i)},Table.prototype.each=function(i){return this.toCollection().each(i)},Table.prototype.toArray=function(i){return this.toCollection().toArray(i)},Table.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Table.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,u(i)?"["+i.join("+")+"]":i))},Table.prototype.reverse=function(){return this.toCollection().reverse()},Table.prototype.mapToClass=function(i){this.schema.mappedClass=i;var readHook=function(a){if(!a)return a;var u=Object.create(i.prototype);for(var l in a)if(hasOwn(a,l))try{u[l]=a[l]}catch(i){}return u};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=readHook,this.hook("reading",readHook),i},Table.prototype.defineClass=function(){return this.mapToClass((function Class(i){extend(this,i)}))},Table.prototype.add=function(i,a){var u=this,l=this.schema.primKey,h=l.auto,p=l.keyPath,d=i;return p&&h&&(d=workaroundForUndefinedPrimKey(p)(i)),this._trans("readwrite",(function(i){return u.core.mutate({trans:i,type:"add",keys:null!=a?[a]:null,values:[d]})})).then((function(i){return i.numFailures?DexiePromise.reject(i.failures[0]):i.lastResult})).then((function(a){if(p)try{setByKeyPath(i,p,a)}catch(i){}return a}))},Table.prototype.update=function(i,l){if("object"!=typeof l||u(l))throw new D.InvalidArgument("Modifications must be an object.");if("object"!=typeof i||u(i))return this.where(":id").equals(i).modify(l);a(l).forEach((function(a){setByKeyPath(i,a,l[a])}));var h=getByKeyPath(i,this.schema.primKey.keyPath);return void 0===h?de(new D.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(l)},Table.prototype.put=function(i,a){var u=this,l=this.schema.primKey,h=l.auto,p=l.keyPath,d=i;return p&&h&&(d=workaroundForUndefinedPrimKey(p)(i)),this._trans("readwrite",(function(i){return u.core.mutate({trans:i,type:"put",values:[d],keys:null!=a?[a]:null})})).then((function(i){return i.numFailures?DexiePromise.reject(i.failures[0]):i.lastResult})).then((function(a){if(p)try{setByKeyPath(i,p,a)}catch(i){}return a}))},Table.prototype.delete=function(i){var a=this;return this._trans("readwrite",(function(u){return a.core.mutate({trans:u,type:"delete",keys:[i]})})).then((function(i){return i.numFailures?DexiePromise.reject(i.failures[0]):void 0}))},Table.prototype.clear=function(){var i=this;return this._trans("readwrite",(function(a){return i.core.mutate({trans:a,type:"deleteRange",range:Ae})})).then((function(i){return i.numFailures?DexiePromise.reject(i.failures[0]):void 0}))},Table.prototype.bulkGet=function(i){var a=this;return this._trans("readonly",(function(u){return a.core.getMany({keys:i,trans:u}).then((function(i){return i.map((function(i){return a.hook.reading.fire(i)}))}))}))},Table.prototype.bulkAdd=function(i,a,u){var l=this,h=Array.isArray(a)?a:void 0,p=(u=u||(h?void 0:a))?u.allKeys:void 0;return this._trans("readwrite",(function(a){var u=l.schema.primKey,d=u.auto,y=u.keyPath;if(y&&h)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var v=i.length,m=y&&d?i.map(workaroundForUndefinedPrimKey(y)):i;return l.core.mutate({trans:a,type:"add",keys:h,values:m,wantResults:p}).then((function(i){var a=i.numFailures,u=i.results,h=i.lastResult,d=i.failures;if(0===a)return p?u:h;throw new BulkError(l.name+".bulkAdd(): "+a+" of "+v+" operations failed",Object.keys(d).map((function(i){return d[i]})))}))}))},Table.prototype.bulkPut=function(i,a,u){var l=this,h=Array.isArray(a)?a:void 0,p=(u=u||(h?void 0:a))?u.allKeys:void 0;return this._trans("readwrite",(function(a){var u=l.schema.primKey,d=u.auto,y=u.keyPath;if(y&&h)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var v=i.length,m=y&&d?i.map(workaroundForUndefinedPrimKey(y)):i;return l.core.mutate({trans:a,type:"put",keys:h,values:m,wantResults:p}).then((function(i){var a=i.numFailures,u=i.results,h=i.lastResult,d=i.failures;if(0===a)return p?u:h;throw new BulkError(l.name+".bulkPut(): "+a+" of "+v+" operations failed",Object.keys(d).map((function(i){return d[i]})))}))}))},Table.prototype.bulkDelete=function(i){var a=this,u=i.length;return this._trans("readwrite",(function(u){return a.core.mutate({trans:u,type:"delete",keys:i})})).then((function(i){var l=i.numFailures,h=i.lastResult,p=i.failures;if(0===l)return h;throw new BulkError(a.name+".bulkDelete(): "+l+" of "+u+" operations failed",p)}))},Table}();function Events(i){var l={},rv=function(a,u){if(u){for(var h=arguments.length,p=new Array(h-1);--h;)p[h-1]=arguments[h];return l[a].subscribe.apply(null,p),i}if("string"==typeof a)return l[a]};rv.addEventType=add;for(var h=1,p=arguments.length;h<p;++h)add(arguments[h]);return rv;function add(i,a,u){if("object"==typeof i)return addConfiguredEvents(i);a||(a=reverseStoppableEventChain),u||(u=nop);var h={subscribers:[],fire:u,subscribe:function(i){-1===h.subscribers.indexOf(i)&&(h.subscribers.push(i),h.fire=a(h.fire,i))},unsubscribe:function(i){h.subscribers=h.subscribers.filter((function(a){return a!==i})),h.fire=h.subscribers.reduce(a,u)}};return l[i]=rv[i]=h,h}function addConfiguredEvents(i){a(i).forEach((function(a){var l=i[a];if(u(l))add(a,i[a][0],i[a][1]);else{if("asap"!==l)throw new D.InvalidArgument("Invalid event config");var h=add(a,mirror,(function fire(){for(var i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];h.subscribers.forEach((function(i){asap((function fireEvent(){i.apply(null,a)}))}))}))}}))}}function makeClassConstructor(i,a){return derive(a).from({prototype:i}),a}function isPlainKeyRange(i,a){return!(i.filter||i.algorithm||i.or)&&(a?i.justLimit:!i.replayFilter)}function addFilter(i,a){i.filter=combine(i.filter,a)}function addReplayFilter(i,a,u){var l=i.replayFilter;i.replayFilter=l?function(){return combine(l(),a())}:a,i.justLimit=u&&!l}function getIndexOrStore(i,a){if(i.isPrimKey)return a.primaryKey;var u=a.getIndexByKeyPath(i.index);if(!u)throw new D.Schema("KeyPath "+i.index+" on object store "+a.name+" is not indexed");return u}function openCursor(i,a,u){var l=getIndexOrStore(i,a.schema);return a.openCursor({trans:u,values:!i.keysOnly,reverse:"prev"===i.dir,unique:!!i.unique,query:{index:l,range:i.range}})}function iter(i,a,u,l){var h=i.replayFilter?combine(i.filter,i.replayFilter()):i.filter;if(i.or){var p={},union=function(i,u,l){if(!h||h(u,l,(function(i){return u.stop(i)}),(function(i){return u.fail(i)}))){var d=u.primaryKey,y=""+d;"[object ArrayBuffer]"===y&&(y=""+new Uint8Array(d)),hasOwn(p,y)||(p[y]=!0,a(i,u,l))}};return Promise.all([i.or._iterate(union,u),iterate(openCursor(i,l,u),i.algorithm,union,!i.keysOnly&&i.valueMapper)])}return iterate(openCursor(i,l,u),combine(i.algorithm,h),a,!i.keysOnly&&i.valueMapper)}function iterate(i,a,u,l){var h=wrap(l?function(i,a,h){return u(l(i),a,h)}:u);return i.then((function(i){if(i)return i.start((function(){var c=function(){return i.continue()};a&&!a(i,(function(i){return c=i}),(function(a){i.stop(a),c=nop}),(function(a){i.fail(a),c=nop}))||h(i.value,i,(function(i){return c=i})),c()}))}))}var Se=function(){function Collection(){}return Collection.prototype._read=function(i,a){var u=this._ctx;return u.error?u.table._trans(null,de.bind(null,u.error)):u.table._trans("readonly",i).then(a)},Collection.prototype._write=function(i){var a=this._ctx;return a.error?a.table._trans(null,de.bind(null,a.error)):a.table._trans("readwrite",i,"locked")},Collection.prototype._addAlgorithm=function(i){var a=this._ctx;a.algorithm=combine(a.algorithm,i)},Collection.prototype._iterate=function(i,a){return iter(this._ctx,i,a,this._ctx.table.core)},Collection.prototype.clone=function(i){var a=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return i&&extend(u,i),a._ctx=u,a},Collection.prototype.raw=function(){return this._ctx.valueMapper=null,this},Collection.prototype.each=function(i){var a=this._ctx;return this._read((function(u){return iter(a,i,u,a.table.core)}))},Collection.prototype.count=function(i){var a=this;return this._read((function(i){var u=a._ctx,l=u.table.core;if(isPlainKeyRange(u,!0))return l.count({trans:i,query:{index:getIndexOrStore(u,l.schema),range:u.range}}).then((function(i){return Math.min(i,u.limit)}));var h=0;return iter(u,(function(){return++h,!1}),i,l).then((function(){return h}))})).then(i)},Collection.prototype.sortBy=function(i,a){var u=i.split(".").reverse(),l=u[0],h=u.length-1;function getval(i,a){return a?getval(i[u[a]],a-1):i[l]}var p="next"===this._ctx.dir?1:-1;function sorter(i,a){var u=getval(i,h),l=getval(a,h);return u<l?-p:u>l?p:0}return this.toArray((function(i){return i.sort(sorter)})).then(a)},Collection.prototype.toArray=function(i){var a=this;return this._read((function(i){var u=a._ctx;if("next"===u.dir&&isPlainKeyRange(u,!0)&&u.limit>0){var l=u.valueMapper,h=getIndexOrStore(u,u.table.core.schema);return u.table.core.query({trans:i,limit:u.limit,values:!0,query:{index:h,range:u.range}}).then((function(i){var a=i.result;return l?a.map(l):a}))}var p=[];return iter(u,(function(i){return p.push(i)}),i,u.table.core).then((function(){return p}))}),i)},Collection.prototype.offset=function(i){var a=this._ctx;return i<=0||(a.offset+=i,isPlainKeyRange(a)?addReplayFilter(a,(function(){var a=i;return function(i,u){return 0===a||(1===a?(--a,!1):(u((function(){i.advance(a),a=0})),!1))}})):addReplayFilter(a,(function(){var a=i;return function(){return--a<0}}))),this},Collection.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),addReplayFilter(this._ctx,(function(){var a=i;return function(i,u,l){return--a<=0&&u(l),a>=0}}),!0),this},Collection.prototype.until=function(i,a){return addFilter(this._ctx,(function(u,l,h){return!i(u.value)||(l(h),a)})),this},Collection.prototype.first=function(i){return this.limit(1).toArray((function(i){return i[0]})).then(i)},Collection.prototype.last=function(i){return this.reverse().first(i)},Collection.prototype.filter=function(i){return addFilter(this._ctx,(function(a){return i(a.value)})),function addMatchFilter(i,a){i.isMatch=combine(i.isMatch,a)}(this._ctx,i),this},Collection.prototype.and=function(i){return this.filter(i)},Collection.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},Collection.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Collection.prototype.desc=function(){return this.reverse()},Collection.prototype.eachKey=function(i){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each((function(a,u){i(u.key,u)}))},Collection.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},Collection.prototype.eachPrimaryKey=function(i){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each((function(a,u){i(u.primaryKey,u)}))},Collection.prototype.keys=function(i){var a=this._ctx;a.keysOnly=!a.isMatch;var u=[];return this.each((function(i,a){u.push(a.key)})).then((function(){return u})).then(i)},Collection.prototype.primaryKeys=function(i){var a=this._ctx;if("next"===a.dir&&isPlainKeyRange(a,!0)&&a.limit>0)return this._read((function(i){var u=getIndexOrStore(a,a.table.core.schema);return a.table.core.query({trans:i,values:!1,limit:a.limit,query:{index:u,range:a.range}})})).then((function(i){return i.result})).then(i);a.keysOnly=!a.isMatch;var u=[];return this.each((function(i,a){u.push(a.primaryKey)})).then((function(){return u})).then(i)},Collection.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},Collection.prototype.firstKey=function(i){return this.limit(1).keys((function(i){return i[0]})).then(i)},Collection.prototype.lastKey=function(i){return this.reverse().firstKey(i)},Collection.prototype.distinct=function(){var i=this._ctx,a=i.index&&i.table.schema.idxByName[i.index];if(!a||!a.multi)return this;var u={};return addFilter(this._ctx,(function(i){var a=i.primaryKey.toString(),l=hasOwn(u,a);return u[a]=!0,!l})),this},Collection.prototype.modify=function(i){var u=this,l=this._ctx;return this._write((function(h){var p;if("function"==typeof i)p=i;else{var d=a(i),y=d.length;p=function(a){for(var u=!1,l=0;l<y;++l){var h=d[l],p=i[h];getByKeyPath(a,h)!==p&&(setByKeyPath(a,h,p),u=!0)}return u}}var v=l.table.core,m=v.schema.primaryKey,g=m.outbound,b=m.extractKey,w="testmode"in Ke?1:2e3,_=u.db.core.cmp,x=[],T=0,E=[],applyMutateResult=function(i,u){var l=u.failures,h=u.numFailures;T+=i-h;for(var p=0,d=a(l);p<d.length;p++){var y=d[p];x.push(l[y])}};return u.clone().primaryKeys().then((function(i){var nextChunk=function(a){var u=Math.min(w,i.length-a);return v.getMany({trans:h,keys:i.slice(a,a+u)}).then((function(l){for(var d=[],y=[],m=g?[]:null,x=[],T=0;T<u;++T){var E=l[T],O={value:deepClone(E),primKey:i[a+T]};!1!==p.call(O,O.value,O)&&(null==O.value?x.push(i[a+T]):g||0===_(b(E),b(O.value))?(y.push(O.value),g&&m.push(i[a+T])):(x.push(i[a+T]),d.push(O.value)))}return Promise.resolve(d.length>0&&v.mutate({trans:h,type:"add",values:d}).then((function(i){for(var a in i.failures)x.splice(parseInt(a),1);applyMutateResult(d.length,i)}))).then((function(i){return y.length>0&&v.mutate({trans:h,type:"put",keys:m,values:y}).then((function(i){return applyMutateResult(y.length,i)}))})).then((function(){return x.length>0&&v.mutate({trans:h,type:"delete",keys:x}).then((function(i){return applyMutateResult(x.length,i)}))})).then((function(){return i.length>a+u&&nextChunk(a+w)}))}))};return nextChunk(0).then((function(){if(x.length>0)throw new ModifyError("Error modifying one or more objects",x,T,E);return i.length}))}))}))},Collection.prototype.delete=function(){var i=this._ctx,a=i.range;return isPlainKeyRange(i)&&(i.isPrimKey&&!Te||3===a.type)?this._write((function(u){var l=i.table.core.schema.primaryKey,h=a;return i.table.core.count({trans:u,query:{index:l,range:h}}).then((function(a){return i.table.core.mutate({trans:u,type:"deleteRange",range:h}).then((function(i){var u=i.failures,l=(i.lastResult,i.results,i.numFailures);if(l)throw new ModifyError("Could not delete some values",Object.keys(u).map((function(i){return u[i]})),a-l);return a-l}))}))})):this.modify((function(i,a){return a.value=null}))},Collection}();function simpleCompare(i,a){return i<a?-1:i===a?0:1}function simpleCompareReverse(i,a){return i>a?-1:i===a?0:1}function fail(i,a,u){var l=i instanceof Be?new i.Collection(i):i;return l._ctx.error=u?new u(a):new TypeError(a),l}function emptyCollection(i){return new i.Collection(i,(function(){return rangeEqual("")})).limit(0)}function nextCasing(i,a,u,l,h,p){for(var d=Math.min(i.length,l.length),y=-1,v=0;v<d;++v){var m=a[v];if(m!==l[v])return h(i[v],u[v])<0?i.substr(0,v)+u[v]+u.substr(v+1):h(i[v],l[v])<0?i.substr(0,v)+l[v]+u.substr(v+1):y>=0?i.substr(0,y)+a[y]+u.substr(y+1):null;h(i[v],m)<0&&(y=v)}return d<l.length&&"next"===p?i+u.substr(i.length):d<i.length&&"prev"===p?i.substr(0,u.length):y<0?null:i.substr(0,y)+l[y]+u.substr(y+1)}function addIgnoreCaseAlgorithm(i,a,u,l){var h,p,d,y,v,m,g,b=u.length;if(!u.every((function(i){return"string"==typeof i})))return fail(i,be);function initDirection(i){h=function upperFactory(i){return"next"===i?function(i){return i.toUpperCase()}:function(i){return i.toLowerCase()}}(i),p=function lowerFactory(i){return"next"===i?function(i){return i.toLowerCase()}:function(i){return i.toUpperCase()}}(i),d="next"===i?simpleCompare:simpleCompareReverse;var a=u.map((function(i){return{lower:p(i),upper:h(i)}})).sort((function(i,a){return d(i.lower,a.lower)}));y=a.map((function(i){return i.upper})),v=a.map((function(i){return i.lower})),m=i,g="next"===i?"":l}initDirection("next");var w=new i.Collection(i,(function(){return createRange(y[0],v[b-1]+l)}));w._ondirectionchange=function(i){initDirection(i)};var _=0;return w._addAlgorithm((function(i,u,l){var h=i.key;if("string"!=typeof h)return!1;var w=p(h);if(a(w,v,_))return!0;for(var x=null,T=_;T<b;++T){var E=nextCasing(h,w,y[T],v[T],d,m);null===E&&null===x?_=T+1:(null===x||d(x,E)>0)&&(x=E)}return u(null!==x?function(){i.continue(x+g)}:l),!1})),w}function createRange(i,a,u,l){return{type:2,lower:i,upper:a,lowerOpen:u,upperOpen:l}}function rangeEqual(i){return{type:1,lower:i,upper:i}}var Be=function(){function WhereClause(){}return Object.defineProperty(WhereClause.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),WhereClause.prototype.between=function(i,a,u,l){u=!1!==u,l=!0===l;try{return this._cmp(i,a)>0||0===this._cmp(i,a)&&(u||l)&&(!u||!l)?emptyCollection(this):new this.Collection(this,(function(){return createRange(i,a,!u,!l)}))}catch(i){return fail(this,ge)}},WhereClause.prototype.equals=function(i){return null==i?fail(this,ge):new this.Collection(this,(function(){return rangeEqual(i)}))},WhereClause.prototype.above=function(i){return null==i?fail(this,ge):new this.Collection(this,(function(){return createRange(i,void 0,!0)}))},WhereClause.prototype.aboveOrEqual=function(i){return null==i?fail(this,ge):new this.Collection(this,(function(){return createRange(i,void 0,!1)}))},WhereClause.prototype.below=function(i){return null==i?fail(this,ge):new this.Collection(this,(function(){return createRange(void 0,i,!1,!0)}))},WhereClause.prototype.belowOrEqual=function(i){return null==i?fail(this,ge):new this.Collection(this,(function(){return createRange(void 0,i)}))},WhereClause.prototype.startsWith=function(i){return"string"!=typeof i?fail(this,be):this.between(i,i+ve,!0,!0)},WhereClause.prototype.startsWithIgnoreCase=function(i){return""===i?this.startsWith(i):addIgnoreCaseAlgorithm(this,(function(i,a){return 0===i.indexOf(a[0])}),[i],ve)},WhereClause.prototype.equalsIgnoreCase=function(i){return addIgnoreCaseAlgorithm(this,(function(i,a){return i===a[0]}),[i],"")},WhereClause.prototype.anyOfIgnoreCase=function(){var i=getArrayOf.apply(O,arguments);return 0===i.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,(function(i,a){return-1!==a.indexOf(i)}),i,"")},WhereClause.prototype.startsWithAnyOfIgnoreCase=function(){var i=getArrayOf.apply(O,arguments);return 0===i.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,(function(i,a){return a.some((function(a){return 0===i.indexOf(a)}))}),i,ve)},WhereClause.prototype.anyOf=function(){var i=this,a=getArrayOf.apply(O,arguments),u=this._cmp;try{a.sort(u)}catch(i){return fail(this,ge)}if(0===a.length)return emptyCollection(this);var l=new this.Collection(this,(function(){return createRange(a[0],a[a.length-1])}));l._ondirectionchange=function(l){u="next"===l?i._ascending:i._descending,a.sort(u)};var h=0;return l._addAlgorithm((function(i,l,p){for(var d=i.key;u(d,a[h])>0;)if(++h===a.length)return l(p),!1;return 0===u(d,a[h])||(l((function(){i.continue(a[h])})),!1)})),l},WhereClause.prototype.notEqual=function(i){return this.inAnyRange([[me,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},WhereClause.prototype.noneOf=function(){var i=getArrayOf.apply(O,arguments);if(0===i.length)return new this.Collection(this);try{i.sort(this._ascending)}catch(i){return fail(this,ge)}var a=i.reduce((function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[me,a]]}),null);return a.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},WhereClause.prototype.inAnyRange=function(i,a){var u=this,l=this._cmp,h=this._ascending,p=this._descending,d=this._min,y=this._max;if(0===i.length)return emptyCollection(this);if(!i.every((function(i){return void 0!==i[0]&&void 0!==i[1]&&h(i[0],i[1])<=0})))return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var v=!a||!1!==a.includeLowers,m=a&&!0===a.includeUppers;var g,b=h;function rangeSorter(i,a){return b(i[0],a[0])}try{(g=i.reduce((function addRange(i,a){for(var u=0,h=i.length;u<h;++u){var p=i[u];if(l(a[0],p[1])<0&&l(a[1],p[0])>0){p[0]=d(p[0],a[0]),p[1]=y(p[1],a[1]);break}}return u===h&&i.push(a),i}),[])).sort(rangeSorter)}catch(i){return fail(this,ge)}var w=0,_=m?function(i){return h(i,g[w][1])>0}:function(i){return h(i,g[w][1])>=0},x=v?function(i){return p(i,g[w][0])>0}:function(i){return p(i,g[w][0])>=0};var T=_,E=new this.Collection(this,(function(){return createRange(g[0][0],g[g.length-1][1],!v,!m)}));return E._ondirectionchange=function(i){"next"===i?(T=_,b=h):(T=x,b=p),g.sort(rangeSorter)},E._addAlgorithm((function(i,a,l){for(var p=i.key;T(p);)if(++w===g.length)return a(l),!1;return!!function keyWithinCurrentRange(i){return!_(i)&&!x(i)}(p)||(0===u._cmp(p,g[w][1])||0===u._cmp(p,g[w][0])||a((function(){b===h?i.continue(g[w][0]):i.continue(g[w][1])})),!1)})),E},WhereClause.prototype.startsWithAnyOf=function(){var i=getArrayOf.apply(O,arguments);return i.every((function(i){return"string"==typeof i}))?0===i.length?emptyCollection(this):this.inAnyRange(i.map((function(i){return[i,i+ve]}))):fail(this,"startsWithAnyOf() only works with strings")},WhereClause}();function safariMultiStoreFix(i){return 1===i.length?i[0]:i}function getMaxKey(i){try{return i.only([[]]),[[]]}catch(i){return ve}}function eventRejectHandler(i){return wrap((function(a){return preventDefault(a),i(a.target.error),!1}))}function preventDefault(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var Ce=function(){function Transaction(){}return Transaction.prototype._lock=function(){return assert(!ne.global),++this._reculock,1!==this._reculock||ne.global||(ne.lockOwnerFor=this),this},Transaction.prototype._unlock=function(){if(assert(!ne.global),0==--this._reculock)for(ne.global||(ne.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var i=this._blockedFuncs.shift();try{usePSD(i[1],i[0])}catch(i){}}return this},Transaction.prototype._locked=function(){return this._reculock&&ne.lockOwnerFor!==this},Transaction.prototype.create=function(i){var a=this;if(!this.mode)return this;var u=this.db.idbdb,l=this.db._state.dbOpenError;if(assert(!this.idbtrans),!i&&!u)switch(l&&l.name){case"DatabaseClosedError":throw new D.DatabaseClosed(l);case"MissingAPIError":throw new D.MissingAPI(l.message,l);default:throw new D.OpenFailed(l)}if(!this.active)throw new D.TransactionInactive;return assert(null===this._completion._state),(i=this.idbtrans=i||u.transaction(safariMultiStoreFix(this.storeNames),this.mode)).onerror=wrap((function(u){preventDefault(u),a._reject(i.error)})),i.onabort=wrap((function(u){preventDefault(u),a.active&&a._reject(new D.Abort(i.error)),a.active=!1,a.on("abort").fire(u)})),i.oncomplete=wrap((function(){a.active=!1,a._resolve()})),this},Transaction.prototype._promise=function(i,a,u){var l=this;if("readwrite"===i&&"readwrite"!==this.mode)return de(new D.ReadOnly("Transaction is readonly"));if(!this.active)return de(new D.TransactionInactive);if(this._locked())return new DexiePromise((function(h,p){l._blockedFuncs.push([function(){l._promise(i,a,u).then(h,p)},ne])}));if(u)return newScope((function(){var i=new DexiePromise((function(i,u){l._lock();var h=a(i,u,l);h&&h.then&&h.then(i,u)}));return i.finally((function(){return l._unlock()})),i._lib=!0,i}));var h=new DexiePromise((function(i,u){var h=a(i,u,l);h&&h.then&&h.then(i,u)}));return h._lib=!0,h},Transaction.prototype._root=function(){return this.parent?this.parent._root():this},Transaction.prototype.waitFor=function(i){var a=this._root(),u=DexiePromise.resolve(i);if(a._waitingFor)a._waitingFor=a._waitingFor.then((function(){return u}));else{a._waitingFor=u,a._waitingQueue=[];var l=a.idbtrans.objectStore(a.storeNames[0]);!function spin(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(l.get(-1/0).onsuccess=spin)}()}var h=a._waitingFor;return new DexiePromise((function(i,l){u.then((function(u){return a._waitingQueue.push(wrap(i.bind(null,u)))}),(function(i){return a._waitingQueue.push(wrap(l.bind(null,i)))})).finally((function(){a._waitingFor===h&&(a._waitingFor=null)}))}))},Transaction.prototype.abort=function(){this.active&&this._reject(new D.Abort),this.active=!1},Transaction.prototype.table=function(i){var a=this._memoizedTables||(this._memoizedTables={});if(hasOwn(a,i))return a[i];var u=this.schema[i];if(!u)throw new D.NotFound("Table "+i+" not part of transaction");var l=new this.db.Table(i,u,this);return l.core=this.db.core.table(i),a[i]=l,l},Transaction}();function createIndexSpec(i,a,u,l,h,p,d){return{name:i,keyPath:a,unique:u,multi:l,auto:h,compound:p,src:(u&&!d?"&":"")+(l?"*":"")+(h?"++":"")+nameFromKeyPath(a)}}function nameFromKeyPath(i){return"string"==typeof i?i:i?"["+[].join.call(i,"+")+"]":""}function createTableSchema(i,a,u){return{name:i,primKey:a,indexes:u,mappedClass:null,idxByName:arrayToObject(u,(function(i){return[i.name,i]}))}}function getKeyExtractor(i){return null==i?function(){}:"string"==typeof i?function getSinglePathKeyExtractor(i){return 1===i.split(".").length?function(a){return a[i]}:function(a){return getByKeyPath(a,i)}}(i):function(a){return getByKeyPath(a,i)}}function getEffectiveKeys(i,a){return"delete"===a.type?a.keys:a.keys||a.values.map(i.extractKey)}function arrayify(i){return[].slice.call(i)}var je=0;function getKeyPathAlias(i){return null==i?":id":"string"==typeof i?i:"["+i.join("+")+"]"}function createDBCore(i,a,l,h){var p=a.cmp.bind(a);function makeIDBKeyRange(i){if(3===i.type)return null;if(4===i.type)throw new Error("Cannot convert never type to IDBKeyRange");var a=i.lower,u=i.upper,h=i.lowerOpen,p=i.upperOpen;return void 0===a?void 0===u?null:l.upperBound(u,!!p):void 0===u?l.lowerBound(a,!!h):l.bound(a,u,!!h,!!p)}var d=function extractSchema(i,a){var l=arrayify(i.objectStoreNames);return{schema:{name:i.name,tables:l.map((function(i){return a.objectStore(i)})).map((function(i){var a=i.keyPath,l=i.autoIncrement,h=u(a),p=null==a,d={},y={name:i.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:p,compound:h,keyPath:a,autoIncrement:l,unique:!0,extractKey:getKeyExtractor(a)},indexes:arrayify(i.indexNames).map((function(a){return i.index(a)})).map((function(i){var a=i.name,l=i.unique,h=i.multiEntry,p=i.keyPath,y={name:a,compound:u(p),keyPath:p,unique:l,multiEntry:h,extractKey:getKeyExtractor(p)};return d[getKeyPathAlias(p)]=y,y})),getIndexByKeyPath:function(i){return d[getKeyPathAlias(i)]}};return d[":id"]=y.primaryKey,null!=a&&(d[getKeyPathAlias(a)]=y.primaryKey),y}))},hasGetAll:l.length>0&&"getAll"in a.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(i,h),y=d.schema,v=d.hasGetAll,m=y.tables.map((function(i){return function createDbCoreTable(i){var a=i.name;return{name:a,schema:i,mutate:function mutate(u){var l=u.trans,h=u.type,p=u.keys,d=u.values,y=u.range,v=u.wantResults;return new Promise((function(u,m){u=wrap(u);var g=l.objectStore(a),b=null==g.keyPath,w="put"===h||"add"===h;if(!w&&"delete"!==h&&"deleteRange"!==h)throw new Error("Invalid operation type: "+h);var _=(p||d||{length:1}).length;if(p&&d&&p.length!==d.length)throw new Error("Given keys array must have same length as given values array.");if(0===_)return u({numFailures:0,failures:{},results:[],lastResult:void 0});var x,T=v&&__spreadArrays(p||getEffectiveKeys(i.primaryKey,{type:h,keys:p,values:d})),E=[],O=0,errorHandler=function(i){++O,preventDefault(i),T&&(T[i.target._reqno]=void 0),E[i.target._reqno]=i.target.error},setResult=function(i){var a=i.target;T[a._reqno]=a.result};if("deleteRange"===h){if(4===y.type)return u({numFailures:O,failures:E,results:T,lastResult:void 0});x=3===y.type?g.clear():g.delete(makeIDBKeyRange(y))}else{var P=w?b?[d,p]:[d,null]:[p,null],A=P[0],k=P[1];if(w)for(var S=0;S<_;++S)(x=k&&void 0!==k[S]?g[h](A[S],k[S]):g[h](A[S]))._reqno=S,T&&void 0===T[S]&&(x.onsuccess=setResult),x.onerror=errorHandler;else for(S=0;S<_;++S)(x=g[h](A[S]))._reqno=S,x.onerror=errorHandler}var done=function(i){var a=i.target.result;T&&(T[_-1]=a),u({numFailures:O,failures:E,results:T,lastResult:a})};x.onerror=function(i){errorHandler(i),done(i)},x.onsuccess=done}))},getMany:function(i){var u=i.trans,l=i.keys;return new Promise((function(i,h){i=wrap(i);for(var p,d=u.objectStore(a),y=l.length,v=new Array(y),m=0,g=0,successHandler=function(a){var u=a.target;v[u._pos]=u.result,++g===m&&i(v)},b=eventRejectHandler(h),w=0;w<y;++w)null!=l[w]&&((p=d.get(l[w]))._pos=w,p.onsuccess=successHandler,p.onerror=b,++m);0===m&&i(v)}))},get:function(i){var u=i.trans,l=i.key;return new Promise((function(i,h){i=wrap(i);var p=u.objectStore(a).get(l);p.onsuccess=function(a){return i(a.target.result)},p.onerror=eventRejectHandler(h)}))},query:function query(i){return function(u){return new Promise((function(l,h){l=wrap(l);var p=u.trans,d=u.values,y=u.limit,v=u.query,m=y===1/0?void 0:y,g=v.index,b=v.range,w=p.objectStore(a),_=g.isPrimaryKey?w:w.index(g.name),x=makeIDBKeyRange(b);if(0===y)return l({result:[]});if(i){var T=d?_.getAll(x,m):_.getAllKeys(x,m);T.onsuccess=function(i){return l({result:i.target.result})},T.onerror=eventRejectHandler(h)}else{var E=0,O=d||!("openKeyCursor"in _)?_.openCursor(x):_.openKeyCursor(x),P=[];O.onsuccess=function(i){var a=O.result;return a?(P.push(d?a.value:a.primaryKey),++E===y?l({result:P}):void a.continue()):l({result:P})},O.onerror=eventRejectHandler(h)}}))}}(v),openCursor:function openCursor(i){var u=i.trans,l=i.values,h=i.query,p=i.reverse,d=i.unique;return new Promise((function(i,y){i=wrap(i);var v=h.index,m=h.range,g=u.objectStore(a),b=v.isPrimaryKey?g:g.index(v.name),w=p?d?"prevunique":"prev":d?"nextunique":"next",_=l||!("openKeyCursor"in b)?b.openCursor(makeIDBKeyRange(m),w):b.openKeyCursor(makeIDBKeyRange(m),w);_.onerror=eventRejectHandler(y),_.onsuccess=wrap((function(a){var l=_.result;if(l){l.___id=++je,l.done=!1;var h=l.continue.bind(l),p=l.continuePrimaryKey;p&&(p=p.bind(l));var d=l.advance.bind(l),doThrowCursorIsStopped=function(){throw new Error("Cursor not stopped")};l.trans=u,l.stop=l.continue=l.continuePrimaryKey=l.advance=function(){throw new Error("Cursor not started")},l.fail=wrap(y),l.next=function(){var i=this,a=1;return this.start((function(){return a--?i.continue():i.stop()})).then((function(){return i}))},l.start=function(i){var a=new Promise((function(i,a){i=wrap(i),_.onerror=eventRejectHandler(a),l.fail=a,l.stop=function(a){l.stop=l.continue=l.continuePrimaryKey=l.advance=doThrowCursorIsStopped,i(a)}})),guardedCallback=function(){if(_.result)try{i()}catch(i){l.fail(i)}else l.done=!0,l.start=function(){throw new Error("Cursor behind last entry")},l.stop()};return _.onsuccess=wrap((function(i){_.onsuccess=guardedCallback,guardedCallback()})),l.continue=h,l.continuePrimaryKey=p,l.advance=d,guardedCallback(),a},i(l)}else i(null)}),y)}))},count:function(i){var u=i.query,l=i.trans,h=u.index,p=u.range;return new Promise((function(i,u){var d=l.objectStore(a),y=h.isPrimaryKey?d:d.index(h.name),v=makeIDBKeyRange(p),m=v?y.count(v):y.count();m.onsuccess=wrap((function(a){return i(a.target.result)})),m.onerror=eventRejectHandler(u)}))}}}(i)})),g={};return m.forEach((function(i){return g[i.name]=i})),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(i){if(!g[i])throw new Error("Table '"+i+"' not found");return g[i]},cmp:p,MIN_KEY:-1/0,MAX_KEY:getMaxKey(l),schema:y}}function createMiddlewareStacks(i,a,u,l){var h=u.IDBKeyRange;return{dbcore:function createMiddlewareStack(i,a){return a.reduce((function(i,a){var u=a.create;return __assign(__assign({},i),u(i))}),i)}(createDBCore(a,u.indexedDB,h,l),i.dbcore)}}function generateMiddlewareStacks(i,a){var u=a.db,l=createMiddlewareStacks(i._middlewares,u,i._deps,a);i.core=l.dbcore,i.tables.forEach((function(a){var u=a.name;i.core.schema.tables.some((function(i){return i.name===u}))&&(a.core=i.core.table(u),i[u]instanceof i.Table&&(i[u].core=a.core))}))}function setApiOnPlace(i,a,u,l){u.forEach((function(u){var h=l[u];a.forEach((function(a){var l=getPropertyDescriptor(a,u);(!l||"value"in l&&void 0===l.value)&&(a===i.Transaction.prototype||a instanceof i.Transaction?setProp(a,u,{get:function(){return this.table(u)},set:function(i){y(this,u,{value:i,writable:!0,configurable:!0,enumerable:!0})}}):a[u]=new i.Table(u,h))}))}))}function removeTablesApi(i,a){a.forEach((function(a){for(var u in a)a[u]instanceof i.Table&&delete a[u]}))}function lowerVersionFirst(i,a){return i._cfg.version-a._cfg.version}function runUpgraders(i,u,l,h){var p=i._dbSchema,d=i._createTransaction("readwrite",i._storeNames,p);d.create(l),d._completion.catch(h);var y=d._reject.bind(d),v=ne.transless||ne;newScope((function(){ne.trans=d,ne.transless=v,0===u?(a(p).forEach((function(i){createTable(l,i,p[i].primKey,p[i].indexes)})),generateMiddlewareStacks(i,l),DexiePromise.follow((function(){return i.on.populate.fire(d)})).catch(y)):function updateTablesAndIndexes(i,u,l,h){var p=[],d=i._versions,y=i._dbSchema=buildGlobalSchema(i,i.idbdb,h),v=!1;function runQueue(){return p.length?DexiePromise.resolve(p.shift()(l.idbtrans)).then(runQueue):DexiePromise.resolve()}return d.filter((function(i){return i._cfg.version>=u})).forEach((function(d){p.push((function(){var p=y,m=d._cfg.dbschema;adjustToExistingIndexNames(i,p,h),adjustToExistingIndexNames(i,m,h),y=i._dbSchema=m;var g=getSchemaDiff(p,m);g.add.forEach((function(i){createTable(h,i[0],i[1].primKey,i[1].indexes)})),g.change.forEach((function(i){if(i.recreate)throw new D.Upgrade("Not yet support for changing primary key");var a=h.objectStore(i.name);i.add.forEach((function(i){return addIndex(a,i)})),i.change.forEach((function(i){a.deleteIndex(i.name),addIndex(a,i)})),i.del.forEach((function(i){return a.deleteIndex(i)}))}));var b=d._cfg.contentUpgrade;if(b&&d._cfg.version>u){generateMiddlewareStacks(i,h),l._memoizedTables={},v=!0;var w=shallowClone(m);g.del.forEach((function(i){w[i]=p[i]})),removeTablesApi(i,[i.Transaction.prototype]),setApiOnPlace(i,[i.Transaction.prototype],a(w),w),l.schema=w;var _,x=P(b);x&&incrementExpectedAwaits();var T=DexiePromise.follow((function(){if((_=b(l))&&x){var i=decrementExpectedAwaits.bind(null,null);_.then(i,i)}}));return _&&"function"==typeof _.then?DexiePromise.resolve(_):T.then((function(){return _}))}})),p.push((function(a){v&&xe||function deleteRemovedTables(i,a){for(var u=0;u<a.db.objectStoreNames.length;++u){var l=a.db.objectStoreNames[u];null==i[l]&&a.db.deleteObjectStore(l)}}(d._cfg.dbschema,a);removeTablesApi(i,[i.Transaction.prototype]),setApiOnPlace(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),l.schema=i._dbSchema}))})),runQueue().then((function(){!function createMissingTables(i,u){a(i).forEach((function(a){u.db.objectStoreNames.contains(a)||createTable(u,a,i[a].primKey,i[a].indexes)}))}(y,h)}))}(i,u,d,l).catch(y)}))}function getSchemaDiff(i,a){var u,l={del:[],add:[],change:[]};for(u in i)a[u]||l.del.push(u);for(u in a){var h=i[u],p=a[u];if(h){var d={name:u,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||h.primKey.auto!==p.primKey.auto&&!_e)d.recreate=!0,l.change.push(d);else{var y=h.idxByName,v=p.idxByName,m=void 0;for(m in y)v[m]||d.del.push(m);for(m in v){var g=y[m],b=v[m];g?g.src!==b.src&&d.change.push(b):d.add.push(b)}(d.del.length>0||d.add.length>0||d.change.length>0)&&l.change.push(d)}}else l.add.push([u,p])}return l}function createTable(i,a,u,l){var h=i.db.createObjectStore(a,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return l.forEach((function(i){return addIndex(h,i)})),h}function addIndex(i,a){i.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function buildGlobalSchema(i,a,u){var l={};return slice(a.objectStoreNames,0).forEach((function(i){for(var a=u.objectStore(i),h=a.keyPath,p=createIndexSpec(nameFromKeyPath(h),h||"",!1,!1,!!a.autoIncrement,h&&"string"!=typeof h,!0),d=[],y=0;y<a.indexNames.length;++y){var v=a.index(a.indexNames[y]);h=v.keyPath;var m=createIndexSpec(v.name,h,!!v.unique,!!v.multiEntry,!1,h&&"string"!=typeof h,!1);d.push(m)}l[i]=createTableSchema(i,p,d)})),l}function adjustToExistingIndexNames(i,a,u){for(var l=u.db.objectStoreNames,p=0;p<l.length;++p){var d=l[p],y=u.objectStore(d);i._hasGetAll="getAll"in y;for(var v=0;v<y.indexNames.length;++v){var m=y.indexNames[v],g=y.index(m).keyPath,b="string"==typeof g?g:"["+slice(g).join("+")+"]";if(a[d]){var w=a[d].idxByName[b];w&&(w.name=m,delete a[d].idxByName[b],a[d].idxByName[m]=w)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}var Ie,De=function(){function Version(){}return Version.prototype._parseStoresSpec=function(i,l){a(i).forEach((function(a){if(null!==i[a]){var h=function parseIndexSyntax(i){return i.split(",").map((function(i,a){var l=(i=i.trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return createIndexSpec(l,h||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),u(h),0===a)}))}(i[a]),p=h.shift();if(p.multi)throw new D.Schema("Primary key cannot be multi-valued");h.forEach((function(i){if(i.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!i.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")})),l[a]=createTableSchema(a,p,h)}}))},Version.prototype.stores=function(i){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,i):i;var l=u._versions,h={},p={};return l.forEach((function(i){extend(h,i._cfg.storesSource),p=i._cfg.dbschema={},i._parseStoresSpec(h,p)})),u._dbSchema=p,removeTablesApi(u,[u._allTables,u,u.Transaction.prototype]),setApiOnPlace(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],a(p),p),u._storeNames=a(p),this},Version.prototype.upgrade=function(i){return this._cfg.contentUpgrade=i,this},Version}();function vip(i){return newScope((function(){return ne.letThrough=!0,i()}))}function dexieOpen(i){var u=i._state,l=i._deps.indexedDB;if(u.isBeingOpened||i.idbdb)return u.dbReadyPromise.then((function(){return u.dbOpenError?de(u.dbOpenError):i}));A&&(u.openCanceller._stackHolder=getErrorWithStack()),u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var h=u.dbReadyResolve,p=null;return DexiePromise.race([u.openCanceller,new DexiePromise((function(h,d){if(!l)throw new D.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var y=i.name,v=u.autoSchema?l.open(y):l.open(y,Math.round(10*i.verno));if(!v)throw new D.MissingAPI("IndexedDB API not available");v.onerror=eventRejectHandler(d),v.onblocked=wrap(i._fireOnBlocked),v.onupgradeneeded=wrap((function(a){if(p=v.transaction,u.autoSchema&&!i._options.allowEmptyDB){v.onerror=preventDefault,p.abort(),v.result.close();var h=l.deleteDatabase(y);h.onsuccess=h.onerror=wrap((function(){d(new D.NoSuchDatabase("Database "+y+" doesnt exist"))}))}else{p.onerror=eventRejectHandler(d);var m=a.oldVersion>Math.pow(2,62)?0:a.oldVersion;i.idbdb=v.result,runUpgraders(i,m/10,p,d)}}),d),v.onsuccess=wrap((function(){p=null;var l=i.idbdb=v.result,d=slice(l.objectStoreNames);if(d.length>0)try{var m=l.transaction(safariMultiStoreFix(d),"readonly");u.autoSchema?function readGlobalSchema(i,u,l){i.verno=u.version/10;var h=i._dbSchema=buildGlobalSchema(0,u,l);i._storeNames=slice(u.objectStoreNames,0),setApiOnPlace(i,[i._allTables],a(h),h)}(i,l,m):(adjustToExistingIndexNames(i,i._dbSchema,m),function verifyInstalledSchema(i,a){var u=getSchemaDiff(buildGlobalSchema(0,i.idbdb,a),i._dbSchema);return!(u.add.length||u.change.some((function(i){return i.add.length||i.change.length})))}(i,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),generateMiddlewareStacks(i,m)}catch(i){}we.push(i),l.onversionchange=wrap((function(a){u.vcFired=!0,i.on("versionchange").fire(a)})),Ie.add(y),h()}),d)}))]).then((function(){return u.onReadyBeingFired=[],DexiePromise.resolve(vip(i.on.ready.fire)).then((function fireRemainders(){if(u.onReadyBeingFired.length>0){var i=u.onReadyBeingFired.reduce(promisableChain,nop);return u.onReadyBeingFired=[],DexiePromise.resolve(vip(i)).then(fireRemainders)}}))})).finally((function(){u.onReadyBeingFired=null})).then((function(){return u.isBeingOpened=!1,i})).catch((function(a){try{p&&p.abort()}catch(i){}return u.isBeingOpened=!1,i.close(),u.dbOpenError=a,de(u.dbOpenError)})).finally((function(){u.openComplete=!0,h()}))}function awaitIterator(i){var callNext=function(a){return i.next(a)},a=step(callNext),l=step((function(a){return i.throw(a)}));function step(i){return function(h){var p=i(h),d=p.value;return p.done?d:d&&"function"==typeof d.then?d.then(a,l):u(d)?Promise.all(d).then(a,l):a(d)}}return step(callNext)()}function extractTransactionArgs(i,a,u){var l=arguments.length;if(l<2)throw new D.InvalidArgument("Too few arguments");for(var h=new Array(l-1);--l;)h[l-1]=arguments[l];u=h.pop();var p=flatten(h);return[i,p,u]}function enterTransactionScope(i,a,u,l,h){return DexiePromise.resolve().then((function(){var p=ne.transless||ne,d=i._createTransaction(a,u,i._dbSchema,l),y={trans:d,transless:p};l?d.idbtrans=l.idbtrans:d.create();var v,m=P(h);m&&incrementExpectedAwaits();var g=DexiePromise.follow((function(){if(v=h.call(d,d))if(m){var i=decrementExpectedAwaits.bind(null,null);v.then(i,i)}else"function"==typeof v.next&&"function"==typeof v.throw&&(v=awaitIterator(v))}),y);return(v&&"function"==typeof v.then?DexiePromise.resolve(v).then((function(i){return d.active?i:de(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):g.then((function(){return v}))).then((function(i){return l&&d._resolve(),d._completion.then((function(){return i}))})).catch((function(i){return d._reject(i),de(i)}))}))}function pad(i,a,l){for(var h=u(i)?i.slice():[i],p=0;p<l;++p)h.push(a);return h}var Ne={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function createVirtualIndexMiddleware(i){return __assign(__assign({},i),{table:function(a){var u=i.table(a),l=u.schema,h={},p=[];function addVirtualIndexes(i,a,u){var l=getKeyPathAlias(i),d=h[l]=h[l]||[],y=null==i?0:"string"==typeof i?1:i.length,v=a>0,m=__assign(__assign({},u),{isVirtual:v,isPrimaryKey:!v&&u.isPrimaryKey,keyTail:a,keyLength:y,extractKey:getKeyExtractor(i),unique:!v&&u.unique});(d.push(m),m.isPrimaryKey||p.push(m),y>1)&&addVirtualIndexes(2===y?i[0]:i.slice(0,y-1),a+1,u);return d.sort((function(i,a){return i.keyTail-a.keyTail})),m}var d=addVirtualIndexes(l.primaryKey.keyPath,0,l.primaryKey);h[":id"]=[d];for(var y=0,v=l.indexes;y<v.length;y++){var m=v[y];addVirtualIndexes(m.keyPath,0,m)}function translateRequest(a){var u,l,h=a.query.index;return h.isVirtual?__assign(__assign({},a),{query:{index:h,range:(u=a.query.range,l=h.keyTail,{type:1===u.type?2:u.type,lower:pad(u.lower,u.lowerOpen?i.MAX_KEY:i.MIN_KEY,l),lowerOpen:!0,upper:pad(u.upper,u.upperOpen?i.MIN_KEY:i.MAX_KEY,l),upperOpen:!0})}}):a}return __assign(__assign({},u),{schema:__assign(__assign({},l),{primaryKey:d,indexes:p,getIndexByKeyPath:function findBestIndex(i){var a=h[getKeyPathAlias(i)];return a&&a[0]}}),count:function(i){return u.count(translateRequest(i))},query:function(i){return u.query(translateRequest(i))},openCursor:function(a){var l=a.query.index,h=l.keyTail,p=l.isVirtual,d=l.keyLength;if(!p)return u.openCursor(a);return u.openCursor(translateRequest(a)).then((function(u){return u&&function createVirtualCursor(u){return Object.create(u,{continue:{value:function _continue(l){null!=l?u.continue(pad(l,a.reverse?i.MAX_KEY:i.MIN_KEY,h)):a.unique?u.continue(pad(u.key,a.reverse?i.MIN_KEY:i.MAX_KEY,h)):u.continue()}},continuePrimaryKey:{value:function(a,l){u.continuePrimaryKey(pad(a,i.MAX_KEY,h),l)}},key:{get:function(){var i=u.key;return 1===d?i[0]:i.slice(0,d)}},value:{get:function(){return u.value}}})}(u)}))}})}})}},Re={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return __assign(__assign({},i),{table:function(a){var u=i.table(a),l=u.schema.primaryKey;return __assign(__assign({},u),{mutate:function(i){var h=ne.trans,p=h.table(a).hook,d=p.deleting,y=p.creating,v=p.updating;switch(i.type){case"add":if(y.fire===nop)break;return h._promise("readwrite",(function(){return addPutOrDelete(i)}),!0);case"put":if(y.fire===nop&&v.fire===nop)break;return h._promise("readwrite",(function(){return addPutOrDelete(i)}),!0);case"delete":if(d.fire===nop)break;return h._promise("readwrite",(function(){return addPutOrDelete(i)}),!0);case"deleteRange":if(d.fire===nop)break;return h._promise("readwrite",(function(){return function deleteRange(i){return deleteNextChunk(i.trans,i.range,1e4)}(i)}),!0)}return u.mutate(i);function addPutOrDelete(i){var a=ne.trans,h=i.keys||getEffectiveKeys(l,i);if(!h)throw new Error("Keys missing");return"delete"!==(i="add"===i.type||"put"===i.type?__assign(__assign({},i),{keys:h,wantResults:!0}):__assign({},i)).type&&(i.values=__spreadArrays(i.values)),i.keys&&(i.keys=__spreadArrays(i.keys)),function getExistingValues(i,a,u){return"add"===a.type?Promise.resolve(new Array(a.values.length)):i.getMany({trans:a.trans,keys:u})}(u,i,h).then((function(p){var m=h.map((function(u,h){var m=p[h],g={onerror:null,onsuccess:null};if("delete"===i.type)d.fire.call(g,u,m,a);else if("add"===i.type||void 0===m){var b=y.fire.call(g,u,i.values[h],a);null==u&&null!=b&&(u=b,i.keys[h]=u,l.outbound||setByKeyPath(i.values[h],l.keyPath,u))}else{var w=getObjectDiff(m,i.values[h]),_=v.fire.call(g,w,u,m,a);if(_){var x=i.values[h];Object.keys(_).forEach((function(i){hasOwn(x,i)?x[i]=_[i]:setByKeyPath(x,i,_[i])}))}}return g}));return u.mutate(i).then((function(a){for(var u=a.failures,l=a.results,d=a.numFailures,y=a.lastResult,v=0;v<h.length;++v){var g=l?l[v]:h[v],b=m[v];null==g?b.onerror&&b.onerror(u[v]):b.onsuccess&&b.onsuccess("put"===i.type&&p[v]?i.values[v]:g)}return{failures:u,results:l,numFailures:d,lastResult:y}})).catch((function(i){return m.forEach((function(a){return a.onerror&&a.onerror(i)})),Promise.reject(i)}))}))}function deleteNextChunk(i,a,h){return u.query({trans:i,values:!1,query:{index:l,range:a},limit:h}).then((function(u){var l=u.result;return addPutOrDelete({type:"delete",keys:l,trans:i}).then((function(u){return u.numFailures>0?Promise.reject(u.failures[0]):l.length<h?{failures:[],numFailures:0,lastResult:void 0}:deleteNextChunk(i,__assign(__assign({},a),{lower:l[l.length-1],lowerOpen:!0}),h)}))}))}}})}})}},Ke=function(){function Dexie(i,a){var u=this;this._middlewares={},this.verno=0;var l=Dexie.dependencies;this._options=a=__assign({addons:Dexie.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var h=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var p={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:nop,dbReadyPromise:null,cancelOpen:nop,openCanceller:null,autoSchema:!0};p.dbReadyPromise=new DexiePromise((function(i){p.dbReadyResolve=i})),p.openCanceller=new DexiePromise((function(i,a){p.cancelOpen=a})),this._state=p,this.name=i,this.on=Events(this,"populate","blocked","versionchange",{ready:[promisableChain,nop]}),this.on.ready.subscribe=override(this.on.ready.subscribe,(function(i){return function(a,l){Dexie.vip((function(){var h=u._state;if(h.openComplete)h.dbOpenError||DexiePromise.resolve().then(a),l&&i(a);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(a),l&&i(a);else{i(a);var p=u;l||i((function unsubscribe(){p.on.ready.unsubscribe(a),p.on.ready.unsubscribe(unsubscribe)}))}}))}})),this.Collection=function createCollectionConstructor(i){return makeClassConstructor(Se.prototype,(function Collection$$1(a,u){this.db=i;var l=Ae,h=null;if(u)try{l=u()}catch(i){h=i}var p=a._ctx,d=p.table,y=d.hook.reading.fire;this._ctx={table:d,index:p.index,isPrimKey:!p.index||d.schema.primKey.keyPath&&p.index===d.schema.primKey.name,range:l,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:p.or,valueMapper:y!==mirror?y:null}}))}(this),this.Table=function createTableConstructor(i){return makeClassConstructor(ke.prototype,(function Table$$1(a,u,l){this.db=i,this._tx=l,this.name=a,this.schema=u,this.hook=i._allTables[a]?i._allTables[a].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})}))}(this),this.Transaction=function createTransactionConstructor(i){return makeClassConstructor(Ce.prototype,(function Transaction$$1(a,u,l,h){var p=this;this.db=i,this.mode=a,this.storeNames=u,this.schema=l,this.idbtrans=null,this.on=Events(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new DexiePromise((function(i,a){p._resolve=i,p._reject=a})),this._completion.then((function(){p.active=!1,p.on.complete.fire()}),(function(i){var a=p.active;return p.active=!1,p.on.error.fire(i),p.parent?p.parent._reject(i):a&&p.idbtrans&&p.idbtrans.abort(),de(i)}))}))}(this),this.Version=function createVersionConstructor(i){return makeClassConstructor(De.prototype,(function Version$$1(a){this.db=i,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function createWhereClauseConstructor(i){return makeClassConstructor(Be.prototype,(function WhereClause$$1(a,u,l){this.db=i,this._ctx={table:a,index:":id"===u?null:u,or:l};var h=i._deps.indexedDB;if(!h)throw new D.MissingAPI("indexedDB API missing");this._cmp=this._ascending=h.cmp.bind(h),this._descending=function(i,a){return h.cmp(a,i)},this._max=function(i,a){return h.cmp(i,a)>0?i:a},this._min=function(i,a){return h.cmp(i,a)<0?i:a},this._IDBKeyRange=i._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(i){i.newVersion>0?console.warn("Another connection wants to upgrade database '"+u.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+u.name+"'. Closing db now to resume the delete request."),u.close()})),this.on("blocked",(function(i){!i.newVersion||i.newVersion<i.oldVersion?console.warn("Dexie.delete('"+u.name+"') was blocked"):console.warn("Upgrade '"+u.name+"' blocked by other connection holding version "+i.oldVersion/10)})),this._maxKey=getMaxKey(a.IDBKeyRange),this._createTransaction=function(i,a,l,h){return new u.Transaction(i,a,l,h)},this._fireOnBlocked=function(i){u.on("blocked").fire(i),we.filter((function(i){return i.name===u.name&&i!==u&&!i._state.vcFired})).map((function(a){return a.on("versionchange").fire(i)}))},this.use(Ne),this.use(Re),h.forEach((function(i){return i(u)}))}return Dexie.prototype.version=function(i){if(isNaN(i)||i<.1)throw new D.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var a=this._versions,u=a.filter((function(a){return a._cfg.version===i}))[0];return u||(u=new this.Version(i),a.push(u),a.sort(lowerVersionFirst),u.stores({}),this._state.autoSchema=!1,u)},Dexie.prototype._whenReady=function(i){var a=this;return this._state.openComplete||ne.letThrough?i():new DexiePromise((function(i,u){if(!a._state.isBeingOpened){if(!a._options.autoOpen)return void u(new D.DatabaseClosed);a.open().catch(nop)}a._state.dbReadyPromise.then(i,u)})).then(i)},Dexie.prototype.use=function(i){var a=i.stack,u=i.create,l=i.level,h=i.name;h&&this.unuse({stack:a,name:h});var p=this._middlewares[a]||(this._middlewares[a]=[]);return p.push({stack:a,create:u,level:null==l?10:l,name:h}),p.sort((function(i,a){return i.level-a.level})),this},Dexie.prototype.unuse=function(i){var a=i.stack,u=i.name,l=i.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter((function(i){return l?i.create!==l:!!u&&i.name!==u}))),this},Dexie.prototype.open=function(){return dexieOpen(this)},Dexie.prototype.close=function(){var i=we.indexOf(this),a=this._state;if(i>=0&&we.splice(i,1),this.idbdb){try{this.idbdb.close()}catch(i){}this.idbdb=null}this._options.autoOpen=!1,a.dbOpenError=new D.DatabaseClosed,a.isBeingOpened&&a.cancelOpen(a.dbOpenError),a.dbReadyPromise=new DexiePromise((function(i){a.dbReadyResolve=i})),a.openCanceller=new DexiePromise((function(i,u){a.cancelOpen=u}))},Dexie.prototype.delete=function(){var i=this,a=arguments.length>0,u=this._state;return new DexiePromise((function(l,h){var doDelete=function(){i.close();var a=i._deps.indexedDB.deleteDatabase(i.name);a.onsuccess=wrap((function(){Ie.remove(i.name),l()})),a.onerror=eventRejectHandler(h),a.onblocked=i._fireOnBlocked};if(a)throw new D.InvalidArgument("Arguments not allowed in db.delete()");u.isBeingOpened?u.dbReadyPromise.then(doDelete):doDelete()}))},Dexie.prototype.backendDB=function(){return this.idbdb},Dexie.prototype.isOpen=function(){return null!==this.idbdb},Dexie.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&"DatabaseClosed"===i.name},Dexie.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Dexie.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Dexie.prototype,"tables",{get:function(){var i=this;return a(this._allTables).map((function(a){return i._allTables[a]}))},enumerable:!0,configurable:!0}),Dexie.prototype.transaction=function(){var i=extractTransactionArgs.apply(this,arguments);return this._transaction.apply(this,i)},Dexie.prototype._transaction=function(i,a,u){var l=this,h=ne.trans;h&&h.db===this&&-1===i.indexOf("!")||(h=null);var p,d,y=-1!==i.indexOf("?");i=i.replace("!","").replace("?","");try{if(d=a.map((function(i){var a=i instanceof l.Table?i.name:i;if("string"!=typeof a)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a})),"r"==i||i===Oe)p=Oe;else{if("rw"!=i&&i!=Pe)throw new D.InvalidArgument("Invalid transaction mode: "+i);p=Pe}if(h){if(h.mode===Oe&&p===Pe){if(!y)throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&d.forEach((function(i){if(h&&-1===h.storeNames.indexOf(i)){if(!y)throw new D.SubTransaction("Table "+i+" not included in parent transaction.");h=null}})),y&&h&&!h.active&&(h=null)}}catch(i){return h?h._promise(null,(function(a,u){u(i)})):de(i)}var v=enterTransactionScope.bind(null,this,p,d,h,u);return h?h._promise(p,v,"lock"):ne.trans?usePSD(ne.transless,(function(){return l._whenReady(v)})):this._whenReady(v)},Dexie.prototype.table=function(i){if(!hasOwn(this._allTables,i))throw new D.InvalidTable("Table "+i+" does not exist");return this._allTables[i]},Dexie}(),Le=Ke;return props(Le,__assign(__assign({},K),{delete:function(i){return new Le(i).delete()},exists:function(i){return new Le(i,{addons:[]}).open().then((function(i){return i.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(i){return Ie?Ie.getDatabaseNames().then(i):DexiePromise.resolve([])},defineClass:function(){return function Class(i){extend(this,i)}},ignoreTransaction:function(i){return ne.trans?usePSD(ne.transless,i):i()},vip:vip,async:function(i){return function(){try{var a=awaitIterator(i.apply(this,arguments));return a&&"function"==typeof a.then?a:DexiePromise.resolve(a)}catch(i){return de(i)}}},spawn:function(i,a,u){try{var l=awaitIterator(i.apply(u,a||[]));return l&&"function"==typeof l.then?l:DexiePromise.resolve(l)}catch(i){return de(i)}},currentTransaction:{get:function(){return ne.trans||null}},waitFor:function(i,a){var u=DexiePromise.resolve("function"==typeof i?Le.ignoreTransaction(i):i).timeout(a||6e4);return ne.trans?ne.trans.waitFor(u):u},Promise:DexiePromise,debug:{get:function(){return A},set:function(i){setDebug(i,"dexie"===i?function(){return!0}:dexieStackFrameFilter)}},derive:derive,extend:extend,props:props,override:override,Events:Events,getByKeyPath:getByKeyPath,setByKeyPath:setByKeyPath,delByKeyPath:delByKeyPath,shallowClone:shallowClone,deepClone:deepClone,getObjectDiff:getObjectDiff,asap:asap,minKey:me,addons:[],connections:we,errnames:j,dependencies:function(){try{return{indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch(i){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:ye,version:ye.split(".").map((function(i){return parseInt(i)})).reduce((function(i,a,u){return i+a/Math.pow(10,2*u)})),default:Le,Dexie:Le})),Le.maxKey=getMaxKey(Le.dependencies.IDBKeyRange),function initDatabaseEnumerator(i){try{Ie=function DatabaseEnumerator(i){var a,u=i&&"function"==typeof i.databases;if(!u){var l=new Ke(Ee,{addons:[]});l.version(1).stores({dbnames:"name"}),a=l.table("dbnames")}return{getDatabaseNames:function(){return u?DexiePromise.resolve(i.databases()).then((function(i){return i.map((function(i){return i.name})).filter((function(i){return i!==Ee}))})):a.toCollection().primaryKeys()},add:function(i){return!u&&i!==Ee&&a.put({name:i}).catch(nop)},remove:function(i){return!u&&i!==Ee&&a.delete(i).catch(nop)}}}(i)}catch(i){}}(Ke.dependencies.indexedDB),DexiePromise.rejectionMapper=function mapError(i,a){if(!i||i instanceof DexieError||i instanceof TypeError||i instanceof SyntaxError||!i.name||!N[i.name])return i;var u=new N[i.name](a||i.message,i);return"stack"in i&&setProp(u,"stack",{get:function(){return this.inner.stack}}),u},setDebug(A,dexieStackFrameFilter),Ke}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i("timers").setImmediate)},{timers:19}],16:[function(i,a,u){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
u.read=function(i,a,u,l,h){var p,d,y=8*h-l-1,v=(1<<y)-1,m=v>>1,g=-7,b=u?h-1:0,w=u?-1:1,_=i[a+b];for(b+=w,p=_&(1<<-g)-1,_>>=-g,g+=y;g>0;p=256*p+i[a+b],b+=w,g-=8);for(d=p&(1<<-g)-1,p>>=-g,g+=l;g>0;d=256*d+i[a+b],b+=w,g-=8);if(0===p)p=1-m;else{if(p===v)return d?NaN:1/0*(_?-1:1);d+=Math.pow(2,l),p-=m}return(_?-1:1)*d*Math.pow(2,p-l)},u.write=function(i,a,u,l,h,p){var d,y,v,m=8*p-h-1,g=(1<<m)-1,b=g>>1,w=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,_=l?0:p-1,x=l?1:-1,T=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(y=isNaN(a)?1:0,d=g):(d=Math.floor(Math.log(a)/Math.LN2),a*(v=Math.pow(2,-d))<1&&(d--,v*=2),(a+=d+b>=1?w/v:w*Math.pow(2,1-b))*v>=2&&(d++,v/=2),d+b>=g?(y=0,d=g):d+b>=1?(y=(a*v-1)*Math.pow(2,h),d+=b):(y=a*Math.pow(2,b-1)*Math.pow(2,h),d=0));h>=8;i[u+_]=255&y,_+=x,y/=256,h-=8);for(d=d<<h|y,m+=h;m>0;i[u+_]=255&d,_+=x,d/=256,m-=8);i[u+_-x]|=128*T}},{}],17:[function(i,a,u){var l,h,p=a.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(i){if(l===setTimeout)return setTimeout(i,0);if((l===defaultSetTimout||!l)&&setTimeout)return l=setTimeout,setTimeout(i,0);try{return l(i,0)}catch(a){try{return l.call(null,i,0)}catch(a){return l.call(this,i,0)}}}!function(){try{l="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(i){l=defaultSetTimout}try{h="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(i){h=defaultClearTimeout}}();var d,y=[],v=!1,m=-1;function cleanUpNextTick(){v&&d&&(v=!1,d.length?y=d.concat(y):m=-1,y.length&&drainQueue())}function drainQueue(){if(!v){var i=runTimeout(cleanUpNextTick);v=!0;for(var a=y.length;a;){for(d=y,y=[];++m<a;)d&&d[m].run();m=-1,a=y.length}d=null,v=!1,function runClearTimeout(i){if(h===clearTimeout)return clearTimeout(i);if((h===defaultClearTimeout||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(i);try{return h(i)}catch(a){try{return h.call(null,i)}catch(a){return h.call(this,i)}}}(i)}}function Item(i,a){this.fun=i,this.array=a}function noop(){}p.nextTick=function(i){var a=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)a[u-1]=arguments[u];y.push(new Item(i,a)),1!==y.length||v||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=noop,p.addListener=noop,p.once=noop,p.off=noop,p.removeListener=noop,p.removeAllListeners=noop,p.emit=noop,p.prependListener=noop,p.prependOnceListener=noop,p.listeners=function(i){return[]},p.binding=function(i){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(i){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],18:[function(i,a,u){var l=function(i){"use strict";var a,u=Object.prototype,l=u.hasOwnProperty,h="function"==typeof Symbol?Symbol:{},p=h.iterator||"@@iterator",d=h.asyncIterator||"@@asyncIterator",y=h.toStringTag||"@@toStringTag";function define(i,a,u){return Object.defineProperty(i,a,{value:u,enumerable:!0,configurable:!0,writable:!0}),i[a]}try{define({},"")}catch(i){define=function(i,a,u){return i[a]=u}}function wrap(i,a,u,l){var h=a&&a.prototype instanceof Generator?a:Generator,p=Object.create(h.prototype),d=new Context(l||[]);return p._invoke=function makeInvokeMethod(i,a,u){var l=v;return function invoke(h,p){if(l===g)throw new Error("Generator is already running");if(l===b){if("throw"===h)throw p;return doneResult()}for(u.method=h,u.arg=p;;){var d=u.delegate;if(d){var y=maybeInvokeDelegate(d,u);if(y){if(y===w)continue;return y}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(l===v)throw l=b,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);l=g;var _=tryCatch(i,a,u);if("normal"===_.type){if(l=u.done?b:m,_.arg===w)continue;return{value:_.arg,done:u.done}}"throw"===_.type&&(l=b,u.method="throw",u.arg=_.arg)}}}(i,u,d),p}function tryCatch(i,a,u){try{return{type:"normal",arg:i.call(a,u)}}catch(i){return{type:"throw",arg:i}}}i.wrap=wrap;var v="suspendedStart",m="suspendedYield",g="executing",b="completed",w={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var _={};_[p]=function(){return this};var x=Object.getPrototypeOf,T=x&&x(x(values([])));T&&T!==u&&l.call(T,p)&&(_=T);var E=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(_);function defineIteratorMethods(i){["next","throw","return"].forEach((function(a){define(i,a,(function(i){return this._invoke(a,i)}))}))}function AsyncIterator(i,a){function invoke(u,h,p,d){var y=tryCatch(i[u],i,h);if("throw"!==y.type){var v=y.arg,m=v.value;return m&&"object"==typeof m&&l.call(m,"__await")?a.resolve(m.__await).then((function(i){invoke("next",i,p,d)}),(function(i){invoke("throw",i,p,d)})):a.resolve(m).then((function(i){v.value=i,p(v)}),(function(i){return invoke("throw",i,p,d)}))}d(y.arg)}var u;this._invoke=function enqueue(i,l){function callInvokeWithMethodAndArg(){return new a((function(a,u){invoke(i,l,a,u)}))}return u=u?u.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(i,u){var l=i.iterator[u.method];if(l===a){if(u.delegate=null,"throw"===u.method){if(i.iterator.return&&(u.method="return",u.arg=a,maybeInvokeDelegate(i,u),"throw"===u.method))return w;u.method="throw",u.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var h=tryCatch(l,i.iterator,u.arg);if("throw"===h.type)return u.method="throw",u.arg=h.arg,u.delegate=null,w;var p=h.arg;return p?p.done?(u[i.resultName]=p.value,u.next=i.nextLoc,"return"!==u.method&&(u.method="next",u.arg=a),u.delegate=null,w):p:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,w)}function pushTryEntry(i){var a={tryLoc:i[0]};1 in i&&(a.catchLoc=i[1]),2 in i&&(a.finallyLoc=i[2],a.afterLoc=i[3]),this.tryEntries.push(a)}function resetTryEntry(i){var a=i.completion||{};a.type="normal",delete a.arg,i.completion=a}function Context(i){this.tryEntries=[{tryLoc:"root"}],i.forEach(pushTryEntry,this),this.reset(!0)}function values(i){if(i){var u=i[p];if(u)return u.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length)){var h=-1,d=function next(){for(;++h<i.length;)if(l.call(i,h))return next.value=i[h],next.done=!1,next;return next.value=a,next.done=!0,next};return d.next=d}}return{next:doneResult}}function doneResult(){return{value:a,done:!0}}return GeneratorFunction.prototype=E.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunction.displayName=define(GeneratorFunctionPrototype,y,"GeneratorFunction"),i.isGeneratorFunction=function(i){var a="function"==typeof i&&i.constructor;return!!a&&(a===GeneratorFunction||"GeneratorFunction"===(a.displayName||a.name))},i.mark=function(i){return Object.setPrototypeOf?Object.setPrototypeOf(i,GeneratorFunctionPrototype):(i.__proto__=GeneratorFunctionPrototype,define(i,y,"GeneratorFunction")),i.prototype=Object.create(E),i},i.awrap=function(i){return{__await:i}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[d]=function(){return this},i.AsyncIterator=AsyncIterator,i.async=function(a,u,l,h,p){void 0===p&&(p=Promise);var d=new AsyncIterator(wrap(a,u,l,h),p);return i.isGeneratorFunction(u)?d:d.next().then((function(i){return i.done?i.value:d.next()}))},defineIteratorMethods(E),define(E,y,"Generator"),E[p]=function(){return this},E.toString=function(){return"[object Generator]"},i.keys=function(i){var a=[];for(var u in i)a.push(u);return a.reverse(),function next(){for(;a.length;){var u=a.pop();if(u in i)return next.value=u,next.done=!1,next}return next.done=!0,next}},i.values=values,Context.prototype={constructor:Context,reset:function(i){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(resetTryEntry),!i)for(var u in this)"t"===u.charAt(0)&&l.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=a)},stop:function(){this.done=!0;var i=this.tryEntries[0].completion;if("throw"===i.type)throw i.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var u=this;function handle(l,h){return d.type="throw",d.arg=i,u.next=l,h&&(u.method="next",u.arg=a),!!h}for(var h=this.tryEntries.length-1;h>=0;--h){var p=this.tryEntries[h],d=p.completion;if("root"===p.tryLoc)return handle("end");if(p.tryLoc<=this.prev){var y=l.call(p,"catchLoc"),v=l.call(p,"finallyLoc");if(y&&v){if(this.prev<p.catchLoc)return handle(p.catchLoc,!0);if(this.prev<p.finallyLoc)return handle(p.finallyLoc)}else if(y){if(this.prev<p.catchLoc)return handle(p.catchLoc,!0)}else{if(!v)throw new Error("try statement without catch or finally");if(this.prev<p.finallyLoc)return handle(p.finallyLoc)}}}},abrupt:function(i,a){for(var u=this.tryEntries.length-1;u>=0;--u){var h=this.tryEntries[u];if(h.tryLoc<=this.prev&&l.call(h,"finallyLoc")&&this.prev<h.finallyLoc){var p=h;break}}p&&("break"===i||"continue"===i)&&p.tryLoc<=a&&a<=p.finallyLoc&&(p=null);var d=p?p.completion:{};return d.type=i,d.arg=a,p?(this.method="next",this.next=p.finallyLoc,w):this.complete(d)},complete:function(i,a){if("throw"===i.type)throw i.arg;return"break"===i.type||"continue"===i.type?this.next=i.arg:"return"===i.type?(this.rval=this.arg=i.arg,this.method="return",this.next="end"):"normal"===i.type&&a&&(this.next=a),w},finish:function(i){for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a];if(u.finallyLoc===i)return this.complete(u.completion,u.afterLoc),resetTryEntry(u),w}},catch:function(i){for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a];if(u.tryLoc===i){var l=u.completion;if("throw"===l.type){var h=l.arg;resetTryEntry(u)}return h}}throw new Error("illegal catch attempt")},delegateYield:function(i,u,l){return this.delegate={iterator:values(i),resultName:u,nextLoc:l},"next"===this.method&&(this.arg=a),w}},i}("object"==typeof a?a.exports:{});try{regeneratorRuntime=l}catch(i){Function("r","regeneratorRuntime = r")(l)}},{}],19:[function(i,a,u){(function(a,l){(function(){var h=i("process/browser.js").nextTick,p=Function.prototype.apply,d=Array.prototype.slice,y={},v=0;function Timeout(i,a){this._id=i,this._clearFn=a}u.setTimeout=function(){return new Timeout(p.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new Timeout(p.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(i){i.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(i,a){clearTimeout(i._idleTimeoutId),i._idleTimeout=a},u.unenroll=function(i){clearTimeout(i._idleTimeoutId),i._idleTimeout=-1},u._unrefActive=u.active=function(i){clearTimeout(i._idleTimeoutId);var a=i._idleTimeout;a>=0&&(i._idleTimeoutId=setTimeout((function onTimeout(){i._onTimeout&&i._onTimeout()}),a))},u.setImmediate="function"==typeof a?a:function(i){var a=v++,l=!(arguments.length<2)&&d.call(arguments,1);return y[a]=!0,h((function onNextTick(){y[a]&&(l?i.apply(null,l):i.call(null),u.clearImmediate(a))})),a},u.clearImmediate="function"==typeof l?l:function(i){delete y[i]}}).call(this)}).call(this,i("timers").setImmediate,i("timers").clearImmediate)},{"process/browser.js":17,timers:19}]},{},[1]);